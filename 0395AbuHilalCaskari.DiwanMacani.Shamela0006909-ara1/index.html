<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">كتاب المبالغة في المديح والتهاني والافتخار وهو الباب الأول من كتاب ديوان المعاني وهو ثلاثة فصول</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head1">الفصل الأول في المديح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head2">(الفصل الثاني من ms047 الباب الأول في الافتخار)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head3">الفصل الثالث من الباب الأول في التهاني</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">كتاب المبالغة في أوصاف خصال الإنسان المحمودة من الجود والشجاعة والعلم والحلم والحزم والعقل وما يجري مع ذلك وهو  الباب الثاني من كتاب ديوان المعاني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">هذا كتاب المبالغة في المعاتبات والهجاء والاعتذار وهو الباب الثالث من كتاب ديوان المعاني وهو يشتمل على ثلاثة فصول </a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head8">الفصل الأول في المعاتبات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head9">الفصل الثاني من الباب الثالث في الهجاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head10">الفصل الثالث في الاعتذار</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">هذا كتاب المبالغة (في التشبب وأوصاف الحسان وما يجري مع ذلك وهو) الباب الرابع من كتاب ديوان المعاني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">هذا كتاب المبالغة (في صفات النار والطبخ وألوان الطعام، وفي ذكر الشراب وما يجري مع ذلك ثلاثة فصول وهو:) الباب الخامس من كتاب ديوان المعاني</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head15">الفصل الأول في ذكر النار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head16">الفصل الثاني من الباب الخامس (في ذكر ألوان الطعام) </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head17">الفصل الثالث (في ذكر الشراب وما يجري معه من رقيق المعاني)</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">هذا كتاب المبالغة (في وصف السماء والنجوم والليل والصبح والشمس والقمر) وما يجري مع ذلك: وهو الباب السادس من كتاب ديوان المعاني ثلاثة فصول</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head20">الفصل الأول في ذكر النجوم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head21">الفصل الثاني من الباب السادس (في ذكر ظلمة الليل وطوله وقصره وما يجري مع ذلك من سائر أوصافه) </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head22">الفصل الثالث من الباب السادس (في ذكر الصباح والشمس والنهار وما يجري مع ذلك)</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head0"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head1">هذا كتاب المبالغة في صفة السحاب والمطر والبرق والرعد وذكر المياه والرياض والنبات والأشجار والرياحين والثمار والنسيم وما يجري مع ذلك وهو: الباب السابع من كتاب ديوان المعاني وفيه ثلاثة فصول</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head2">الفصل الأول في صفة السحاب والمطر والبرق والرعد والثلج والضريب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head3">الفصل الثاني من الباب السابع في ذكر الرياض والأنوار والبساتين والثمار وما يجري مع ذلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head4">الفصل الثالث من الباب السابع في ذكر النسيم</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head5"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head6">(هذا كتاب المبالغة) في صفات الحرب والسلاح والطعن والضرب وما يجري مع ذلك وهو: الباب الثامن من كتاب ديوان المعاني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head7"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head8">هذا كتاب البمالغة في صفة الخط والقلم والدواة والقرطاس، وذكر البلاغة وما يجري مع ذلك، وهو: الباب التاسع من كتاب ديوان المعاني وهو ثلاثة فصول</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head9">الفصل الأول في ذكر الخط والقلم والدواة والقرطاس وما يسلك مع ذلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head10">الفصل الثاني من الباب التاسع في ذكر البلاغة</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="02.html#head11">جمل من بلاغات العجم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="02.html#head12">ومن كلام الفلاسفة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="02.html#head13">(محاسن كلام العرب والأعراب والخطباء والكتاب)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="02.html#head14">أمثلة في البلاغة الكتابية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="02.html#head15">ومن جيد الأدعية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="02.html#head16">المديح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="02.html#head17">فأما الذم والتهجين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="02.html#head18">في الشكر</a>
</li>
</ul>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head19"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head20">هذا كتاب المبالغة في صفات الخيل والإبل والسير والفلوات وذكر الوحوش والطيور والحشرات وما يجري مع ذلك وهو: الباب العاشر من كتاب ديوان المعاني وهو ستة فصول</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head21">الفصل الأول في صفات الخيل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head22">الفصل الثاني من الباب العاشر في ذكر الإبل وسيرها وما يجري مع ذلك من وصف أحوالها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head23">الفصل الثالث في ذكر الفلوات والظلال والسير والنعاس وما يجري مع ذلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head24">الفصل الرابع (في ذكر الوحوش والسباع والكلاب والصيد وما يجري مع ذلك)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head25">الفصل الخامس من الباب العاشر في ذكر الطيور </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head26">الفصل السادس من الباب العاشر (في ذكر بقية الحيوان من السنور والقنفذ والفأرة والحية والعقرب والحرباء والضب والبق والبراغيث وما يجري مع ذلك) </a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head27"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head28">هذا كتاب المبالغة (في صفة الشباب والشيب والخضاب والعلل والموت والمراثي) والزهد وما يجري مع ذلك وهو: الباب الحادي عشر من كتاب ديوان المعاني</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head29"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head30">الفصل الثاني من الباب الحادي عشر (في ذكر العلل والأمراض والمراثي والتعازي والزهد)</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head31"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head32">هذا كتاب المبالغة (في صفة أشياء مختلفة يختم بها كتاب ديوان المعاني وهو:) الباب الثاني عشر منه </a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head33">فأول ذلك القول في الحنين إلى الأوطان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head34">(فصل في مدح الاخوان)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head35">في ذم الإخوان والرفقاء وما يجري مع ذلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head36">فصل فيما قيل في فضل الوعد ومدح الإنجار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head37">ما قيل في الضحك والبشر عند السؤال</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head38">فصل في تعمية الأشعار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head39">أحسن ما قيل في تقبيل اليد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head40">الحض على السلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head41">السلام على الكفار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head42">رد السلام بالإشارة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head43">ما جاء في المصافحة ms398</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head44">حياك الله وبياك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head45">قولهم مرحبا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head46">ما جاء في أطال الله بقاك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head47">(جعلت فداك)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head48">دعاء المكاتبة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head49">كيف أصبحت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head50">ما جاء في الدعاء للخارج إلى السفر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head51">الدعاء للقادم من السفر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head52">الدعاء للمهزوم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head53">الدعاء للمعزول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head54">دعاء الأعياد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head55">ما قيل في القيام للأجلاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head56">ما قيل في شعبان وشهر رمضان وشوال</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head57">فصل في معان مختلفة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head58">التفاضل بين الإخوان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head59">الحث على موافقة الناس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head60">إغباب الزيارة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head61">في ذم العجائز قول الشاعر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head62">ما ورد في فضل الحمام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head63">الشطرنج قلت فيه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head64">ما ورد في النرد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head65">وأما القدح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head66">(انتظار الفرج)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head67">معنى آخر )</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head68">معنى آخر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head69">ومن أجود التشبيهات في المحجمة قول بعضهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head70">ومما قيل في خطل الرأي قول الآخر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head71">إفساد المعروف بالمن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head72">من يعيب غيره وهو معيب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head73">معنى آخر )</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head74">(معنى آخر)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head75">معنى آخر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head76">ما ورد في حظ الجاهل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head77">(الاستعانة بالجاهل في وقت الحاجة)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head78">معنى آخر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head79">(الاقتداء بالقرين)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head80">المأخوذ بذنب غيره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head81">في النهي عن الظلم قول الأول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head82">ما ورد في الجبن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head83">ومن المضحكات قول الآخر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head84">الخلق من الثياب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head85">من أحب لبناته الموت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head86">فصل آخر</a>
</li>
</ul>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 521969</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Abu Hilal Caskari</label><label>tags: COMPLETED :: CENT0400 :: _ADAB :: _ADAB :: _BALAGHA :: _SHICR :: GAL@period-classical :: GAL@literature-islamic :: GAL@baghdad-school :: GAL@0750-1000CE :: GAL@iraq :: GAL@literature-arabic :: GAL@philology :: GAL@baghdad :: Shamela@الأدب والبلاغة</label><label>url: https://raw.githubusercontent.com/OpenITI/0400AH/master/data/0395AbuHilalCaskari/0395AbuHilalCaskari.DiwanMacani/0395AbuHilalCaskari.DiwanMacani.Shamela0006909-ara1.completed</label><label>tok_length: 126538</label><label>status: pri</label><label>id: Shamela0006909</label><label>ed_info: دار الجيل - بيروت :: http://www.worldcat.org/oclc/222208375</label><label>title_lat: Diwan Macani</label><label>title_ar: ديوان المعاني</label><label>book: 0395AbuHilalCaskari.DiwanMacani</label><label>author_lat: Abu Hilal Caskari</label><label>author_ar: أبو هلال الحسن بن عبد الله بن سهل بن سعيد بن يحيى بن مهران العسكري (المتوفى: نحو 395هـ)</label><label>date: 0395</label><label>versionUri: 0395AbuHilalCaskari.DiwanMacani.Shamela0006909-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "000", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "312", "313", "314", "315", "316", "317", "318", "319", "320", "321", "322", "323", "324", "325", "326", "327", "328", "329", "330", "331", "332", "333", "334", "335", "336", "337", "338", "339", "340", "341", "342", "343", "344", "345", "346", "347", "348", "349", "350", "351", "352", "353", "354", "355", "356", "357", "358", "359", "360", "361", "362"], "02": ["002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
