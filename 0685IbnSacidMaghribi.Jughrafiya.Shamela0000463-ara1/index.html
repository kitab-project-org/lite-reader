<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">بسم الله الرحمن الرحيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">المعمور خلف خط الاستواء إلى الجنوب</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head2">الجزء الأول: فيه من المدن السودانية مدينة كو (مدينة العراة) المهملين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head3">الجزء الثاني: فيه من نوع ما تقدم ومنه زعنه، حيث الطول أربع وعشرون درجة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head4">الجزء الثالث: من أوله حيث الطول ست وثلاثون درجة ودقائق إلى طول تسع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head5">الجزء الرابع: فيه انتهاء جبل القمر على مذهب البطليموس حيث الطول إحدى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head6">الجزء الخامس: في أوله على اثنتي عشرة دقيقة من الجزء الرابع وعرض درجتين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head7">الجزء السادس: فيه على البحر الهندي عمائر السفالين وما لم يشتهر من</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head8">الجزء السابع: فيه ينتهي بر السودان المتصل من أقصى الغرب بجبل الندامة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head9">الجزء الثامن: أول ما يلقاك منه من قواعد جزيرة القمر مدينة خافورا. وهي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head10">الجزء التاسع: فيه مدن وعمائر من جزيرة القمر غير مشهورة. والمذكور من</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head11">الجزء العاشر: فيه جزيرة الموجه طولها من الجنوب إلى الشمال اثنا عشر</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">الإقليم الأول</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head13">الجزء الأول: فيه ظهور البحر المحيط على ما نقل عن بطليموس حيث الطول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head14">الجزء الثاني من الإقليم الأول: أول ما يلقاك منه مدينة بريسا وهي من</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head15">الجزء الثالث من الإقليم الأول: أول ما يلقاك منه جبل ثلا. رأسه الجنوبي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head16">الجزء الرابع من الإقليم الأول: يمر من أوله النيل المغربي على ثلاث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head17">الجزء الخامس من الإقليم الأول:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head18">الجزء السادس: جميعه بحر فيه جزائر الديباجة وهي كثيرة وأكبرها جزيرة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head19">الجزء السابع: معظمه يقع فيه جزائر النارجيل المحسوبة من عمل سرنديب. وهي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head20">الجزء الثامن: أول ما يلقاك من أول خطه، حيث العرض خمس عشرة درجة، من مدن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head21">الجزء التاسع: أول ما يلقاك من الجزائر الهندية جزيرة نكواره. وهي من</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head22">الجزء العاشر: أول ما يلقاك منه جزائر الصين، فأولها من جهة ساحل الصين</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">الإقليم الثاني</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head24">الجزء الأول: تقع فيه الجزيرة السادسة من الجزائر الخالدات وأربع من</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head25">الجزء الثاني: قال ابن فاطمة: في وضعه لا ماء ولا مرعى ولا عمارة، بل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head26">الجزء الثالث: قال ابن فاطمة: أوائل هذا الجزء جارية من حكم الصحارى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head27">الجزء الرابع: أول ما يلقاك في غربيه، جزيرة النيل المصري على جانبيه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head28">الجزء الخامس: أول ما يلقاك منه في غريبه نجران، وهي في آخر جبال اليمن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head29">الجزء السادس: في ساحل البحر الهندي منه جزائر الديباجات. وقد تقدمت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head30">الجزء السابع: تقع في ms037 جنوبه الساحلي من بلاد الجزرات الهندية كنباية وهي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head31">الجزء الثامن: يقع فيه من بلاد مليبار التي يجلب منها الفلفل. وفرضتها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head32">الجزء التاسع: في غربيه بلاد برقلي وفي شرقيها خور فوفل وهو حلو طويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head33">الجزء العاشر: تقع فيه بقية أنهار الصين وجبالها على ما صور في</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">الإقليم الثالث</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head35">الجزء الأول: ينتهي البحر المحيط فيه إلى ست درجات. وهناك مع أوله مصب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head36">الجزء الثاني: متصل بصحاري مقفرة ويقع فيه من البلاد المذكورة بلاد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head37">الجزء الرابع: يقع فيه انحدار المنهى وهو نهر يوسف عليه السلام الذي دبره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head38">الجزء الخامس: أول ما يلقاك منه مجالات خفاجة، وهم عرب العراق في عصرنا،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head39">الجزء السادس: أول ما يلقاك منه بطائح الزط، وهم أمة من عورام السند</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head40">الجزء السابع: أول ما يلقاك من خط الإقليم الرابع مدينة القندبار وهي من</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head41">الجزء الثامن: أول ما يلقاك منه بلاد هاشي التي قاعدتها في الإقليم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head42">الجزء التاسع: يمر منه في جبال بلهارا إلى حيث الطول مائة وتسع وأربعون</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head43">الجزء العاشر: أول ما يلقاك منه في بلاد الصين نهر خمدان إلى الشرق ثم</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">الإقليم الرابع</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head45">الجزء الأول: تقع فيه جزائر السعادات الأربع التي رسمت، ويصعد البحر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head46">الجزء الثاني: أول ما يلقاك منه مدينة تنس، وهي مشهورة بكثرة القمح.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head47">الجزء الرابع: أول ما يلقاك منه بحيرة تنيس وهي في شرقي دمياط، وتقع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head48">الجزء الخامس: أول ما يلقاك على جانب دجلة مدن العراق. وهي أربع عشرة،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head49">الجزء السادس: أول ما يلقاك منه مدينة الباميان، وهي قاعدة لجهاتها،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head50">الجزء السابع: أول ما يلقاك منه بلاد القندبار الهندية، وقد تقدمت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head51">الجزء الثامن: أول ما يلقاك منه هندستان. وهي التي فتحها الغوريون من</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head52">الجزء التاسع: أول ما يلقاك منه مدينة خرمق من قواعد التتر القديمة، وحي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head53">الجزء العاشر: فيه بقية بلاد المغل وبقية بحيرة بلاد كورث. وفي شرقيها</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">الإقليم الخامس</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head55">الجزء الأول: أول ما يلقاك منه في البحر ثلاث جزائر من جزائر السعادات،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head56">الجزء الثاني: أول ما يلقاك منه، على بحر الرمان، مدينة دانيه حيث الطول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head57">الجزء الثالث: أول ما يلقاك منه في بحر الزقاق، بلاد بولية التي يجلب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head58">الجزر الرابع: أول ما يلقاك منه في البر الشامي، ساحل بلاد الدروب. فتقع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head59">الجزء الخامس: في أوله وآخر الجزء الرابع، بحيرة أذربيجان، ووسطها حيث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head60">الجزء السابع: أول ما يلقاك منه الباب الذي ms088 وضعه الفضل بن يحيى في وجوه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head61">الجزء الثامن: أول ما يلقاك منه بعد بحيرة التبت مدينة تبيته، وهي قاعدة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head62">الجزء التاسع: أول ما يلقاك منه منبع نهر ياجوج، وهو حيث الطول مائة وخمس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head63">الجزء العاشر: أول ما يلقاك منه حصن ذي القرنين، الذي جعله لحفظ السد،</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">الإقليم السادس</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head65">الجزء الأول: أول ما يلقاك منه على البحر المحيط كنيسة الغراب المشهورة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head66">الجزء الثاني: أول ما يلقاك منه منبع نهر شوكر، من ms092 جبل الشاره. وهو الذي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head67">الجزء الثالث: أول ما يلقاك منه، على شمالي خليج البنادق، مدينة سبينقو،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head68">الجزء الخامس: أول ما يلقاك منه مدينة برذغه قاعدة سلطنة اران، وهي في</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head69">الجزء السادس: أول ما يلقاك منه، مدينة خوارزم، هكذا يعرفها عامة العجم،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head70">الجزء السابع: كله خال من مدينة مشهورة. وفي آخر عرضه يمر سيحون، وعليه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head71">الجزء الثامن: أول ما يلقاك منه، جبال السهروجية، وهم قوم توالدوا بين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head72">الجزء التاسع: يمتد فيه الجبل المذكور إلى طول مائة وتسع وأربعين درجة،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head73">الجزء العاشر: أول ما يلقاك منه سد ياجوج وماجوج، الذي بناه ذو القرنين،</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">الإقليم السابع</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head75">الجزء الأول: أول ما يلقاك منه على البحر المحيط مصب نهر سموره الكبير،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head76">الجزء الثاني: أول ما يلقاك منه مدينة سنسبين، وهي كثيرة القراقر في دخلة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head77">الجزء الثالث: أول ما يلقاك منه بلاد الباشقرد. وهم ترك، جاوروا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head78">الجزء الرابع: أول ما يلقاك منه مدينة هرقلة القديمة، التي خربها الرشيد.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head79">الجزء الخامس: أول ما يلقاك منه جبل القبق، وفيه، حيث يمكن التولج منه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head80">الجزء السابع: ليس فيه مدينة مذكورة، وإنما هو مجالات، لأصناف من الترك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head81">الجزء الثامن: أول ما يلقاك منه، منبع سيحون وهو خارج من بحيرة بعضها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head82">الجزء التاسع: ليس فيه عمارة، بل يستغرق جميعه البلاد التي خربتها ياجوج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head83">الجزء العاشر: جميعه خلف الجبل في بلاد ياجوج وماجوج. وفي آخره الشرقي</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">المعمور في شمالي الأقاليم السبعة</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head85">الجزء الأول من المعمور خلف الأقاليم: </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head86">الجزء الثاني من المعمور خلف الأقاليم: </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head87">الجزء الثالث من المعمور خلف الأقاليم:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head88">الجزء الرابع من المعمور خلف الأقاليم:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head89">الجزء الخامس من المعمور خلف الأقاليم:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head90">الجزء السادس من المعمور خلف الأقاليم: </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head91">الجزء السابع من المعمور خلف الأقاليم: </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head92">الجزء الثامن من المعمور خلف الأقاليم:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head93">الجزء التاسع من المعمور خلف الأقاليم:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head94">الجزء العاشر من المعمور خلف الأقاليم: </a>
</li>
</ul>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 158331</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Sacid Maghribi</label><label>tags: COMPLETED :: CENT0700 :: GEO :: PPE :: _BULDAN :: _JUGHRAFIYA :: _MISC :: _RIHLAT :: GAL@historiography :: GAL@literature-islamic :: GAL@1000-1258CE :: GAL@history :: GAL@history-local :: GAL@literature-arabic :: GAL@period-postclassical :: GAL@spain :: Shamela@البلدان والجغرافيا والرحلات - مرقم آليا</label><label>url: https://raw.githubusercontent.com/OpenITI/0700AH/master/data/0685IbnSacidMaghribi/0685IbnSacidMaghribi.Jughrafiya/0685IbnSacidMaghribi.Jughrafiya.Shamela0000463-ara1.completed</label><label>tok_length: 35042</label><label>status: pri</label><label>id: Shamela0000463</label><label>ed_info: https://www.worldcat.org/title/kitab-al-jughrafiya/oclc/717758924?referer=br&amp;ht=edition</label><label>title_lat: Jughrafiya</label><label>title_ar: الجغرافيا</label><label>book: 0685IbnSacidMaghribi.Jughrafiya</label><label>author_lat: Ibn Sacid Maghribi</label><label>author_ar: أبو الحسن على بن موسى بن سعيد المغربي (المتوفى: 685هـ)</label><label>date: 0685</label><label>versionUri: 0685IbnSacidMaghribi.Jughrafiya.Shamela0000463-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
