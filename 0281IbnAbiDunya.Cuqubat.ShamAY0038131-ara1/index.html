<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head0">AUTO الكتاب: العقوبات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head1">CHECK [[أسباب العقوبات وأنواعها]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head2">CHECK [[قصة آدم عليه السلام]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head3">CHECK [[نوح عليه السلام]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head4">CHECK [[هود ينصح قومه]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head5">CHECK [[الريح عقوبة عاد]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head6">CHECK [[آدم عليه السلام]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head7">CHECK [[عاد قوم هود]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head8">CHECK [[ثمود قوم صالح]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head9">AUTO 149 - حدثني أزهر بن مروان الرقاشي، قال: حدثنا جعفر بن سليمان،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head10">CHECK [[يعقوب ويوسف عليهما السلام]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head11">CHECK [[أيوب عليه السلام]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head12">CHECK [[يونس عليه السلام وقومه]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head13">CHECK [[قوم شعيب عليه السلام]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head14">CHECK [[ابنا هارون عليه السلام]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head15">AUTO - أول قصة سليمان بن داود عليهما السلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head16">AUTO - أول قصة داود عليه السلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head17">CHECK [[من أخبار بني إسرائيل]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head18">CHECK [[الملائكة عليهم السلام]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head19">CHECK [[ شعيا وبنو إسرائيل ]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head20">CHECK [[أصحاب السبت]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head21">CHECK [[مسخ وخسف]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head22">AUTO 234 - حدثنا فضيل بن عبد الوهاب، قال: حدثنا جرير، عن منصور، عن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head23">CHECK [[عقوبة ملكين]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head24">CHECK [[والد لوط عليه السلام]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head25">CHECK [[موسى وبنو إسرائيل]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head26">AUTO 242- حدثنا إسحاق بن إسماعيل، قال: حدثنا أبو معاوية، عن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head27">AUTO 244 - حدثنا سعيد بن يعقوب الطالقاني، قال: حدثنا هارون بن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head28">AUTO 248 - حدثنا الحسن بن حماد الضبي، قال: حدثنا أبو معاوية، عن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head29">CHECK [[تأخير العقوبة]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head30">CHECK [[أهل العقوبات]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head31">CHECK [[الفتن]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head32">CHECK [[آثار عصيان بني آدم على الحيوانات]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head33">CHECK [[ولاة الخير وولاة الشر]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head34">CHECK [[الأرض]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head35">CHECK [[عقوبات في آخر الزمان]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head36">CHECK [[قوم موسى عليه السلام]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head37">CHECK [[..في البيت الحرام والدعاء بالعقوبة]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head38">CHECK [[الوقوع في الصحابة رضي الله عنهم]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head39">CHECK [[قتل الولد]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head40">CHECK [[الاستهزاء]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head41">CHECK [[أنواع المعاصي]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head42">CHECK [[شكوى يعقوب عليه السلام]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head43">CHECK [[وقت العذاب]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head44">AUTO 322 - حدثنا القاسم بن هاشم، قال: حدثنا آدم بن أبي إياس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head45">CHECK [[إسرائيليات]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head46">CHECK [[المؤمن في الفتن]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head47">CHECK [[في زمن العقوبة]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head48">CHECK [[الاعتبار بالآخرين]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head49">CHECK [[عدم استجابة ms77 الدعاء]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head50">AUTO 333 - أخبرنا فضيل بن عبد الوهاب، قال: أخبرنا هشيم، عن مغيرة،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head51">AUTO 334 - حدثنا فضيل، قال: أخبرنا علي بن عمارة، قال: سمعت قتادة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head52">CHECK [[الذين تعرضوا لعثمان رضي الله عنه]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head53">CHECK [[تلفظه الأرض]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head54">CHECK [[من علامات الساعة]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head55">AUTO 344 - حدثنا عبد الرحمن بن واقد، قال: حدثنا ضمرة، عن الشيباني،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head56">AUTO 346 - حدثنا إسحاق بن إسماعيل، قال: حدثنا جرير، عن الأعمش، عن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head57">CHECK [[ضلال]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head58">CHECK [[وتقليد]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head59">CHECK [[الدعاء على الآخرين]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head60">AUTO 351 - حدثني إبراهيم بن سعيد، قال: حدثنا إبراهيم بن مهدي، قال:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head61">AUTO 353 - حدثني القاسم بن هاشم، قال: حدثنا علي بن عباس، قال:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head62">CHECK [[الزلزال]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head63">CHECK [[عقوبة عدم تسبيح الطيور]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head64">CHECK [[المسخ]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head65">CHECK [[ابنا هارون عليه السلام]]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head66">CHECK [[الدعاء من سبل النجاة]]</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 100025</label><label>author_lat_full_name: Ibn abī al-dunyā abū bakr ʿabd allāh b. muḥammad b. ʿabīd b. sufyān b. qays al-baġdādī al-qurašī</label><label>author_lat_shuhra: Ibn abī al-dunyā</label><label>author_from_uri: Ibn Abi Dunya</label><label>tags:  :: ShamAY@كتب ابن أبي الدنيا</label><label>url: https://raw.githubusercontent.com/OpenITI/0300AH/master/data/0281IbnAbiDunya/0281IbnAbiDunya.Cuqubat/0281IbnAbiDunya.Cuqubat.ShamAY0038131-ara1</label><label>tok_length: 25040</label><label>status: sec</label><label>id: ShamAY0038131</label><label>ed_info: فاضل بن خلف الحمادة الرقي :: الأولى، 1433 ه - 2012 م :: دار أطلس الخضراء - الرياض</label><label>title_lat: al-ʿuqūbāt :: </label><label>title_ar: العقوبات :: </label><label>book: 0281IbnAbiDunya.Cuqubat</label><label>author_lat: Ibn Abi Dunya :: Ibn abī al-dunyā :: Ibn abī al-dunyā abū bakr ʿabd allāh b. muḥammad b. ʿabīd b. sufyān b. qays al-baġdādī al-qurašī</label><label>author_ar: إبن أبي الدنيا :: إبن أبي الدنيا أبو بكر عبد ألاه بن محمد بن عبيد بن سفيان بن قيس البغدادي القرشي</label><label>date: 0281</label><label>versionUri: 0281IbnAbiDunya.Cuqubat.ShamAY0038131-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "04";
    var volPages = {"04": ["103", "105", "105", "105", "105", "106", "106", "107", "107", "107", "107", "108", "108", "109", "109", "110", "110", "110", "110", "111", "111", "111", "111", "112", "112", "113", "113", "113", "113", "114", "114", "114", "114", "114", "115", "115", "116", "116", "116", "117", "117", "117", "118", "118", "119", "119", "119", "119", "119", "012", "120", "120", "120", "121", "121", "121", "121", "122", "122", "122", "124", "124", "124", "124", "124", "125", "125", "125", "125", "125", "126", "126", "126", "126", "126", "126", "127", "127", "127", "127", "127", "127", "128", "128", "128", "128", "128", "128", "129", "129", "129", "129", "129", "129", "129", "130", "130", "130", "130", "131", "131", "131", "131", "132", "132", "132", "133", "133", "134", "134", "134", "135", "135", "135", "135", "135", "136", "117", "136", "137", "137", "137", "137", "137", "138", "138", "138", "138", "139", "139", "140", "140", "140", "140", "141", "141", "141", "142", "142", "143", "143", "143", "144", "144", "144", "144", "145", "145", "145", "146", "147", "148", "148", "149", "150", "150", "151", "151", "151", "151", "152", "152", "152", "153", "153", "153", "153", "154", "154", "154", "154", "154", "155", "156", "157", "157", "157", "158", "158", "158", "159", "159", "159", "159", "160", "160", "160", "160", "161", "161", "161", "162", "163", "164", "164", "164", "164", "165", "165", "165", "166", "166", "166", "166", "168", "168", "168", "168", "169", "169", "169", "169", "169", "170", "170", "170", "171", "171", "171", "171", "172", "172", "172", "173", "174", "174", "175", "177", "177", "178", "178", "178", "179", "179", "180", "180", "180", "180", "180", "181", "181", "181", "181", "182", "182", "182", "183", "183", "184", "184", "185", "185", "185", "185", "186", "186", "186", "186", "187", "187", "187", "187", "188", "188", "188", "189", "189", "189", "189", "189", "190", "190", "190", "190", "190", "191", "191", "191", "191", "191", "192", "193", "193", "193", "193", "193", "194", "194", "194", "194", "195", "196", "196", "196", "196", "197", "197", "192", "197", "197", "198", "198", "198", "198", "199", "199", "199", "199", "199", "200", "200", "200", "201", "201", "201", "202", "202", "202", "203", "203", "203", "203", "203", "204", "205", "205", "205", "206", "206", "206", "206", "207", "207", "207", "207", "208", "208", "208", "208", "209", "209", "210", "210", "211", "211", "211", "211", "212", "212", "212", "212", "213", "213", "213", "214", "214", "214", "214", "215", "215", "215", "119", "146", "159"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
