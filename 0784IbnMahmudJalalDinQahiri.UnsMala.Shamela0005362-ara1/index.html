<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">بسم الله الرحمن الرحيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">باب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">التفسير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">وسبب نزول هذه الآية أن عدي بن حاتم، وزيد بن المهلل الطائين. آتيا النبي صلى الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">والثالث: الإرسال على صيد عاينه أو ظنه بالحس مأكولا كان أو لا فأصاب مأكول اللحم </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">فإن كان الموت مضافا إلى جرح حادا كان ولا معتبر بالإدماء في الجرح، واشترطه </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">ويشترط في الكلب السوق لوجوب الضمان، فإن أخذ بازي المرسل الأول الصيد وأمسكه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">فائدة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">فإن ابتلعت سمكة أخرى أكلتا، فإن وجدت طافية على الماء أو كان فيه أقل من نصفها لم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">باب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">باب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">باب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">وصية يحتاج إليها المتصيد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">نكتة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">نكتة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">فصل في كيفية العمل بآلة الصيد من رمي وزرق وطعن وضرب ورشق حذف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">باب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">باب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">نكتة في كيفية رمي الأسد ms025 على الفرس المؤدب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">ولنذكر نكتا من خواص الأسد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">باب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">خواص النمر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">باب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">خواصه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">باب في صيد الذئب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">خواصه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">باب في كيفية قتل الخنزير والتحيل في ذلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">خواصه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">باب كيفية صيد الفهد وذكر معادنه إذا وجد في المعدن، وتدبيره وتأنيسه وحمله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">باب ذكر معادن الفهود وأجناسها وألوانها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">باب تغيير عادة الفهد إذا اعتاد الهروب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">باب صيد الأرنب بالفهد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">باب في تعليم عناق الأرض</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">باب تعليم الكلب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">باب في ذكر القط</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">باب ذكر الدبق وأول من دبق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">ويبدأ بذكر الضواري من الطير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">باب ذكر العقبان وأجناسها ومعادنها وألوانها وأسمائها وأول من لعب بها والجيد منها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">باب في كيفية الصيد بالبازي وأدب الحمال والفرس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">باب نعت البزاة وأجناسها وذكر ألوانها وبلادها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">باب ذكر البواشق وإصلاحها ومداراتها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">خواص البزاة والبواشق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">باب ذكر الشواهين البحرية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">باب ذكر الشواهين الكواهي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">باب نعت السنقر وذكره وثمنه وبلاده</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">باب ذكر الصقر وموطنه وجنسه وجيده ورديئه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">باب ذكر الشقوق ونعته وجيده ورديئه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">باب في ذكر ذكور جميع الضواري مثل البازي والشاهين والصقر والسنقر واليؤيؤ والباشق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">باب نعت الغراب الذي يصطاد به وهو النوحي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">باب في ذكر البوم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">خواصه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">باب في إجابة الزمج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">باب في ذكر السبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">باب ذكر البطريق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">باب ذكر النص</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">باب نعت الشقوف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">باب فيه ذكر أول من تصيد بالبازي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">فقال: هذا ملك الطير، قال، وعرف بذلك جميع البزاة ومعادنها، فحينئذ فحصت الحكماء </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">باب ذكر أول من لعب بالشاهين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">باب ذكر أول من تصيد بالصقر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">باب في ذكر أول من لعب بالزمج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">وذكر بعض الحكماء من العجم أن أحد الملوك كان يسمى بأردشير نظر يوما إلى صورة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">باب ذكر أول من لعب بالعقاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">باب كيفية حمل ضواري الطير وأدبه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">ولقد سئل الشيخ عيسى الأسدي عن ترتيب الحمل لجميع الضواري، فقال له: إن كيف حمل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">باب ما يشد عليه البازي في السفر وما يشد عليه في الحضر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">باب كيفية إرسال الصقور على النعام والحيلة في صيدها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">باب ذكر النسر وخواصه وطباعه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">فإذا سقط على الجيفة وامتلأ منها لم يستطع الطيران، حتى يثب وثبات إلى أن يدخل تحت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">خواص النسر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">باب ذكر الرخمة وطباعها وخواصها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">خواصها، ريش الرخمة: إذا بخر به بيت طرد الهوام، وأما عظم رأسها، فإنه إن علق على</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">باب ذكر جناح الطير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">باب تضحيك الملوك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">باب الصيد بالشرك لسائر الوحش والطير عرضا على المسامع المصونة ما قاله الأستاذ </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">باب صيد الأرنب بالشرك والفخ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">باب صيد الغزال بالشبك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">باب قتل المؤذيات من سبع وغيره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">باب في كيفية الزجر حين الخروج إلى الصيد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">باب الزجر على الثلج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">باب الزجر على العقبان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">باب ما يزجر على الغراب الأبقع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">باب في الزجر على الكلاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">باب في الزجر على الثعالب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head88">باب في الزجر على الظباء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head89">باب في الأسماء التي يتفاءل بها الصياديون</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head90">ومن عادة الصياد إذا خرج إلى الصيد أن يتسمع من يصيح من ورائه بالاسم الذي يرضيه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head91">باب في طرد المؤذيات من الأماكن والكروم وبالله عز وجل المستعان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head92">باب طرد الغربان عن الزرع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head93">باب في ترحيل الجراد عن الزرع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head94">باب طرد الفأر عن الزرع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head95">باب في طرد فأر البيت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head96">باب ترحيل النمل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head97">باب في الاستعداد لدفع شر الحيات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head98">وذرا وبرأ وأمر صلى الله عليه وسلم في الصحيح، أن تستأذن حيات الدور بخلاف حيات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head99">باب ذكر الطاووس وطباعه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head100"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head101">خواصه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head102">باب ذكر طير الليل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head103">أما الخفاش، فإنه يلد ما بين الثلاثة إلى السبعة، وكثير ما يسفد وهو طائر في</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head104">باب ذكر البراغيث وطباعها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head105">باب في ذكر التمساح وخواصه وطباعه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head106">ويقال إنه ليس له مخرج، وإذا امتلأ بطنه خرج إلى البر، ويفتح فمه، فيأتي طائر فلا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head107">باب في ذكر السقنقور وطباعه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head108">باب ذكر السلحفاة واللجأة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head109">باب في ذكر القندس وطباعه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head110">باب في ذكر السرطان وطباعه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head111">باب صيد السمك بالشبكة والقالة والدواه والوهار والطين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head112">باب مستدرك في ما يتحيل به من يريد الصيد عند فقد آلة الصيد من سهم عذار، وبه يتم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head113">ومما يصلح للمتصيد أن يفعله عند خروجه إلى الصيد أن يستخبر الله تعالى قبل كل شيء</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 134652</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Mahmud Jalal Din Qahiri</label><label>tags: CENT0800 :: _MISC :: GAL@agriculture :: GAL@literature-islamic :: GAL@militaria :: GAL@period-postmongol :: GAL@hunting :: GAL@period-mamluk :: GAL@1258-1517CE :: GAL@period-decline :: GAL@egypt :: GAL@syria :: Shamela@علوم أخرى - مرقم آليا</label><label>url: https://raw.githubusercontent.com/OpenITI/0800AH/master/data/0784IbnMahmudJalalDinQahiri/0784IbnMahmudJalalDinQahiri.UnsMala/0784IbnMahmudJalalDinQahiri.UnsMala.Shamela0005362-ara1</label><label>tok_length: 32384</label><label>status: pri</label><label>id: Shamela0005362</label><label>ed_info: </label><label>title_lat: Uns Mala</label><label>title_ar: أنس الملا بوحش الفلا</label><label>book: 0784IbnMahmudJalalDinQahiri.UnsMala</label><label>author_lat: Ibn Mahmud Jalal Din Qahiri</label><label>author_ar: جلال الدين، محمد بن محمود بن منكلي بوغا القاهري (المتوفى: 784هـ)</label><label>date: 0784</label><label>versionUri: 0784IbnMahmudJalalDinQahiri.UnsMala.Shamela0005362-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
