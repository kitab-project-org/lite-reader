<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head0">CHECK 900 - "إحرام المرأة في وجهها"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head1">AUTO 899 - قول النبي -صلى الله عليه وسلم-: "أجر الطاعم الشاكر كأجر الصائم"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head2">AUTO 901 - قول النبي -صلى الله عليه وسلم-: "أخنع اسم عند الله يوم القيامة: رجل تسمى بملك الأملاك"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head3">AUTO 902 - قول النبي -صلى الله عليه وسلم-: "أد إلى من ائتمنك"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head4">CHECK 903 - "إذا بلغك شيء عن أخيك فاحمله على أحسنه حتى لا تجد له محملا"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head5">AUTO 904 - قول النبي -صلى الله عليه وسلم-: "إذا طبخت قدرا فأكثر ماءه وأهد لجيرانك"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head6">AUTO 905 - قول النبي -صلى الله عليه وسلم-: "إذا لم تستحي: فاصنع ما شئت"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head7">AUTO 906 - قول النبي -صلى الله عليه وسلم-: "أذنت لك أن ترفع الحجاب، وتستمع سوادي، حتى أنهاك"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head8">AUTO 907 - قول الحسن: (أرهقوا القبلة)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head9">AUTO 908 - قول النبي -صلى الله عليه وسلم-: "أقروا الطير على مكناتها"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head10">AUTO 909 - قول النبي -صلى الله عليه وسلم-: "أمرت بقرية تأكل القرى"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head11">AUTO 910 - قول النبي -صلى الله عليه وسلم-: "وإن أبا بكر وعمر منهم وأنعما"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head12">AUTO 911 - قول النبي -صلى الله عليه وسلم-: "إن إبراهيم اختتن بالقدوم"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head13">AUTO 912 - قول النبي -صلى الله عليه وسلم-: "إن الله عز وجل يكره عقوق الأمهات. . "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head14">AUTO 913 - (إن امرأتي لا تمنع يد لامس. .)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head15">AUTO 914 - قول شعبة: (إن هذا الحديث يصدكم عن ذكر الله، وعن الصلاة)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head16">AUTO 915 - قول جبير بن مطعم: (إن هذا من الحمس)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head17">AUTO 916 - قول علي: (إنهما كفرسي رهان)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head18">AUTO 917 - قول النبي -صلى الله عليه وسلم-: "إياكم والغلو، فإنما أهلك من كان قبلكم الغلو"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head19">AUTO 918 - قول حكيم بن حزام: (بايعت النبي -صلى الله عليه وسلم- على أن لا أخر إلا قائما)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head20">AUTO 919 - قول النبي -صلى الله عليه وسلم-: "البذاذة من الإيمان. . "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head21">AUTO 920 - قول النبي -صلى الله عليه وسلم-: "تراصوا فإني أراكم من خلفي. . "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head22">AUTO 921 - قول النبي -صلى الله عليه وسلم-: "تصدقوا ولو بفرسن شاة"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head23">AUTO 922 - (جاء سيل في الجاهلية فكسا ما بين الجبلين)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head24">AUTO 923 - قول النبي -صلى الله عليه وسلم-: "الحج عرفات"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head25">AUTO 924 - حديث النبي -صلى الله عليه وسلم- في الجوار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head26">AUTO 925 - قول النبي -صلى الله عليه وسلم-: "حذف السلام سنة"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head27">AUTO 926 - قول النبي -صلى الله عليه وسلم-: "الحلال بين، والحرام بين"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head28">AUTO 927 - قول عمر بن الخطاب: (خدوا بحظكم من العزلة)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head29">AUTO 928 - قول النبي -صلى الله عليه وسلم-: "زينوا القرآن بأصواتكم"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head30">AUTO 929 - قول عمر: (السائبة والصدقة ليومهما)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head31">AUTO 930 - قول النبي -صلى الله عليه وسلم-: "شر السير الحقحقة"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head32">AUTO 931 - قول النبي -صلى الله عليه وسلم-: "الصدقة لا تحل لغني. . "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head33">AUTO 932 - قول معاوية: (قصرت عن النبي -صلى الله عليه وسلم- على المروة بمشقص)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head34">CHECK 933 - (الكالئ بالكالئ)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head35">AUTO 934 - (كانوا لا يختلفون في الأهلة حتى قتل عثمان)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head36">AUTO 935 - قول سفيان: (كره السلم في اللحم)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head37">AUTO 936 - حديث ابن مسعود: (كفانا بالمعك ظلما)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head38">AUTO 937 - قول طاوس: (كفر لا ينقل عن الملة)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head39">AUTO 938 - قول النبي -صلى الله عليه ms09 وسلم-: "كفى بالمرء إثما أن يضيع من يقوت"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head40">AUTO 939 - قول النبي -صلى الله عليه وسلم-: "كل قرض جر منفعة حرام"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head41">AUTO 940 - قول النبي -صلى الله عليه وسلم-: "لا إغرار في صلاة ولا تسليم"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head42">AUTO 941 - قول النبي -صلى الله عليه وسلم-: "لا أكف شعرا ولا ثوبا"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head43">AUTO 942 - قول النبي -صلى الله عليه وسلم-: "لا تجتمع قبلتان"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head44">AUTO 943 - قول النبي -صلى الله عليه وسلم-: "لا تجوز العوراء، ولا العجفاء. . "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head45">CHECK 945 - قول النبي -صلى الله عليه وسلم-: "لا تغزي قريش بعدها؟ "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head46">AUTO 944 - قول النبي -صلى الله عليه وسلم-: "لا تزال طائفة من أمتي ظاهرين على الحق. . "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head47">AUTO 946 - قول مسروق: (لا تنشر بزك إلا عند من يبغيه)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head48">AUTO قول شريح: (لا حبس عن فرائض الله)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head49">AUTO 947 - قول النبي -صلى الله عليه وسلم-: "لا ضرر ولا ضرار"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head50">AUTO 948 - قول النبي -صلى الله عليه وسلم-: "لا فرع ولا عتيرة"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head51">AUTO 949 - قول النبي -صلى الله عليه وسلم-: "لا يبقى دينان بجزيرة العرب"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head52">AUTO 950 - قول النبي -صلى الله عليه وسلم-: "لا يكونن أحدكم إمعة"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head53">AUTO 951 - قول عائشة -رضي الله عنها-: (لقست نفسي)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head54">AUTO 952 - قول النبي -صلى الله عليه وسلم-: "لو كان القرآن في إهاب ما مسته النار"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head55">AUTO 953 - قول الحسن: (ليس في الطعام إسراف)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head56">AUTO 954 - قول النبي -صلى الله عليه وسلم-: "ما أذن الله لشيء كإذنه لنبي يتغنى بالقرآن يجهر به"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head57">AUTO 955 - قول النبي -صلى الله عليه وسلم-: "ما بين المشرق والمغرب قبلة"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head58">AUTO 956 - قول إبراهيم: (ما دخر عن قوم خبئ لكم. .)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head59">AUTO 957 - قول يهود: (محمد والخميس)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head60">AUTO 958 - قول النبي -صلى الله عليه وسلم-: "المرأة تموت بجمع"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head61">AUTO 959 - قول النبي -صلى الله عليه وسلم-: "من اتقى الشبهات استبرأ لدينه وعرضه"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head62">AUTO 960 - قول النبي -صلى الله عليه وسلم-: "من أطاع الله، فقد ذكر الله. . "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head63">AUTO 961 - حديث عمر: (من جلب إلينا طعاما، فأنا له جار. .)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head64">AUTO 962 - قول النبي -صلى الله عليه وسلم-: "من ستر على أخيه عورة، فكأنما أحيا موءودة"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head65">AUTO 963 - قول ms15 النبي -صلى الله عليه وسلم-: "من غسل واغتسل. . "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head66">AUTO 964 - قول النبي -صلى الله عليه وسلم-: "من غشنا فليس منا"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head67">AUTO 965 - قول النبي -صلى الله عليه وسلم-: "من قرأ: {قل هو الله أحد} فكأنما قرأ ثلت القرآن"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head68">AUTO 966 - قول النبي -صلى الله عليه وسلم-: "من لم يتغن بالقرآن"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head69">AUTO 967 - قول النبي -صلى الله عليه وسلم-: "من مات وليس له إمام. . "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head70">AUTO 968 - حديث النبي -صلى الله عليه وسلم- أنه نهى عن اختناث الأسقية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head71">AUTO 969 - حديث النبي -صلى الله عليه وسلم- أنه نهى عن بيع الثنيا حتى تعلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head72">AUTO 970 - حديث النبي -صلى الله عليه وسلم- أنه نهى عن بيع الغرر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head73">AUTO 971 - حديث النبي -صلى الله عليه وسلم- أنه نهى عن لبس الذهب إلا مقطعا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head74">AUTO 972 - قول عطاء: الوصية لا تضمن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head75">AUTO 973 - قول النبي -صلى الله عليه وسلم-: "يبقى حثالة من الناس"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head76">AUTO 974 - قول النبي -صلى الله عليه وسلم-: "يطهره ما بعده"</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="15.html#head77">AUTO 975 - قول النبي -صلى الله عليه وسلم-: "خير لك من حمر النعم"</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 30282</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibrahim Nahhas</label><label>tags:  :: Sham@شروح الحديث</label><label>url: https://raw.githubusercontent.com/OpenITI/1450AH/master/data/1450IbrahimNahhas/1450IbrahimNahhas.JamicIbnHanbalSharhAhadith/1450IbrahimNahhas.JamicIbnHanbalSharhAhadith.Sham19Y0020866-ara1</label><label>tok_length: 7671</label><label>status: pri</label><label>id: Sham19Y0020866</label><label>ed_info: الأولى، 1430 ه - 2009 م :: دار الفلاح للبحث العلمي وتحقيق التراث، الفيوم - جمهورية مصر العربية</label><label>title_lat: Jamic Ibn Hanbal Sharh Ahadith</label><label>title_ar: الجامع لعلوم الإمام أحمد - شرح الأحاديث والآثار</label><label>book: 1450IbrahimNahhas.JamicIbnHanbalSharhAhadith</label><label>author_lat: Ibrahim Nahhas</label><label>author_ar: إبراهيم النحاس :: أحمد بن حنبل</label><label>date: 1450</label><label>versionUri: 1450IbrahimNahhas.JamicIbnHanbalSharhAhadith.Sham19Y0020866-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "15";
    var volPages = {"15": ["365", "367", "368", "369", "370", "371", "372", "373", "374", "375", "376", "377", "378", "379", "380", "381", "382", "383", "384", "385", "386", "387", "388", "389", "390", "391", "392", "393", "394", "395", "396", "397", "398", "399", "400", "401", "402", "403", "404", "405", "406", "407", "408", "409", "410", "367", "368", "369", "370", "371", "372", "373", "374", "375", "376", "377", "378", "379", "380", "381", "382", "383", "384", "385", "386", "387", "388", "389", "390", "391", "392", "393", "394", "395", "396", "397", "398", "399", "400", "401", "402", "404", "405", "406", "407", "408", "409", "410"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
