<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">الجزء الأول </a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head1">فضل الكتابة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head2">ما روي في أول من كتب الكتاب بالعربي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head3">أصل كتاب بسم الله الرحمن الرحيم وابتداؤه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head4">كيف يفتتحون كلامهم ليبارك لهم فيما يحاولون ويؤجروا عليه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head5">حذف الألف من بسم الله وما ذكر من حذف السين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head6">رسوم الكتاب في كتابتهم بسم الله الرحمن الرحيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head7">" أما بعد " وما جاء فيها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head8">تصدير الكتب وما يقع فيها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head9">مقال الخط</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head10">ما قيل في حسن الخط من المنظوم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head11">ما قيل في قبح الخط</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head12">الوصاة بإصلاح الخط وآلته: </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head13">ما قيل في النقط والشكل والخط الدقيق</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head14">الحروف التي شبهت الشعراء بها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head15">ما جاء في وصف القلم من الكلام المنثور</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head16">ذكر ما قيل في القلم من الشعر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head17">ما قيل في القلم وبريه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head18">ومن وصف الكتاب</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">الجزء الثاني </a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head20">ما قيل في الدواة</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head21">إلاقة الدواة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head22">الكرسف وما قيل فيه</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head23">ما قيل في المداد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head24">الحبر واشتقاقه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head25">القرطاس وما يكتب فيه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head26">قط القلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head27">المقط</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head28">المرفع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head29">محراك الدواة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head30">الكتب في اللغة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head31">السكين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head32">الإنشاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head33">السطور</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head34">المقابلة بالكتاب ونسخه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head35">الخطأ في الكتاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head36">المشق في ms053 الكتاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head37">الزلف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head38">فض الكتاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head39">السحاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head40">تتريب الكتاب وتطيينه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head41">المحو في الكتاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head42">عرض الكتاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head43">اللحن في الكتاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head44">التوقيع والإيجاز</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head45">التعليم في الكتاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head46">الإملاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head47">طي الكتاب ودرجه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head48">درس الكتاب وسرده</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head49">الخاتم وسببه وما قيل فيه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head50">العنوان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head51">المقادير التي يكتب فيها من ms067 القراطيس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head52">الدعاء في المكاتبة وترتيبه والزيادة والنقص فيه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head53">تحرير الكتاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head54">من زيد في دعاء المكاتبة له فشكر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head55">ما يتكاتب به الناس اليوم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head56">قراءة الكتاب بعد كتبه وما جاء في ذلك.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head57">ما جاء في رد جواب الكتاب والحض على التكاتب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head58">من تعاطي الكتابة وادعاها وهو لا يحسنها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head59">دعاء المكاتبات وأصوله وما حمد منه وذم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head60">اللغة في دعاء المكاتبة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head61">التاريخ وما قيل في معناه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head62">الترجمة في المكاتبة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head63">الديوان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head64">تحويل الديوان من الفارسي إلى العربي</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">الجزء الثالث</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head66">وجوه الأموال التي تحمل إلى بي المال وأصنافها ولمن تجب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head67">اللغة في أسنان الإبل وتعريفها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head68">أسنان الغنم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head69">أسنان البقر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head70">أسنان الخيل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head71">أحكام الأرضين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head72">القطائع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head73">جزية رؤوس أهل الذمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head74">مبلغ ما كان يرتفع من الخوارج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head75">ذكر مصر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head76">ذكر السواد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head77">القبالات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head78">ما يفضل من المال</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head79">مكاتبة المسلم وغيره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head80">ما في الإنسان وغيره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head81">الأطعمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head82">مدح الإيجاز في ابتداء المكاتبة والجواب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head83">مكاتبة الإخوان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head84">ذكر الحساب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head85">نقصان الألف وإسقاطها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head86">نقصان الألف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head87">الهمز</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head88">الهاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head89">الواو</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head90">الياء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head91">ما يكتب بالياء والألف من الأفعال</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head92">المقصور والممدود</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head93">ما كتب على غير القياس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head94">كتاب النون الخفيفة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head95">الإدغام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head96">ما يقطع ويوصل</a>
</li>
</ul>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 166843</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Suli</label><label>tags: COMPLETED :: CENT0400 :: _ADAB :: _ADAB :: _BALAGHA :: _CARUD :: _KITABA :: GAL@historiography :: GAL@period-classical :: GAL@literature-islamic :: GAL@history :: GAL@history-imperial :: GAL@0750-1000CE :: GAL@literature-arabic :: GAL@history-world :: Shamela@الأدب والبلاغة</label><label>url: https://raw.githubusercontent.com/OpenITI/0350AH/master/data/0335Suli/0335Suli.AdabKuttab/0335Suli.AdabKuttab.Shamela0001601-ara1.completed</label><label>tok_length: 40189</label><label>status: pri</label><label>id: Shamela0001601</label><label>ed_info: 1341 :: المطبعة السلفية - بمصر، المكتبة العربية - ببغداد :: http://www.worldcat.org/oclc/1041871929</label><label>title_lat: Adab Kuttab</label><label>title_ar: أدب الكتاب</label><label>book: 0335Suli.AdabKuttab</label><label>author_lat: Suli</label><label>author_ar: أبو بكر محمد بن يحى الصولي (المتوفى: 335هـ)</label><label>date: 0335</label><label>versionUri: 0335Suli.AdabKuttab.Shamela0001601-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
