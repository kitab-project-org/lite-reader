<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">ستأتون غدا إن شاء الله عين تبوك، وإنكم لن تأتوها حتى يضحى النهار، فمن جاءها فلا يمسن من </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">«ما بين بيتي ومنبري روضة من رياض الجنة، ومنبري على حوضي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">: «لا يدخل أحد ممن بايع تحت الشجرة النار»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">خير ما ركبت إليه الرواحل مسجدي هذا والبيت العتيق»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">صلاة فيه أفضل من ألف صلاة في ما سواه إلا مسجد الكعبة» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">اقرءوها على موتاكم يعني يس» هذا أول حديث من الجزء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">لو أن أحدهم ينظر إلى قدميه لأبصرنا تحت قدميه، فقال: «يا أبا بكر ما ظنك باثنين الله </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">«من رآني بعد موتي وجبت له شفاعتي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">: «من زار قبري وجبت له شفاعتي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">نصلي مع رسول الله صلى الله عليه وسلم المغرب إذا توارت بالحجاب»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">أراك تتحرى الصلاة عند هذه الأسطوانة، قال: فإني رأيت النبي صلى الله عليه وسلم يتحرى الصلاة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">كان جدار المسجد عند المنبر ما كادت الشاة تجوزها» ، قلت: يعني الجدار القبلي، وكذلك كان أيضا </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">ما بين بيتي ومنبري روضة من رياض الجنة، ومنبري على حوضي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">نصلي مع رسول الله صلى الله عليه وسلم المغرب إذا توارت بالحجاب» قوله: إذا توارت يعني الشمس </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">إذا جاء أحدكم إلى الصلاة فلا يسعى ولكن يمشي وعليه السكينة والوقار وليصل ما أدرك وليقض ما </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">إذا توضأ العبد فمضمض واستنشق خرجت خطاياه من فيه وخرجت خطاياه من أنفه، فإذا غسل وجهه خرجت </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">إذا توضأ العبد المؤمن فمضمض خرجت الخطايا من فيه، فإذا استنثر خرجت الخطايا من أنفه، فإذا </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">الشمس تطلع من قرن الشيطان فإذا طلعت قارنها، وإذا ارتفعت فارقها» وذكر الحديث ثم قال: هؤلاء </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">الشمس تطلع بقرني الشيطان» فذكر الحديث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">أنا فرطكم على الحوض، وأنا مكاثر بكم الأمم يوم القيامة فلا ترجعن بعدي كفارا يضرب بعضكم </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">أراك تتحرى الصلاة عند هذه الأسطوانة، قال: «فإني رأيت النبي صلى الله عليه وسلم يتحرى الصلاة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">ما بين بيتي ومنبري روضة من رياض الجنة ومنبري على حوضي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">كان جدار المسجد عند المنبر ما كادت الشاة تجوزها»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">ما بين بيتي ومنبري روضة من رياض الجنة ومنبري على حوضي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">الراحمون يرحمهم الرحمن، ارحموا من في الأرض يرحمكم من في السماء»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">رأى في بيتها جارية في وجهها سفعة فقال: استرقوا لها فإن بها النظرة "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">رأى في بيتها جارية في وجهها سفعة فقال: استرقوا لها ms071 فإن بها النظرة "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">الملتزم موضع يستجاب فيه الدعاء، وما دعا عبد الله تعالى فيه دعوة إلا استجابها» أو نحو ذلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">ما من أيام أحب إليه العمل، أو أفضل، من أيام العشر، قيل: يا رسول الله ولا الجهاد في سبيل </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">إذا دخل العشر وأراد أحدكم أن يضحي فليمسك عن شعره وأظفاره "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">من كان له ذبح يذبحه فإذا أهل هلال ذي الحجة فلا يأخذن من شعره ولا من أظفاره شيئا حتى يضحي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">كل شيء بقدر حتى العجز والكيس أو الكيس والعجز» ، قال الحافظ أبو عبد الله بن خلفون: هكذا روى </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">نحرنا مع رسول الله صلى الله عليه وسلم عام الحديبية البدنة عن سبعة والبقرة عن سبعة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">شهدنا مع رسول الله صلى الله عليه وسلم فطرا أو أضحى، فلما صلى، قال ms082: قد أصبتم خيرا، فمن أحب </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">شهدنا مع رسول الله صلى الله عليه وسلم يومي عيدين فطر وأضحى، فلما فرغ من الصلاة أقبل علينا </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">من يقل علي ما لم أقل فليتبوأ مقعده من النار»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">بايعت النبي صلى الله عليه وسلم على إقام الصلاة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">لكل شيء زكاة وزكاة الدار بيت الضيافة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">كل أمر ذي بال لا يبدأ فيه بحمد الله فهو أقطع»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">بخ بخ بخمس ما أثقلهن في الميزان» ! قال، قلت: وما هي يا رسول الله؟ قال: «سبحان ms130 الله والحمد </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">بزق رسول الله صلى الله عليه وسلم في ثوبه وحك بعضه ببعض» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">طبقات أمتي خمس طبقات، كل طبقة منها أربعون سنة، فطبقتي وطبقة أصحابي أهل العلم والإيمان، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">دخل النبي صلى الله عليه وسلم يوم فتح مكة، وعليه عمامة سوداء»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">من أدرك ليلة عرفة التي بعد يوم عرفة قبل أن يطلع الفجر فقد أدرك الحج»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">{اليوم أكملت لكم دينكم وأتممت عليكم نعمتي ورضيت لكم الإسلام دينا} [المائدة: 3] قال عمر: </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">مر على رسول الله صلى الله عليه وسلم بجنازة، فقال: كم ترك؟ قالوا: ترك دينارين: قال: كيتين، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">الرقى والتمائم والتولة شرك» ، فقلنا: هذه الرقى والتمائم عرفناها، فما التولة؟ قال: شيء تجعله </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">من أصدق امرأة صداقا، وهو مجمع أن لا يوفيها إياه ثم مات ولم يوفها إياه لقي الله عز وجل وهو </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">من كنت مولاه علي مولاه اللهم وال من والاه وعاد من عاداه»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">اجتنبوا الخمر فإنها مفتاح كل شر، ولا يموتن أحدكم وعليه دين، فإنه ليس هناك دينار ولا درهم، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">عرضت ms158 على رسول الله صلى الله عليه وسلم يوم بدر، وأنا ابن ثلاث عشرة، فردني وعرضت عليه يوم </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">قدم رجلان معي من قومي، قال: فأتينا إلى النبي صلى الله عليه وسلم فخطبا وتكلما فجعلا يعرضان </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">أخذ سيفا وأصحابه حوله، فقال: من يأخذ هذا السيف؟ فبسطوا أيديهم، يقول هذا أنا وهذا أنا، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">أحب الأيام إلى الله يوم الجمعة، وأحب البقاع إلى الله المساجد، وأبغض البقاع إلى الله </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">لو يعلم الناس من الوحدة ما أعلم ما أسرى راكب بليل وحده أبدا»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">الراحمون يرحمهم الرحمن، ارحموا أهل الأرض يرحمكم من في السماء»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">التمسوا الرزق في خبايا الأرض»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">الولاء لمن أعتق»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">نهى عن بيع الولاء وعن هبته»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">الراحمون يرحمهم الرحمن، ارحموا من في الأرض يرحمكم من في السماء»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">الراحمون يرحمهم الرحمن، ارحموا من في الأرض يرحمكم من في السماء»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">من أضاف مؤمنا فكأنما أضاف آدم، ومن أضاف اثنين فكأنما أضاف آدم وحواء، ومن أضاف ثلاثة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">في المحرم يدخل البستان؟ قال: نعم ويشم الريحان "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">كل ميت يختم على عمله إلا المرابط في سبيل الله تعالى فإنه ينمو له عمله إلى يوم القيامة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">الفطرة خمس: الاختتان، والاستحداد، وقص الشارب، وتقليم الأظفار، ونتف الإبط "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">لو أنكم توكلتم على الله حق توكله لرزقكم كما ترزق ms180 الطير تغدو خماصا وتروح بطانا» روينا عن </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">نهى عن ثمن الكلب ومهر البغي وحلوان الكاهن»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">لا تبيعوا الذهب بالذهب إلا مثلا بمثل، ولا تشفوا بعضها على بعض ولا تبيعوا منها غائبا بناجز»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">من شهد أن لا إله إلا الله مخلصا من قلبه، وأني محمد رسول الله دخل الجنة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">لا يخافن أحدكم إلا ذنبه، ولا يرجون إلا ربه، ولا يستحي من لا يعلم أن يتعلم، ولا يستحي من </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">سترون ربكم لا تضامون في رؤيته كما تنظرون إلى القمر ليلة البدر، فمن استطاع منكم أن لا يغلب </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">لا إله إلا الله ثلاث مرات، ويل للعرب من شر قد اقترب، فتح من ردم يأجوج ومأجوج مثل هذه وحلق </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">ينزل ربنا تبارك وتعالى، كل ليلة إلى السماء الدنيا، حين يبقي ثلث الليل فيقول: من يدعوني </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">من قال حين يصبح: اللهم ما أصبح بي من نعمة أو بأحد من خلقك فمنك وحدك، لا شريك لك، فلك </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">«اللهم إني أسألك علما نافعا، وأعوذ بك من علم لا ينفع» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">إذا حزبه أمر، قال: اللهم خر لي واختر لي "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">يكثر هذا الدعاء: «اللهم اجعل واسع رزقك علي عند كبر سني»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">3 - </a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 266972</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Rushayd Sabti</label><label>tags: CENT0800 :: _AJZA :: _HADITH :: GAL@literature-islamic :: GAL@africa-north :: GAL@period-postmongol :: GAL@period-mamluk :: GAL@1258-1517CE :: GAL@period-decline :: GAL@hadith :: Shamela@الأجزاء الحديثية</label><label>url: https://raw.githubusercontent.com/OpenITI/0725AH/master/data/0721IbnRushaydSabti/0721IbnRushaydSabti.MalCayba/0721IbnRushaydSabti.MalCayba.Shamela0012532-ara1</label><label>tok_length: 64354</label><label>status: pri</label><label>id: Shamela0012532</label><label>ed_info: محمد الحبيب ابن الخوجة :: دار الغرب الإسلامي، بيروت - لبنان</label><label>title_lat: Mal Cayba</label><label>title_ar: ملء العيبة بما جمع بطول الغيبة في الوجهة الوجيهة إلى الحرمين مكة وطيبة</label><label>book: 0721IbnRushaydSabti.MalCayba</label><label>author_lat: Ibn Rushayd Sabti</label><label>author_ar: محمد بن عمر بن محمد، أبو عبد الله، محب الدين ابن رشيد الفهري السبتي (المتوفى: 721هـ)</label><label>date: 0721</label><label>versionUri: 0721IbnRushaydSabti.MalCayba.Shamela0012532-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "065", "066", "067", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "267", "268", "269", "270", "271", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297", "299", "300", "301", "302", "303", "305", "306", "307", "308", "309", "310", "311", "312", "313", "314", "315", "316", "317", "318", "319", "320", "321", "322", "323", "324", "325", "326", "327", "328", "329", "330", "331", "332", "333", "335", "336", "337", "338", "339", "340", "341", "342", "343", "344", "345", "346", "347", "348", "349", "350", "351", "353", "355", "356", "357", "358", "359", "360", "361", "363", "364", "365", "366", "367", "368", "369", "370", "371", "373", "374", "375", "376", "377", "378", "379", "381", "382", "383", "384", "385", "386", "387", "389", "390", "391", "392", "393", "395", "396", "397", "398", "399", "400", "401", "402", "403", "404", "405"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
