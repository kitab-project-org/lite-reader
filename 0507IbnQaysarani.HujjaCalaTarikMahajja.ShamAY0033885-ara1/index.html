<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head0">CHECK [الغلاف]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head1">AUTO بسم الله الرحمن الرحيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head2">AUTO 1 - أقول مقالا يرتضيه ذوو البصر ... وأنصره بالآي حسب وبالأثر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head3">AUTO 3 - تحققت أن الله لا رب غيره ... بصنعته الأفلاك سبعا وبالفكر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head4">AUTO 4 - سميع بصير قادر متكلم ... مريد بما يأتي عليم بما يذر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head5">AUTO 8 - وأثبت إرسال النبي لما أتى ... به من دليل صادق معجز بهر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head6">AUTO 9 - وأعلم أن الله من فوق عرشه ... بلا كيف بل قولا كما جاء في السور</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head7">AUTO 10 - وأشهد أن الله أسرى بعبده ... محمد المبعوث منه إلى البشر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head8">AUTO 11 - وأثبت أن الله جل جلاله ... تكلم بالقرآن لا قول من كفر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head9">AUTO 12 - كلام بصوت لا كأصوات خلقه ... رواه أبو يحيى وحسبك مفتخر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head10">AUTO 13 - وحرف كما قد جاء في الخبر الذي ... رواه ابن مسعود فأنصف واعتبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head11">AUTO 14 - ومتلو [و] مسموع بلفظ بكل ذا ... ندين ومكتوب خلاف الذي نفر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head12">AUTO 15 - قديم بلا شك وليس بمحدث ... رووه لنا عن أصدق الخلق والبشر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head13">AUTO 17 - وأشهد أن الخير والشر كله ... يجيء من الله العظيم على قدر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head14">AUTO 18 - وأعلم أن الجسر بين جهنم ... وجنة عدن كالطريق لمن عبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head15">AUTO 19 - ولا أنكر الميزان والحوض عامدا ... ولا أنكر التسآل في</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head16">AUTO 20 - وأشهد أن الله من بعد حشرنا ... نراه بلا شك كما ننظر القمر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head17">AUTO 21 - وأثبت حقا للرسول شفاعة ... وللمؤمنين المخلصين ذوي الخطر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head18">AUTO 22 - ويخرج أقوام من النار بعدما ... أصابهم سفع من النار والشرر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head19">AUTO 23 - وأثبت أخبار الصفات ولا أرى ... تأولها وهو الصحيح لمن سبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head20">AUTO 24 - وأشهد أن الله ليس كخلقه ... ومن قال بالتشبيه يوما فقد خسر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head21">AUTO 25 - وأثبت أخبار النزول لما روى ... جماعة من صحب الرسول ذوو البصر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head22">AUTO 31 - نزول إله العرش في كل ليلة ... وليلة شعبان يقول إلى السحر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head23">AUTO 33 - وينزل يوم الفطر جل ثناؤه ... إلى رقعة الدنيا يباهي بمن حضر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head24">AUTO 34 - وأعلم حقا أن جنة ربنا ... ونار لظى مخلوقتان لمن أمر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head25">AUTO 35 - وأعرف إيمانا يزيد بطاعة ... وينقص بالعصيان لا قول من فجر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head26">AUTO 36 - وأثبته بالقول والعمل الذي ... هما سببان للنجاة من الغرر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head27">AUTO 37 - وإجماع أصحاب الرسول وثيقة ... لأنهم أهل التلاوة والبصر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head28">AUTO 38 - فمن جاء من بعد الرسول وصحبه ... بما لم يكن في عصرهم كان كالدهر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head29">AUTO 39 - وأحتج بالمنصوص في شرع أحمد ... ومن قال فيه بالقياس فقد خسر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head30">AUTO 40 - ولست أرى رأي الرجال وثيقة ... لأن رسول الله عن ذاك قد زجر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head31">AUTO 41 - ولا أرتضي في الدين قول مجادل ... بما زخرفوه من فصول لها كدر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head32">AUTO 42 - ولكن بالآيات والسنن التي ... أتت عن رسول الله في ذاك كالغرر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head33">AUTO 45 - لأنهم قد أبدعوا وتنطعوا ... وكانوا بلا ريب على منهج خطر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head34">AUTO 46 - ولست أرى شق العصا لا ولا أرى ... خروجا على السلطان [و]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head35">AUTO 47 - وأبرأ من رأي الخوارج إنهم ... أراقوا دماء المسلمين كما اشتهر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head36">AUTO 48 - ولست براض أن يكفر مسلم ... بذنب جناه على الله قد غفر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head37">AUTO 49 - وقال رسول الله يوما محذرا ... من الخبر المشهور عنه الذي انتشر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head38">AUTO 53 - فمعبد من قبل الذي خالف الورى ... بسحر سيجزى في المعاد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head39">AUTO 54 - وأما ابن كلاب فجاء ببدعة ... وجعد وجهم والمريسي ذوو الدبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head40">AUTO 55 - وجاء ابن كرام بمين وفرية ... على الله والمبعوث منه وما شعر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head41">AUTO 56 - فهم أحدثوا هذا الكلام بعقلهم ... وكلهم عن منهج الحق قد عبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head42">AUTO 59 - ألم تر أن الله سلط بعضهم ... يكفر بعضا بالدليل وبالنظر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head43">AUTO 60 - وجنب أهل الحق سوء كلامهم ... وأيدهم بالنصر منه وبالظفر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head44">AUTO 61 - فلم تر بدعيا يزن ببدعة ... على الأرض إلا أخرجوه من القفر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head45">AUTO 62 - فقل لذوي التحصيل هل يبلغ الذي ... ذكرتهم مقدار قوم على خطر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head46">AUTO 64 - ومن فخرت أرض الشآم بكونه ... ببيروت في جمع عدادهم المطر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head47">AUTO 65 - ومثل ابن طهمان الإمام وبعده ... يزيد بن هارون الذي خصمه زبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head48">AUTO 66 - ومثل وكيع وابن مهدي وبعده ... سليل دكين كلهم سادة زهر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head49">AUTO 67 - ومن أشرق الإسلام من نور علمه ... إمام قريش الشافعي الذي قهر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head50">AUTO 68 - ومن عصبة ابن المبارك فيهم ... بمرو ونيسابور والري ذي العبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head51">AUTO 69 - ويحيى وإسحاق وأحمد الذي ... به نظم التقوى كما ينظم الدرر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head52">AUTO 70 - إمام لأهل النقل [و] المقتدى به ... [و] في السنة [الغرا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head53">AUTO 71 - ومن حل في مصر ودان بسنة ... وحج إلى البيت المحرم واعتمر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head54">AUTO 72 - ومن بالعراق المستنير كشعبة ... وكابن بشير وابن طرخان معتمر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head55">AUTO 73 - ومثل ابن سلام ومن سار سيره ... كليث لدى الغابات عن عرسه هدر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head56">AUTO 74 - ومثل ابن وهب وابن يحيى وبعده ... إمام بخارى الذي فضله غمر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head57">AUTO 75 - ومثل ابن إدريس ومن دان دينه ... أبو زرعة الرازي في حفظه ندر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head58">AUTO 76 - ومثل أبي داود وابن خزيمة ... ويحيى بن يحيى والحميدي قد [وزر]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head59">AUTO 77 - فمن فارق الإجماع ثم اقتدى بمن ... تقدم ذكرانا ms54 لهم كان قد خسر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head60">AUTO 79 - وأثبت من بعد الرسول خليفة ... إماما به الإسلام من بعده افتخر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head61">AUTO 81 - وعثمان ذو النورين تال وبعده ... علي أبو السبطين أفضل من غبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head62">AUTO 82 - فهم خلفاء الله بعد نبيه ... سفينة يرويه من الصادق الخبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head63">AUTO 83 - وأثبت أن الفضل بعد الذي مضت ... رواياتنا فيهم لفي ستة أخر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head64">AUTO 85 - وأثبت من بعد الخلافة بيعة ... لخال جميع المؤمنين الذي خبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head65">AUTO 88 - وقولي في صحب الرسول بأسرهم ... جميل خلاف المارقين ذوي الأشر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head66">AUTO 89 - روافض أعداء الشريعة وصفهم ... عن الصادق المبعوث في الناس من مضر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head67">AUTO 92 - فهذا اعتقاد المقدسي محمد ... رواه عن الأثبات من ناقلي السير</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 73707</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Qaysarani</label><label>tags:  :: ShamAY@العقيدة</label><label>url: https://raw.githubusercontent.com/OpenITI/0525AH/master/data/0507IbnQaysarani/0507IbnQaysarani.HujjaCalaTarikMahajja/0507IbnQaysarani.HujjaCalaTarikMahajja.ShamAY0033885-ara1</label><label>tok_length: 18088</label><label>status: pri</label><label>id: ShamAY0033885</label><label>ed_info: د. عبد العزيز بن محمد بن عبد الله السدحان :: الأولى 1429 ه - 2008 م :: دار عالم الكتب [طبع ضمن كتاب الحافظ محمد بن طاهر المقدسي ومنهجه في العقيدة]</label><label>title_lat: Hujja Cala Tarik Mahajja</label><label>title_ar: الحجة على تارك المحجة - ت السدحان :: الحجة على تارك المحجة (وهو شرح عقيدة الإمام الحافظ محمد بن طاهر المقدسي) :: الحجة على تارك المحجة (وهو شرح عقيدة الإمام الحافظ محمد بن طاهر المقدسي) ¶ المؤلف: الحافظ محمد بن طاهر المقدسي بن القسيراني (507 ه) ¶ المحقق: د. عبد العزيز بن محمد بن عبد الله السدحان ¶ الناشر: دار عالم الكتب [طبع ضمن كتاب الحافظ محمد بن طاهر المقدسي ومنهجه في العقيدة] ¶ الطبعة: الأولى 1429 ه - 2008 م ¶ عدد الأجزاء: 2 ¶ ملاحظات: [موافق للمطبوع - مقابل على المطبوع- إمكانية الإنتقال للصفحة] ¶ مصدر الكتاب: [مكتبة يا باغي الخير أقبل - ملتقى أهل الحديث] ¶ ملاحظة: [هذا الكتاب من كتب المستودع بموقع المكتبة الشاملة]</label><label>book: 0507IbnQaysarani.HujjaCalaTarikMahajja</label><label>author_lat: Ibn Qaysarani</label><label>author_ar: الحافظ محمد بن طاهر المقدسي بن القسيراني (507 ه) :: ابن القيسراني :: أبو الفضل محمد بن طاهر بن علي بن أحمد المقدسي الشيباني، المعروف بابن القيسراني</label><label>date: 0507</label><label>versionUri: 0507IbnQaysarani.HujjaCalaTarikMahajja.ShamAY0033885-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "02";
    var volPages = {"02": ["367", "368", "370", "374", "378", "381", "387", "391", "394", "395", "402", "407", "412", "417", "419", "422", "429", "433", "436", "441", "447", "455", "458", "461", "466", "473", "484", "487", "494", "496", "500", "507", "509", "514", "519", "523", "528", "531", "537", "540", "547", "550", "554", "557", "561", "567", "571", "574", "579", "581", "585", "590", "591", "592", "596", "599", "604", "605", "612", "616", "622", "624", "625", "627", "628", "630", "631", "633", "636", "640", "644", "648", "650", "658", "662", "666", "667", "673", "675", "679", "681", "686", "690", "692", "693", "695", "699", "701", "704", "709", "711", "718"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
