<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">تسمية ابواب هذا الكتاب وهي ستة عشر بابا </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">الباب الاول في ذكر المياه</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head2">فصل: فاما ماء المطر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head3">فصل: واما مياه الانهار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head4">فصل: واما مياه العيون والآبار العذبة الحلوة</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">الباب الثاني في ذكر الارضين</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head6">فصل: فى الارض اللينة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head7">فصل: واما الارض الغليظة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head8">فصل: واما الارض الجبلية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head9">فصل: واما الارض الرملة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head10">فصل: واما الارض المدمنة السوداء المحترقة الوجه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head11">فصل: واما الارض البيضاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head12">فصل: واما الارض الصفراء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head13">فصل: واما الارض الحمراء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head14">فصل: واما ms008 الارض الحرشا المضرسة المحببة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head15">فصل: واما الارض المكدنة المايلة [المائلة] الى الحمرة</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">الباب الثالث في ذكر السرقين</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head17">فصل: فاما زبل الخيل والبغال والحمير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head18">فصل: واما الزبل الآدمى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head19">فصل: واما الزبل المضاف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head20">فصل: واما زبل الضأن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head21">فصل: واما زبل الحمام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head22">فصل:# واما زبل الحمامات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head23">فصل: واما الزبل المولد </a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head24">الضرب الاول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head25">الضرب الثاني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head26">والضرب الثالث</a>
</li>
</ul>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">الباب الرابع في اختيار الارض واصلاحها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">الباب الخامس فى غراسة الثمار</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head29">فصل غراسة النخيل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head30">فصل غراسة الزيتون</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head31">فصل فى غرس الرمان،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head32">فصل فى غرس السفرجل،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head33">فصل فى غرس التفاح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head34">فصل فى غرس شجر التين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head35">فصل فى غرس الاجاص وهو غرس النوامى ووجه العمل فيه ان تأخذ النوامى فى الحفر ثم يرد التراب عليها ولا تملا الحفر منه ولا يرزم التراب حول النوامى، لانه اذا كانت الحفر غير ممتلية بالتراب غير مدكن استقر الماء فيها وبقيت الرطوبة حولها حتى يردها سقي آخر ويجعل بين حفرة وحفرة خمسة عشر ذراعا لا اقل من ذلك، ويكون غرس هذا النامى فى شهر اكتوبر وينبغى ان يتعاهد بالسقى ولا يغفل عنها ويوافق الاجاص من الارض اللينة ويجود فيها لا سيما اذا كانت رخوة، ويكون طعمه لذيذا وكذلك يفعل فى الارض الخشنة اذا صاحبها الماء الكثير ويتناهى فى الجودة، ويعظم ثمره واذا غرس الاجاص فى الارض الحرشا المحمومة الجبلية لم يجد فيها واتى رديا محموما فالوجه فيه ما ذكرنا ان شاء الله.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head36">فصل فى غرس حب الملوك،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head37">فصل فى غرس نوى البرقوق،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head38">فصل فى غرس عيون البقر،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head39">فصل فى غرس الخوخ،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head40">فصل فى غرس اللوز</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head41">فصل فى غرس الجوز،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head42">فصل فى غرس الجلوز من نواميه،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head43">فصل فى غرس الكرم الصحراوى،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head44">فصل فى غرس الاترج –</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head45">فصل فى غرس النارنج واتخاذه من زريعته،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head46">فصل فى غرس نوى الفستق،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head47">فصل فى غرس الصنوبر واتخاذه من حبه،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head48">فصل فى غرس السبستان،</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">الباب السادس وهو باب جامع لكيفية ضروب الغراسات والعمل فى التكابيس</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head50">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head51">فصل:</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">الباب السابع فى تشمير الثمار واصلاحها بعد هرمها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">الباب الثامن فى تركيب الثمار بعضها فى بعض ومعرفة ما يتركب منها وما لا يتركب والاخبار عن الاقاليم السبعة واهويتها وطبائعها</a>
<ul class="collapsibleList">
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head54">الاقليم الاول:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head55">الاقليم الثانى:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head56">الاقليم الثالث:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head57">الاقليم الرابع: </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head58">الاقليم الخامس:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head59">الاقليم السادس:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head60">الاقليم السابع: </a>
</li>
</ul>
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head61">فصل:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head62">فصل:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head63">فصل:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head64">فصل:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head65">فصل:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head66">فصل:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head67">فصل:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head68"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head69">فصل: واما تركيب شجر التين بالانبوب </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head70">فصل: واما تركيب الدوالى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head71">فصل: واما ms054 تركيب الرند فى الزيتون والزيتون فى الرند</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head72">فصل: واما تركيب الانشاب</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">الباب التاسع وهو باب جامع فى بعض التركيب و اسراره وغرائب من اعماله</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head74">فصل:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head75">فصل:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head76">فصل:</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">الباب العاشر فى زراعة الحبوب من القطانى وما اشبهها مما يستعمل فى البساتين منها للحاجة اليها والتجمل بها</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head78">زراعة الحمص</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head79">زراعة الفول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head80">فصل: والارز</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head81">زراعة اللوبيا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head82">زراعة العدس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head83">زراعة الجلبان الشلنق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head84">زراعة الفنج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head85">زراعة السمسم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head86">زراعة القطن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head87">زراعة العصفر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head88">زراعة الزعفران</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head89">زراعة الخشخاش</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head90">زراعة الحنا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head91">زراعة شوك الدراجين</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head92">الباب الحادى عشر فى زراعة البذور المتخذة لاصلاح الاطعمة</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head93">زراعة الكمون</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head94">زراعة الكرويا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head95">غراسة الشونيز</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head96">زراعة الانيسون</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head97">زراعة الكزبر</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head98">الباب الثانى عشر فى زراعة القثا والبطيخ والقرع وما اشبه ذلك وقارب شكله</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head99">زراعة القثا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head100">زراعة البطيخ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head101">زراعة اللفاح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head102">زراعة البطيخ السندى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head103">زراعة القرع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head104">زراعة الباذنجان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head105">زراعة الاسفرج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head106">زراعة الكبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head107">زراعة الحنظل</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head108">الباب الثالث عشر فى زراعة البقول ذوات الاصول</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head109">زرعة [زراعة] اللفت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head110">زراعة الجزر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head111">زراعة الفجل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head112">زراعة الثوم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head113">زراعة البصل البكير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head114">زراعة الكراث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head115">زراعة الأشقاقور</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head116">زراعة فلفل السودان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head117">زراعة الفوة</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head118">الباب الرابع عشر فى زراعة البقول ووجوه العمل فيها فى جميع الفصول</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head119">زراعة الاكرنب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head120">زراعة القنبيط</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head121">زراعة بقل الروم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head122">زراعة الاسبناخ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head123">زراعة الرجلة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head124">زراعة اليربوز</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head125">زراعة السلق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head126">زراعة اللبلاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head127">زراعة الشطرية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head128">زراعة الخس البكير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head129">زراعة السريس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head130">زراعة الماميثا</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head131">الباب الخامس عشر فى زراعة الرياحين ذوات الزهور وما شاكلها من الاحباق وسائر الشجر</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head132">زراعة الورد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head133">زراعة الخيرى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head134">زراعة البنفسج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head135">غراسة السوسن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head136">غرس البهار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head137">غرس النرجس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head138">غرس الحبق القرنفلى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head139">زراعة المرزنجوش</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head140">زرارعة الترنجان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head141">زراعة الفجين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head142">زراعة الخطمى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head143">زراعة البابونج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head144">زراعة الاسفتنين</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head145">الباب السادس عشر وهو باب جامع لمعان غريبة ومنافع ms109 جسيمة من معرفة المياه والآبار واختزان الثمار وغير ذلك مما لا يستغنى عن معرفتها اهل الفلاحة اذ هى من تمام اعمالها واستكمال فايدتها</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head146">صنعة شمامات حسان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head147">صنعة مصنب</a>
</li>
</ul>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 146539</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Bassal</label><label>tags: COMPLETED ::  :: Filaha@فلاحة</label><label>url: https://raw.githubusercontent.com/OpenITI/0475AH/master/data/0468IbnBassal/0468IbnBassal.QasdWaBayan/0468IbnBassal.QasdWaBayan.Filaha001-ara1.completed</label><label>tok_length: 35178</label><label>status: pri</label><label>id: Filaha001</label><label>ed_info: Digital transcription at http://www.filaha.org/index_arabic.html</label><label>title_lat: Qasd Wa Bayan</label><label>title_ar: كتاب القصد والبيان</label><label>book: 0468IbnBassal.QasdWaBayan</label><label>author_lat: Ibn Bassal</label><label>author_ar: </label><label>date: 0468</label><label>versionUri: 0468IbnBassal.QasdWaBayan.Filaha001-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "120", "121", "122", "123", "124", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
