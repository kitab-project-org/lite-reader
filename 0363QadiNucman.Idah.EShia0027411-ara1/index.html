<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">بسم الله الرحمن الرحيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">(هذا ما وجد من كتاب الإيضاح لسيدنا القاضي النعمان بن محمد بن حيون) [1]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">باب من ذكر فضل الصلاة والإقبال عليها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">ذكر إيجاب فرض الصلاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">ذكر الصلوات الخمس وعدد ركعاتهن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">جماع أبواب الرغائب في الصلاة / 10 /</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head6">باب من ذكر فضل الصلاة والحض على الصلاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head7">باب من ذكر ما يرجى من ثواب الصلاة</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head8">[ذكر مواقيت الصلاة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head9">ذكر معرفة الشفق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head10">ذكر وقت صلاة الليل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head11">ذكر صلاة الوتر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head12">ذكر وقت ركعتي الفجر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head13">ذكر وقت صلاة الفجر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head14">ذكر معرفة انشقاق الفجر وطلوع القرص</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head15">ذكر الصلاة قبل طلوع الشمس وقبل غروبها ووقت طلوعها وزوالها وغروبها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head16">[ذكر كراهية الصلاة] قبل أن تزول الشمس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head17">ذكر صلاة النافلة في وقت صلاة الفريضة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head18">ذكر الإبراد لصلاة الظهر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head19">ذكر وقت صلاة الجمعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head20">ذكر الجمع بين الصلاتين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head21">ذكر من نسي صلاة فذكر بعد زوال وقتها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head22">ذكر من فاتته صلاة فلم يذكرها حتى قام في صلاة اخرى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head23">ذكر من فاتته صلاة فلم يذكرها حتى صلى الصلاة التي بعدها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head24">ذكر قضاء النوافل ومتى يقضيها من فاتته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head25">ذكر من صلى صلاة قبل وقتها</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head26">جماع أبواب الأذان والإقامة</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head27">ذكر بدء الأذان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head28">ذكر الأذان بحي على خير العمل [1]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head29">ذكر فضل الأذان وثوابه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head30">ذكر كيفية الأذان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head31">ذكر ما على المؤذن أن يفعله إذا قام في الأذان والإقامة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head32">ذكر من نسي الأذان والإقامة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head33">ذكر من شك في الأذان أو في الإقامة أو أخطأ فيهما</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head34">ذكر الأذان قبل الوقت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head35">ذكر التثويب [2]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head36">ذكر الكلام في الأذان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head37">ذكر الأذان والإقامة على غير طهارة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head38">ذكر من أذن جالسا أو راكبا أو ماشيا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head39">ذكر المؤذن يؤذن ويقيم غيره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head40">ذكر أذان النساء وإقامتهن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head41">ذكر أذان الصبي والعبد والمملوك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head42">ذكر أخذ المؤذن الأجر على أذانه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head43">ذكر المؤذن يقيم ولم يجئ الإمام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head44">ذكر النهي عن الخروج من المسجد بعد الأذان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head45">ذكر من يستحق الأذان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head46">ذكر أذان الأعمى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head47">ذكر ترك الأذان للنافلة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head48">ذكر قدر المأذنة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head49">ذكر الأذان في وقت المولود حين يولد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head50">ذكر الأذان عند الفزع</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head51">جماع أبواب المساجد</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head52">ذكر وجوب الصلاة في المساجد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head53">ذكر فضل المساجد وتضعيف الصلاة فيها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head54">ذكر فضل الجلوس في المسجد وما يدفع عن أهل المساجد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head55">باب ذكر ما نهي عن فعله في المسجد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head56">ذكر ما يمنع من دخول المساجد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head57">ذكر منع الجنب [عن] الجلوس في المسجد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head58">ذكر الرخصة لآكل الثوم في التخلف عن المسجد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head59">ذكر ما يقوله ويفعله من دخل المسجد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head60">ذكر بناء المسجد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head61">ذكر سد النبي صلى الله عليه وآله الأبواب التي كانت تشرع إلى مسجده</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head62">ذكر استقبال القبلة وبدو التوجه ms082 إلى الكعبة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head63">ذكر استحباب الصلاة إلى سترة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head64">ذكر ما يكره التستر به</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head65">ذكر الدنو من السترة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head66">ذكر التصاوير يصلي المصلي إلى ناحيتها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head67">ذكر المسجد يكون في الدار</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head68">جماع أبواب الإمامة</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head69">ذكر اختيار الأئمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head70">ذكر من يكره أن يؤتم به</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head71">ذكر الصلاة خلف المخالف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head72">ذكر إمامة المتيمم المتوضين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head73">ذكر من هو أحق بالإمامة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head74">ذكر إمامة الرجل الواحد [3] الرجلين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head75">ذكر ائتمام من هو في غير المسجد بالإمام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head76">ذكر كراهية تطويل الإمام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head77">ذكر إمامة النساء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head78">ذكر تلقين الأئمة القرآن في الصلاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head79">ذكر مسائل من أبواب الإمامة</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head80">جماع أبواب صلاة الجماعة</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head81">ذكر فضل الجماعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head82">الجزء الحادي والعشرين من الإيضاح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head83">ذكر فضل صلاة العشاء وصلاة الفجر في جماعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head84">ذكر ما يقع عليه اسم الجماعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head85">ذكر ثواب المشي إلى الجماعات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head86">ذكر فضل الصف الأول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head87">ذكر فضل ميامن الصفوف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head88">ذكر الأمر بسد الفرج وإتمام الصفوف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head89">ذكر الأمر بتسوية الصفوف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head90">ذكر الصلاة خلف الصفوف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head91">ذكر من ms106 لم يستطع أن يقوم في الصف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head92">ذكر مقدار ما يكون بين الصفوف ومن يجب أن يلي الإمام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head93">ذكر الاصطفاف بين السواري</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head94">ذكر صلاة النساء مع الرجال</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head95">جماع أبواب صفات الصلاة وسنتها</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head96">ذكر إحداث النية عند الدخول في الصلاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head97">ذكر رفع اليدين في بدء الصلاة والحد الذي بهما</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head98">/ 203 / ذكر وجوب التكبير لافتتاح الصلاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head99">ذكر افتتاح الصلاة بعد تكبيرة الافتتاح بالتوجه والدعاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head100">ذكر الاستعاذة بعد الاستفتاح وقبل القراءة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head101">ذكر قول من قال:التوجه والاستفتاح/218/بالدعاء قبل تكبيره الإحرام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head102">ذكر النهي عن الالتفات ورفع البصر في الصلاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head103">ذكر الأمر بالإقبال على الصلاة، والحض على الخشوع والتفرغ على الصلاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head104">ذكر صفة القيام في الصلاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head105">ذكر وضع إحدى اليدين على الاخرى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head106">ذكر البدء ببسم الله الرحمن الرحيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head107">ذكر البدء بعد بسم الله الرحمن الرحيم بسورة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head108">ذكر قول المصلي آمين بعد فراغه من قراءة فاتحة الكتاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head109">ذكر قراءة المصلي بعد فاتحة الكتاب بسورة في كل ركعة من الركعتين الأولتين من الصلاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head110">ذكر ما يقرأ في الصلاة من السور</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 212410</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Qadi Nucman</label><label>tags: COMPLETED :: </label><label>url: https://raw.githubusercontent.com/OpenITI/0375AH/master/data/0363QadiNucman/0363QadiNucman.Idah/0363QadiNucman.Idah.EShia0027411-ara1.completed</label><label>tok_length: 56266</label><label>status: pri</label><label>id: EShia0027411</label><label>ed_info: http://www.worldcat.org/oclc/49367347</label><label>title_lat: Idah</label><label>title_ar: </label><label>book: 0363QadiNucman.Idah</label><label>author_lat: Qadi Nucman</label><label>author_ar: </label><label>date: 0363</label><label>versionUri: 0363QadiNucman.Idah.EShia0027411-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "203", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
