<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">[مقدمة الكتاب]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">[باب القضاء وما يتعلق به]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">[فصل في معرفة أركان القضاء]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">[فصل في رفع المدعى عليه وما يلحق بذلك]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">[فصل في مسائل من القضاء]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">[فصل في المقال والجواب]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">[فصل في الآجال]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">[فصل في الإعذار]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">[فصل في خطاب القضاة وما يتصل به]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">[باب الشهود وأنواع الشهادات وما يتعلق بذلك]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">[فصل مسائل من باب الشهادة مما يتكرر وقوعه غالبا]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">[فصل في أنواع الشهادات]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">[فصل الشهادة التي توجب الحق مع اليمين]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">[فصل من أقسام الشهادة وهي التي توجب الحق من غير يمين]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">[فصل ما يوجب اليمين لا على الطالب بل على المطلوب]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">[فصل الشهادة التي لا عمل لها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">[فصل في شهادة السماع]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">[فصل في مسائل من الشهادة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">[باب اليمين وما يتعلق بها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">[باب الرهن وما يتعلق به]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">[فصل في اختلاف المتراهنين]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">[باب الضمان وما يتعلق به]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">[باب الوكالة وما يتعلق بها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">[فصل في تداعي الموكل والوكيل]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">[باب ms0209 الصلح وما يتعلق به]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">[فصل وللأب الصلح على المحجور]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">[باب النكاح وما يتعلق به]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">[فصل في الأولياء وما يترتب في الولاية]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">[فصل فيمن له الإجبار وما يتعلق به]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">[فصل في حكم فاسد النكاح وما يتعلق به]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">[فصل في مسائل من النكاح]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">[فصل في تداعي الزوجين وما يلحق به]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">69 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">[فصل في الاختلاف في القبض]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">[فصل فيما يهديه الزوج ثم يقع الطلاق]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">[فصل في الاختلاف في الشوار المورد بيت البناء]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">[فصل في الاختلاف في متاع البيت]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">[فصل في إثبات الضرر والقيام به وبعث الحكمين]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">[فصل في الرضاع]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">[فصل في عيوب الزوجين وما يردان به منها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">[فصل في الإيلاء والظهار]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">[فصل في اللعان]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">[باب الطلاق والرجعة وما يتعلق بهما]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">[فصل الخلع]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">[فصل في الأيمان اللازمة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">[فصل في التداعي في الطلاق]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">[فصل من طلق زوجته طلاقا رجعيا ثم أراد العود للزوجية]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">[فصل في الرجعة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">[فصل في الفسخ]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">[باب النفقة وما يتعلق بها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">[فصل في التداعي في النفقة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">[فصل فيما يجب للمطلقات وغيرهن من النفقة وما يلحق بها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">[فصل في الطلاق بالإعسار بالنفقة وما يلحق بها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">[فصل في أحكام المفقودين]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">[فصل في الحضانة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">[باب في البيوع وما شاكلها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">[فصل في بيع الأصول]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">[فصل في بيع العروض من الثياب وسائر السلع]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">[فصل في بيع الطعام]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">[فصل في بيع النقدين والحلي وشبهه]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">[فصل في بيع الثمار وما يلحق بها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">[فصل في الجائحة في الثمار]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">[فصل في بيع الرقيق وسائر الحيوان]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">[فصل كلاب الماشية يجوز ms0481 بيعها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">[فصل في بيع الدين والمقاصة فيه]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">[فصل في الحوالة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">[فصل في بيع الخيار والثنيا]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head0">[فصل في بيع الفضولي وما يمثله]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head1">[فصل في بيع المضغوط وما أشبهه]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head2">[فصل في مسائل من أحكام البيع]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head3">[فصل في اختلاف المتبايعين]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head4">[فصل في حكم البيع على الغائب]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head5">[فصل في العيوب]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head6">[فصل في الغبن]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head7">[فصل في الشفعة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head8">[فصل في القسمة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head9">[فصل في المعاوضة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head10">[فصل في الإقالة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head11">[فصل في التولية والتصيير]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head12">[فصل في السلم]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head13">[باب الكراء وما يتصل به]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head14">[فصل في كراء الأرض وفي الجائحة فيها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head15">[فصل في أحكام من الكراء]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head16">[فصل في اختلاف المكري والمكتري]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head17">[فصل في كراء الرواحل والسفن]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head18">[فصل في الإجارة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head19">[فصل في الجعل]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head20">[فصل في المساقاة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head21">[فصل في الاغتراس]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head22">[فصل في المزارعة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head23">[فصل في الشركة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head24">[فصل في القراض]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head25">[باب الحبس والهبة والصدقة وما يتصل بها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head26">[فصل في الصدقة والهبة وما يتعلق بهما]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head27">[فصل في الاعتصار]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head28">[فصل في العمرى وما يلحق بها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head29">[فصل في الإرفاق]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head30">[فصل في حكم الحوز]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head31">[فصل في الاستحقاق]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head32">[فصل ms0807 في العارية الوديعة والأمناء]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head33">[فصل في القرض]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head34">[باب العتق وما يتصل به]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head35">[باب في الرشد والأوصياء والحجر والوصية والإقرار والدين والفلس]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head36">[فصل في الوصية ما يجري مجراها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head37">[فصل في الإقرار]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head38">[فصل في حكم المديان]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head39">[فصل في الفلس]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head40">[باب في الضرر وسائر الجنايات]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head41">[فصل في ضرر الأشجار]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head42">[فصل في مسقط القيام بالضرر]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head43">[فصل في الغصب والتعدي]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head44">[فصل في الاغتصاب]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head45">[فصل في دعوى السرقة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head46">[فصل في أحكام الدماء]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head47">[فصل في الجراحات]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head48">[باب التوارث والفرائض]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head49">[فصل في ذكر عدد الوارثين]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head50">[فصل في ذكر أحوال الميراث]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head51">[فصل في المقدار الذي يكون به الإرث]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head52">[فصل في ذكر حالات وجوب الميراث]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head53">[فصل في ذكر أهل الفرائض وأصولها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head54">[فصل في ذكر حجب الإسقاط]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head55">[فصل في ذكر حجب النقل إلى فرض]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head56">[فصل في ذكر حجب النقل للتعصيب]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head57">[فصل في موانع الميراث]</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 1232410</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Ahmad Mayyara Fasi</label><label>tags: CENT1100 :: _FIQH :: _MALIKI :: _QADA :: _SIYASA :: GAL@nodata :: Shamela@السياسة الشرعية والقضاء</label><label>url: https://raw.githubusercontent.com/OpenITI/1075AH/master/data/1072IbnAhmadMayyaraFasi/1072IbnAhmadMayyaraFasi.SharhMayyara/1072IbnAhmadMayyaraFasi.SharhMayyara.Shamela0021643-ara1</label><label>tok_length: 302924</label><label>status: sec</label><label>id: Shamela0021643</label><label>ed_info: دار المعرفة</label><label>title_lat: Sharh Mayyara</label><label>title_ar: الإتقان والإحكام في شرح تحفة الحكام المعروف بشرح ميارة</label><label>book: 1072IbnAhmadMayyaraFasi.SharhMayyara</label><label>author_lat: Ibn Ahmad Mayyara Fasi</label><label>author_ar: أبو عبد الله، محمد بن أحمد بن محمد الفاسي، ميارة (المتوفى: 1072هـ)</label><label>date: 1072</label><label>versionUri: 1072IbnAhmadMayyaraFasi.SharhMayyara.Shamela0021643-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "312", "313", "314", "315", "316", "317", "318", "319", "320", "321", "322", "323", "324", "325", "326", "327", "328", "329", "330", "331"], "02": ["003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "312", "313", "314", "315"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
