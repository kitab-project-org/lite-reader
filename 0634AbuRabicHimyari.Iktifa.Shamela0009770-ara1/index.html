<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">مقدمة المصنف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">ذكر نسب رسول الله صلى الله عليه وعلى آله وسلم تسليما وكيف طهره الله نفسا وخيما وشرفه حديثا وقديما وألقى إلى آبائه الأقدمين من الدلائل على اصطفائه إياه فى الآخرين وابتعاثه له رحمة للعالمين ما صيره لديهم قبل وجوده بطوائل السنين معلوما</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head2">ذكر أولية بيت الله المحرم وركنه المستلم ومن تولى بناءه من ملائكته وأنبيائه صلى الله على جميعهم وسلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head3">ذكر دخول الحبشة أرض اليمن واستيلائهم على ملكها وذكر السبب فى ذلك مع ما يتصل به من أمر الفيل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head4">ذكر حفر عبد المطلب زمزم وما يتصل بذلك من حديث مولد رسول الله صلى الله عليه وسلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head5">ذكر بنيان قريش الكعبة مع ذكر ما أحدثوه فى المناسك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head6">ذكر ما حفظ عن الأحبار والرهبان والكهان من أمر رسول الله صلى الله عليه وسلم قبل مبعثه سوى ما تقدم من ذلك مع ذكر شىء مما سمع من ذلك عند الأصنام أو هتفت به الهواتف</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">ذكر المبعث</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head8">ذكر إسلام حمزة بن عبد المطلب رضى الله عنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head9">ذكر الهجرة إلى أرض الحبشة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head10">ذكر الحديث عن إسلام عمر بن الخطاب رضى الله عنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head11">ذكر الحديث عن مسرى رسول الله صلى الله عليه وسلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head12">ذكر خروج النبى صلى الله عليه وسلم إلى الطائف بعد مهلك عمه أبى طالب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head13">ذكر عرض رسول الله صلى الله عليه وسلم نفسه على قبائل العرب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head14">بدء إسلام الأنصار وذكر العقبة الأولى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head15">إسلام سعد بن معاذ وأسيد بن حضير على يدى مصعب بن عمير رضى الله عنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head16">ذكر العقبة الثانية</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">بدء الهجرة إلى المدينة</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head18">ذكر الحديث عن خروج رسول الله صلى الله عليه وسلم وأبى بكر الصديق رضى الله عنه مهاجرين إلى المدينة</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">شروع رسول الله صلى الله عليه وسلم فى حرب المشركين وذكر مغازيه التى أعز الله بها الإيمان والمؤمنين</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head20">غزوة بدر الكبرى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head21">أمر بنى قينقاع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head22">سرية زيد بن حارثة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head23">مقتل كعب بن الأشرف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head24">غزوة أحد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head25">غدر عضل والقارة بأصحاب رسول الله صلى الله عليه وسلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head26">غزوة بئر معونة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head27">ذكر غزوة بنى النضير «2» والسبب الذى هاج الخروج إليهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head28">غزوة ذات الرقاع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head29">غزوة الخندق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head30">مقتل سلام بن أبى الحقيق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head31">ذكر إسلام عمرو بن العاص وخالد بن الوليد رضى الله عنهما</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head32">غزوة بنى لحيان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head33">غارة عيينة بن حصن على سرح المدينة وخروج النبى صلى الله عليه وسلم فى أثره، وهى غزوة ذى قرد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head34">غزوة بنى المصطلق وهى غزوة المريسيع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head35">غزوة الحديبية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head36">غزوة خيبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head37">عمرة القضاء «1» وهى غزوة الأمن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head38">غزوة مؤتة من أرض الشام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head39">غزوة الفتح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head40">غزوة حنين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head41">غزوة الطائف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head42">غزوة تبوك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head43">ذكر إسلام ثقيف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head44">ذكر حج أبى بكر الصديق رضى الله عنه بالناس سنة تسع وتوجيه رسول الله صلى الله عليه وسلم على بن أبى طالب بعده بسورة براءة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head45">السرايا</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">ذكر الوفود على رسول الله صلى الله عليه وسلم ملخصا من كتاب ابن إسحاق والواقدى وغيرهما</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head47">وفد بنى تميم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head48">وفد بنى عامر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head49">وفد تجيب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head50">فروة بن مسيك المرادى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head51">وفد زبيد عمرو بن معدى كرب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head52">وفد بنى ثعلبة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head53">وفد بنى سعد هذيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head54">وفد بنى فزارة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head55">وفد بنى أسد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head56">وفد بهراء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head57">وفد بنى غدرة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head58">وفد بلى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head59">ضمام بن ثعلبة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head60">وفد عبد القيس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head61">وفد بنى مرة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head62">وفد خولان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head63">وفد محارب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head64">وفد طىء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head65">وفد كندة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head66">وفد صداء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head67">وفد غسان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head68">وفد سلامان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head69">وفد بنى عبس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head70">وفد الأزد ووفد جرش</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head71">وفد غامد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head72">وفد بنى الحارث بن كعب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head73">وفد بنى حنيفة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head74">وفد همدان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head75">وفد النخع</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head0">ذكر بعث رسول الله صلى الله عليه وسلم إلى الملوك، وكتابه إليهم يدعوهم إلى الله وإلى الإسلام</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head1">ذكر كتاب النبى صلى الله عليه وسلم إلى قيصر، وما كان من خبر دحية معه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head2">ذكر توجه عبد الله بن حذافة إلى كسرى بكتاب النبى صلى الله عليه وسلم وما</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head3">ذكر إسلام النجاشى، وكتاب رسول الله صلى الله عليه وسلم إليه مع عمرو بن أمية الضمرى </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head4">كتاب رسول الله صلى الله عليه وسلم إلى المقوقس صاحب الإسكندرية مع حاطب بن أبى بلتعة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head5">ذكر كتاب رسول الله صلى الله عليه وسلم إلى المنذر بن ساوى العبدى مع العلاء بن الحضرمى بعد انصرافه من الحديبية </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head6">ذكر كتاب النبى صلى الله عليه وسلم إلى جيفر وعبد ابنى الجلندى الأزديين، ملكى عمان، مع عمرو بن العاص </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head7">كتاب رسول الله صلى الله عليه وسلم إلى هوذة بن على مع سليط بن عمرو العامرى، وما كان من خبره معه </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head8">ذكر كتاب النبى صلى الله عليه وسلم إلى الحارث بن أبى شمر الغسانى مع شجاع بن وهب </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head9">ذكر كتاب النبى صلى الله عليه وسلم إلى فروة بن عمرو الجذامى ثم النفاتى، وما كان من تبرعه بالإسلام هداية من الله عز وجل له </a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head10">ذكر حجة الوداع «3» وتسمى أيضا حجة التمام، وحجة البلاغ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head11">ذكر مصيبة الأولين والآخرين من المسلمين بوفاة رسول الله صلى الله عليه وسلم وعلى آله أجمعين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head12">بيعة أبى بكر رضى الله عنه وما كان من تحيز الأنصار إلى سعد بن عبادة فى سقيفة بنى ساعدة، ومنتهى أمر المهاجرين معهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head13">ذكر غسل رسول الله صلى الله عليه وسلم ودفنه، وما يتصل بذلك من أمره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head14">ذكر خلافة أبى بكر الصديق رضى الله عنه «1» وما حفظ عن رسول الله صلى الله عليه وسلم من الإيماء إليها والإشارات الدالة عليها مع ما كان من تقدمه صلى الله عليه وسلم إلى الإنذار بالفتن ms0704 الكائنة بعده وما صدر عنه من الأقاويل المنذرة بالردة</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head15">ذكر بدء الردة بعد وفاة رسول الله صلى الله عليه وسلم وما كان من تأييد الله لخليفة رسوله عليه السلام فيها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head16">وصية أبى بكر الصديق رضى الله عنه، خالد بن الوليد حين بعثه فى هذا الوجه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head17">ذكر مسير خالد بن الوليد رضى الله عنه، إلى بزاخة وغيرها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head18">ذكر رجوع بنى عامر وغيرهم إلى الإسلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head19">قصة مسيلمة الكذاب وردة أهل اليمامة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head20"> ذكر تقديم خالد بن الوليد الطلائع أمامه من البطاح </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head21">ذكر ردة بنى سليم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head22">ردة البحرين </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head23">ذكر ردة أهل دبا وأزد عمان </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head24">ذكر ردة صنعاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head25">ذكر ردة كندة وحضرموت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head26">ذكر بدء الغزو إلى الشام وما وقع فى نفس أبى بكر الصديق رضى الله عنه، من ذلك وما قوى عزمه عليه </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head27">وقعة أجنادين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head28">وقعة مرج الصفر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head29">ذكر الخبر عن وفاة أبى بكر الصديق رضى الله عنه، وما كان من عهده إلى عمر</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head30">استخلاف عمر بن الخطاب</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head31">ذكر الخبر عما صار إليه أمر دمشق من الفتح والصلح بعد طول الحصار فى خلافة عمر بن الخطاب، على نحو ما ذكره من ذلك أصحاب فتوح الشام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head32">ذكر بيسان </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head33">ذكر طبرية </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head34">حديث مرج الروم من رواية سيف أيضا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head35">وقعة فحل حسبما فى كتب فتوح الشام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head36">فتح حمص فيما حكاه أصحاب فتوح الشام </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head37">حديث حمص آخر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head38">فتح قنسرين»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head39">جمع الروم للمسلمين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head40">وقعة اليرموك «2» على نحو ما حكاه أصحاب كتب فتوح الشام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head41">قصة صلح إيلياء وقدوم عمر رضى الله عنه الشام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head42">ذكر ما وعدنا به قبل من سياقة فتح قيسارية حيث ذكرها أصحاب ms0969 فتوح الشام خلافا لما أوردناه قبل ذلك عن سيف بن عمر، مما لا يوافق هذا مساقا ولا زمانا، حسب ما يوقف عليه فى الموضعين إن شاء الله تعالى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head43">ذكر فتح مصر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head44">ذكر فتح أنطابلس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head45">فتح أطرابلس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head46">ذكر انتقاض الإسكندرية فى خلافة عثمان رضى الله عنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head47">ذكر غزو أفريقية وفتحها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head48">ذكر صلح النوبة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head49">ذكر البحر والغزو فيه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head50">غزو معاوية بن أبى سفيان قبرس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head51">غزوة ذات الصوارى ms1019</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head52">ذكر فتح العراق وما والاه على ما ذكره سيف بن عمر وأورده أبو جعفر محمد بن جرير الطبرى عنه وعن غيره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head53">أخبار الأيام فى زمان خالد بن الوليد رضى الله عنه </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head54">حديث الثنى والمذار </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head55">حديث الولجة «1» وهى مما يلى كسكر من البر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head56">حديث أليس، وهى على صلب الفرات </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head57">حديث أمغيشيا وكيف أفاءها الله بغير قتال </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head58">حديث يوم المقر وفم فرات بادقلى مع ما يتصل به من حديث الحيرة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head59">حديث الأنبار «1» وهى ذات العيون «2»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head60">حديث عين التمر </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head61">حديث دومة الجندل وما بعدها من الأيام بحصيد والخنافس ومصيخ والبشر والفراض </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head62">حديث المثنى بعد خالد </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head63">ذكر ما كان من خبر العراق فى خلافة عمر بن الخطاب رضى الله عنه، وما كان من أمر المثنى بن حارثة معه، وذكر أبى عبيد بن مسعود، على ما فى ذلك كله من الاختلاف بين رواة الآثار </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head64">حديث وقعة الجسر </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head65">حديث البويب ووقعة مهران </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head66">حديث غارة المثنى على سوقى الخنافس وبغداد </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head67">حديث السرايا من الأنبار </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head68">ذكر ما هيج حرب القادسية على ما ذكره سيف عن أشياخه </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head69">تأمير عمر، رضى الله عنه، سعد بن أبى وقاص على العراق وذكر الخبر عن حرب القادسية </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head70">يوم أرماث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head71">ذكر اليوم الثانى من أيام القادسية، وهو يوم أغواث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head72">حديث يوم عماس، وهو اليوم الثالث من أيام القادسية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head73">خبر اليوم الرابع من أيام القادسية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head74">ذكر فتح المدائن «1» وما نشأ بينه وبين القادسية من الأمور</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head75">حديث «1» وقعة جلولاء «2»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head76">حديث يوم تكريت </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head77">ذكر يوم ماسبذان «1» ويوم قرقيسيا «2»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head78">ذكر الحديث عن تمصير الكوفة والبصرة وتحول سعد بن أبى وقاص عن المدائن إلى الكوفة وما يندرج مع ذكر البصرة من فتح الأبلة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head79">ذكر الجزيرة، وذكر السبب الذى دعا عمر إلى الأمر بقصدها </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head80">ذكر فتح سوق الأهواز ومناذر ونهرتير </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head81">حديث فتح الأهواز ومدينة سرق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head82">ذكر غزو المسلمين أرض فارس </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head83">ذكر فتح رامهرمز والسوس وتستر وأسر الهرمزان </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head84">ذكر فتح السوس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head85">فتح جندى سابور</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head86">حديث وقعة نهاوند </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head87">ذكر الانسياح فى بلاد فارس، وعمل المسلمين به بإذن عمر رضى ms1245 الله عنه، فيه بعد منعه إياهم، وما تبع ذلك من الفتوح فى بقية خلافته وقتال الترك والديلم وغيرهم </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head88">ذكر الخبر عن أصبهان </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head89">ذكر فتح همذان ثانية وقتال الديلم </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head90">فتح الرى </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head91">ذكر فتح قومس وجرجان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head92">ذكر فتح طبرستان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head93">فتح أذربيجان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head94">حديث فتح الباب </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head95">ذكر مسير يزدجرد إلى خراسان ودخول الأحنف إليها غازيا </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head96">فتح توج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head97">حديث اصطخر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head98">حديث فسا ودارابجرد </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head99">حديث فتح كرمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head100">فتح سجستان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head101">فتح مكران</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head102">حديث بيروذ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head103">غزوة سلمة بن قيس الأشجعى الأكراد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head104">ذكر الخبر عن إحرام عمر بن الخطاب، رضى الله عنه إلى حين مقتله</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head105">ذكر خلافة ذى النورين أبى عمرو عثمان بن عفان أمير المؤمنين، رضى الله عنه ومبايعة أهل الشورى له بعد وفاة عمر، رضى الله عنه</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head106">ذكر غزوة الوليد بن عقبة أذربيجان وأرمينية لمنع أهلها ما صالحوا عليه أهل الإسلام أيام عمر بن الخطاب </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head107">ذكر انتقاض فارس، ومسير عبد الله بن عامر إليها وفتحه إياها </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head108">ذكر انتقاض خراسان، وخروج سعيد بن العاص وعبد الله بن عامر إليها وذكر طبرستان واستيلاء سعيد عليها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head109">ذكر مقتل يزدجرد </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head110">ذكر فتح أبرشهر، وطوس، وبيورد، ونسا، وسرخس، وصلح مرو</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head111">ذكر فتح مرو الروذ والطالقان والفارياب والجوزجان وطخارستان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head112">ذكر جرى الصلح بين الأحنف وبين أهل بلخ </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head113">فتح عمورية وانتقاضها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="02.html#head114">مقتل عثمان رضى الله عنه</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head115">الخاتمة</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 1589072</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Abu Rabic Himyari</label><label>tags: COMPLETED :: CENT0700 :: _ASHAB :: _SHAMAIL :: _SIRA :: GAL@literature-islamic :: GAL@1000-1258CE :: GAL@hadith :: GAL@literature-arabic :: GAL@period-postclassical :: GAL@spain :: Shamela@السيرة والشمائل</label><label>url: https://raw.githubusercontent.com/OpenITI/0650AH/master/data/0634AbuRabicHimyari/0634AbuRabicHimyari.Iktifa/0634AbuRabicHimyari.Iktifa.Shamela0009770-ara1.completed</label><label>tok_length: 392146</label><label>status: pri</label><label>id: Shamela0009770</label><label>ed_info: دار الكتب العلمية - بيروت</label><label>title_lat: Iktifa</label><label>title_ar: الاكتفاء بما تضمنه من مغازي رسول الله - صلى الله عليه وسلم - والثلاثة الخلفاء</label><label>book: 0634AbuRabicHimyari.Iktifa</label><label>author_lat: Abu Rabic Himyari</label><label>author_ar: سليمان بن موسى بن سالم بن حسان الكلاعي الحميري، أبو الربيع (المتوفى: 634هـ)</label><label>date: 0634</label><label>versionUri: 0634AbuRabicHimyari.Iktifa.Shamela0009770-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "000", "000", "000", "001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "298", "299", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "312", "313", "314", "315", "316", "317", "318", "319", "320", "321", "322", "323", "324", "325", "326", "327", "328", "329", "330", "331", "332", "333", "334", "335", "336", "337", "338", "339", "340", "341", "342", "343", "344", "345", "346", "347", "348", "349", "350", "351", "352", "353", "354", "355", "356", "357", "358", "359", "360", "361", "362", "363", "364", "365", "366", "367", "368", "369", "370", "371", "372", "373", "374", "375", "376", "377", "378", "379", "380", "381", "382", "383", "384", "385", "386", "387", "388", "389", "390", "391", "392", "393", "394", "395", "396", "397", "398", "399", "400", "401", "402", "403", "404", "405", "406", "407", "408", "409", "410", "411", "412", "413", "414", "415", "416", "417", "418", "419", "420", "421", "422", "423", "424", "425", "426", "427", "428", "429", "430", "431", "432", "433", "434", "435", "436", "437", "438", "439", "440", "441", "442", "443", "444", "445", "446", "447", "448", "449", "450", "451", "452", "453", "454", "455", "456", "457", "458", "459", "460", "461", "462", "463", "464", "465", "466", "467", "468", "469", "470", "471", "472", "473", "474", "475", "476", "477", "478", "479", "480", "481", "482", "483", "484", "485", "486", "487", "488", "489", "490", "491", "492", "493", "494", "495", "496", "497", "498", "499", "500", "501", "502", "503", "504", "505", "506", "507", "508", "509", "510", "511", "512", "513", "514", "515", "516", "517", "518", "519", "520", "521", "522", "523", "524", "525", "526", "527", "528", "529", "530", "531", "532", "533", "534", "535", "536", "537", "538", "539", "540", "541", "542", "543", "544", "545", "546", "547", "548", "549", "550", "551", "552", "553", "554", "555", "556", "557", "558", "559", "560", "561", "562", "563", "564", "565", "566", "567", "568", "569", "570", "571", "572", "573", "574", "575", "576", "577", "578", "579", "580", "581", "582", "583", "584", "585", "586", "587", "588", "589", "590", "591", "592", "593", "594", "595", "596", "597", "598", "599", "600", "601", "602", "603", "604", "605", "606", "607", "608", "609", "610", "611", "612", "613", "614", "615", "616", "617", "618", "619", "620", "621", "622", "623", "624", "625", "626", "627", "628", "629"], "02": ["003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "312", "313", "314", "315", "316", "317", "318", "319", "320", "321", "322", "323", "324", "325", "326", "327", "328", "329", "330", "331", "332", "333", "334", "335", "336", "337", "338", "339", "340", "341", "342", "343", "344", "345", "346", "347", "348", "349", "350", "351", "352", "353", "354", "355", "356", "357", "358", "359", "360", "361", "362", "363", "364", "365", "366", "367", "368", "369", "370", "371", "372", "373", "374", "375", "376", "377", "378", "379", "380", "381", "382", "383", "384", "385", "386", "387", "388", "389", "390", "391", "392", "393", "394", "395", "396", "397", "398", "399", "400", "401", "402", "403", "404", "405", "406", "407", "408", "409", "410", "411", "412", "413", "414", "415", "416", "417", "418", "419", "420", "421", "422", "423", "424", "425", "426", "427", "428", "429", "430", "431", "432", "433", "434", "435", "436", "437", "438", "439", "440", "441", "442", "443", "444", "445", "446", "447", "448", "449", "450", "451", "452", "453", "454", "455", "456", "457", "458", "459", "460", "461", "462", "463", "464", "465", "466", "467", "468", "469", "470", "471", "472", "473", "474", "475", "476", "477", "478", "479", "480", "481", "482", "483", "484", "485", "486", "487", "488", "489", "490", "491", "492", "493", "494", "495", "496", "497", "498", "499", "500", "501", "502", "503", "504", "505", "506", "507", "508", "509", "510", "511", "512", "513", "514", "515", "516", "517", "518", "519", "520", "521", "522", "523", "524", "525", "526", "527", "528", "529", "530", "531", "532", "533", "534", "535", "536", "537", "538", "539", "540", "541", "542", "543", "544", "545", "546", "547", "548", "549", "550", "551", "552", "553", "554", "555", "556", "557", "558", "559", "560", "561", "562", "563", "564", "565", "566", "567", "568", "569", "570", "571", "572", "573", "574", "575", "576", "577", "578", "579", "580", "581", "582", "583", "584", "585", "586", "587", "588", "589", "590", "591", "592", "593", "594", "595", "596", "597", "598", "599", "600", "601", "602", "603", "604", "605", "606", "607", "608", "609", "610", "611", "612", "613", "614", "615", "616", "617", "618", "619", "620", "621", "622", "623", "624", "625", "626", "627", "629", "630", "631", "632"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
