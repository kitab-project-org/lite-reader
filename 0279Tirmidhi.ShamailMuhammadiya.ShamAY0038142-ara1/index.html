<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">CHECK [الشمائل المحمدية]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">AUTO 1 - باب ما جاء في خلق رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">AUTO 2 - باب ما جاء في خاتم النبوة.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">AUTO 3 - باب ما جاء في شعر رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">AUTO 4 - باب ما جاء في ترجل رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">AUTO 5 - باب ما جاء في شيب رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">AUTO 6 - باب ما جاء في خضاب رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">AUTO 7 - باب ما جاء في كحل رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">AUTO 8 - باب ما جاء في لباس رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">AUTO 9 - باب ما جاء في عيش رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">AUTO 10 - باب ما جاء في خف رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">AUTO 11 - باب ما جاء في نعل رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">AUTO 12 - باب ما جاء في ذكر خاتم رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">AUTO 13 - باب ما جاء في تختم رسول الله صلى الله عليه وسلم (1).</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">AUTO 14 - باب ما جاء في صفة سيف رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">AUTO 15 - باب ما جاء في صفة درع رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">AUTO 16 - باب ما جاء في صفة مغفر رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">AUTO 17 - باب ما جاء في [صفة] (1) عمامة رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">AUTO 18 - باب ما جاء في صفة إزار رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">AUTO 19 - باب ما جاء في [صفة] (1) مشية رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">AUTO 20 - باب ما جاء في تقنع رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">AUTO 21 - باب ما جاء في جلسته (1) صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">AUTO 22 - باب ما جاء في تكأة رسول الله ms24 صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">AUTO 23 - باب ما جاء في اتكاء رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">AUTO 24 - باب ما جاء في صفة أكل رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">AUTO 25 - باب ما جاء في صفة خبز رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">AUTO 26 - باب ما جاء في صفة إدام رسول الله صلى الله عليه وسلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">AUTO 27 - باب ما جاء في صفة وضوء رسول الله صلى الله عليه وسلم عند</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">AUTO 28 - باب ما جاء في قول رسول الله صلى الله عليه وسلم قبل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">AUTO 29 - باب ما جاء في قدح رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">AUTO 30 - باب ما جاء في صفة فاكهة رسول الله صلى الله عليه وسلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">AUTO 31 - باب ما جاء في صفة شراب رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">AUTO 32 - باب ما جاء في (1) شرب رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">AUTO 33 - باب ما جاء في تعطر رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">AUTO 34 - باب كيف كان كلام رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">AUTO 35 - باب ما جاء في ضحك رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">AUTO 36 - باب ما جاء في صفة مزاح رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">AUTO 37 - باب ما جاء في صفة كلام رسول الله صلى الله عليه وسلم في الشعر.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">AUTO 38 - باب ما جاء في كلام رسول الله صلى الله عليه وسلم في السمر.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">AUTO باب حديث أم زرع.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">AUTO 39 - باب ما جاء في صفة نوم رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">AUTO 40 - باب ما جاء في عبادة رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">AUTO 41 - [باب صلاة النبي الضحى] (1).</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">AUTO 42 - باب صلاة التطوع في البيت.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">AUTO 43 - باب ما جاء في صوم رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">AUTO 44 - باب ما جاء في قراءة رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">AUTO 45 - باب ما جاء في بكاء رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">AUTO 46 - باب ما جاء في فراش رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">AUTO 47 - باب ما جاء في تواضع رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">AUTO 48 - باب ما جاء في خلق رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">AUTO 49 - باب ما جاء في حياء رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">AUTO 50 - باب ما جاء في حجامة رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">AUTO 51 - باب: ما جاء في أسماء رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">AUTO 52 - باب: ما جاء في عيش رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">AUTO 53 - باب: ما جاء في سن رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">AUTO 53 - باب: ما جاء في وفاة رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">AUTO 55 - باب: ما جاء في ميراث رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">AUTO 56 - باب: ما جاء في رؤية رسول الله صلى الله عليه وسلم في</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 101326</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Tirmidhi</label><label>tags:  :: ShamAY@السيرة والشمائل</label><label>url: https://raw.githubusercontent.com/OpenITI/0300AH/master/data/0279Tirmidhi/0279Tirmidhi.ShamailMuhammadiya/0279Tirmidhi.ShamailMuhammadiya.ShamAY0038142-ara1</label><label>tok_length: 26865</label><label>status: sec</label><label>id: ShamAY0038142</label><label>ed_info: عصام موسى هادي :: الثالثة، 1434ه - 2013م :: دار الصديق - الجبيل - السعودية</label><label>title_lat: Shamail Muhammadiya</label><label>title_ar: الشمائل المحمدية ¶ المؤلف: أبو عيسى محمد بن عيسى بن سورة الترمذي ¶ المتوفي: 279 ه ¶ المحقق: عصام موسى هادي ¶ الناشر: دار الصديق - الجبيل - السعودية ¶ الطبعة: الثالثة، 1434ه - 2013م ¶ عدد الأجزاء: 1 ¶ ملاحظة: الكتاب موافق لطبعة دار الصديق، ومقابل على طبعتي دار الصديق، ودار الغرب الإسلامي بتحقيق ماهر ياسين الفحل، مع إثبات أهم الفروق بينهما في الحواشي ¶ مصدر الكتاب: مكتبة أحمد الخضري ¶ تاريخ آخر تعديل: 27 - 1 - 2015 م ¶ ملاحظة: [هذا الكتاب من إضافات أعضاء ملتقى أهل الحديث] :: الشمائل المحمدية :: الشمائل المحمدية للترمذي - ط الصديق</label><label>book: 0279Tirmidhi.ShamailMuhammadiya</label><label>author_lat: Tirmidhi</label><label>author_ar: محمد بن عيسى بن سورة بن موسى بن الضحاك، الترمذي، أبو عيسى :: الترمذي، محمد بن عيسى :: أبو عيسى محمد بن عيسى بن سورة الترمذي</label><label>date: 0279</label><label>versionUri: 0279Tirmidhi.ShamailMuhammadiya.ShamAY0038142-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["001", "023", "024", "025", "025", "026", "026", "027", "028", "029", "032", "032", "032", "033", "033", "033", "034", "034", "034", "035", "035", "035", "035", "036", "036", "037", "037", "037", "037", "038", "038", "038", "038", "039", "039", "039", "039", "040", "040", "040", "040", "040", "041", "041", "041", "042", "042", "042", "043", "043", "043", "044", "044", "044", "045", "045", "045", "045", "046", "046", "046", "047", "047", "047", "047", "048", "048", "048", "048", "049", "049", "049", "049", "050", "050", "051", "051", "051", "052", "052", "052", "052", "052", "053", "053", "053", "053", "054", "054", "054", "055", "055", "055", "055", "056", "056", "056", "056", "057", "057", "057", "057", "057", "058", "058", "058", "058", "059", "059", "060", "060", "060", "060", "061", "061", "061", "061", "062", "062", "062", "063", "063", "063", "064", "064", "064", "064", "064", "065", "065", "065", "066", "066", "066", "066", "067", "067", "067", "067", "068", "068", "068", "068", "068", "069", "069", "069", "070", "070", "070", "070", "070", "071", "071", "071", "071", "072", "072", "072", "073", "073", "073", "073", "073", "074", "074", "074", "075", "075", "075", "075", "076", "076", "076", "076", "076", "077", "077", "077", "078", "078", "079", "079", "079", "079", "080", "080", "080", "080", "081", "081", "081", "081", "082", "082", "082", "082", "082", "082", "083", "083", "084", "084", "085", "085", "086", "086", "086", "086", "087", "087", "087", "087", "088", "088", "088", "088", "088", "088", "089", "089", "089", "090", "091", "091", "091", "091", "092", "092", "092", "093", "093", "093", "094", "094", "094", "095", "095", "096", "096", "097", "097", "097", "098", "098", "098", "099", "099", "100", "101", "102", "103", "104", "104", "104", "105", "105", "105", "106", "106", "106", "106", "107", "107", "107", "108", "108", "108", "108", "109", "109", "110", "110", "110", "110", "110", "111", "111", "111", "111", "112", "112", "112", "113", "113", "113", "113", "114", "114", "115", "115", "115", "116", "116", "116", "117", "117", "117", "117", "117", "118", "118", "118", "119", "119", "119", "119", "120", "120", "121", "121", "121", "121", "122", "122", "122", "123", "123", "124", "124", "124", "125", "125", "126", "126", "126", "127", "127", "127", "128", "129", "131", "131", "131", "131", "131", "132", "132", "133", "133", "134", "134", "134", "134", "135", "135", "136", "136", "136", "137", "137", "137", "138", "138", "138", "138", "139", "139", "139", "139", "139", "140", "140", "141", "141", "141", "143", "143", "144", "145", "145", "145", "146", "146", "146", "146", "146", "147", "148", "148", "148", "149", "149", "149", "149", "149", "150", "150", "150", "152", "152", "152", "153", "153", "154", "154", "154", "154", "155", "155", "155", "156", "156", "157", "157", "157", "158", "158", "029", "035", "035", "037", "040", "040", "044", "047", "052", "052", "053", "054", "055", "056", "056", "057", "060", "060", "063", "063", "064", "066", "066", "070", "071", "072", "073", "077", "077", "078", "080", "081", "084", "085", "088", "090", "092", "093", "093", "093", "096", "104", "105", "105", "107", "107", "109", "112", "112", "113", "114", "121", "125", "126", "127", "127", "129", "131", "135", "136", "137", "141"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
