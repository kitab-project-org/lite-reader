<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">بسم الله الرحمن الرحيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">الباب الأول في ألف الوصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">الباب الثاني في الياآت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">الباب الثالث في هاء التأنيث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">الباب الرابع فيما جاء من هاء التأنيث مكتوبا بالتاء ومكتوبا بالهاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">الباب الخامس في الهاآت التي تزاد في آخر الكلمة للوقف عليها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">الباب السادس غي الوقف على هاء الكناية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">الباب السابع في الوقف على آخر الكلمة المتحركة منونة وغير منونة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">الباب الثامن في كلا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">الباب التاسع في الكلمتين اللتين ضمت إحداهما إلى الأخرى فصارتا كلمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">سورة الفاتحة مكية مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">سورة البقرة مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">سورة آل عمران مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">سورة النساء مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">سورة المائدة مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">سورة الأنعام مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">سورة الأعراف مكية إلا قوله واسألهم عن القرية أو الخمس آيات فمدني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">سورة الأنفال مدنية وقيل إلا قوله وإذ يمكر بك الذين كفروا الآيات السبع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">سورة التوبة مدنية وقيل إلا الآيتين آخرها فمكيتان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">سورة يونس مكية إلا قوله فان كنت في شك الآيتين أو الثلاث أو قوله ومنهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">سورة هود عليه السلام مكية إلا قوله أقم الصلاة الآية وقيل إلا فلعلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">سورة يوسف عليه السلام مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">سورة الرعد مكية إلا قوله ولا يزال الذين كفروا الآية ويقول الذين كفروا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">سورة إبراهيم عليه السلام مكية إلا قوله ألم ترى الذين بدلوا الآيتين </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">سورة الحجر مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">سورة النحل مكية إلا قوله وان عاقبتم إلى آخرها فمدني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">سورة الإسراء مكية إلا قوله وان كادوا ليفتنوك الآيات الثمان فمدني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">سورة الكهف مكية إلا قوله تعالى واصبر نفسك الآية فمدني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">سورة مريم عليها السلام مكية وقيل إلا سجدتها وقيل إلا فخلف من بعدهم خلف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">سورة طه عليه ms104 السلام مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">سورة الانباء عليهم السلام مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">سورة الحج مكية الاقواله ومن الناس من يعبد الله على حرف الآيتين وقيل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">سورة المؤمنون مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">سورة النور مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">سورة الفرقان مكية الاقوله والذين لايدعون مع الله الها آخر إلى رحيما</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">سورة الشعراء مكية الاقوله والشعراء إلى آخرها فمدني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">سورة النمل مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">سورة القصص مكية إلا قوله تعلى ان الذي فرض عليك القرآن الآية فنزلت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">سورة العنكبوت مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">سورة الروم مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">سورة لقمان عليه السلام مكية الا قوله ولو ms124 أن ما في الأرض من شجرة أقلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">سورة السجدة مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">سورة الأحزاب مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">سورة سبأ مكية الا قوله ويرى الذين او توا العلم الى الآية فمدني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">سورة فاطر مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">سورة يس مكية وقيل الا قوله وإذا لهم اتقوا الآية فمدنية أو مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">سورة الصافات مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">سورة ص مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">سورة الزمر مكية إلا قوله قل يا عبادي الذين أسرفوا الآية فمدني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">سورة المؤمن مكية إلا قوله تعلى إلا الذين كفروا الآيتين فمدني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">سورة فصلت مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">سورة الشورى مكية إلا قوله قل لا أسألكم عليه أجرا الآيات الأربع فمدني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">سورة الزخرف مكية وقيل الا واسأل من أرسلنا الآية فمدني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">سورة الدخان مكية وقيل إلا قوله أنا كاشفوا لعذاب الآية فمدني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">سورة الجاثية مكية إلا قوله قل للذين آمنوا يغفروا الآية فمدني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">سورة الأحقاف مكية إلا قوله قل أرأيتم إن كان من عند الله الآية وإلا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">سورة القتال مدنية إلا قوله وكأين من قرية الآية فمكي أو مدني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">سورة الفتح مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">سورة الحجرات مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">سورة ق مكية إلا قوله ولقد خلقنا السموات الآية فمدني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">سورة والذاريات مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">سورة والطور مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">سورة النجم مكية إلا قوله عند سدرة المنتهى فمدني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">سورة القمر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">سورة الرحمن مكية وقيل إلا قوله يسأله من في السموات والأرض فمدني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">سورة الواقعة مكية إلا قوله أفبهذا الحديث الآية وقوله ثلة من الاولين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">سورة الحديد مكية أو مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">سورة المجادلة مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">سورة الحشر مدنية الحكيم تام لأول الحشر كاف وكذا إن ms151 يخرجوا ومن الله لم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">سورة الممتحنة مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">سورة الصف مكية أو مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">سورة الجمعة مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">سورة المنافقين مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">سورة التغابن مكية أو مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">سورة الطلاق مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">سورة التحريم مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">سورة الملك مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">سورة ن والقلم مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">سورة الحاقة مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">سورة المعارج مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">سورة نوح عليه السلام مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">سورة الجن مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">سورة المزمل عليه السلام مكية وقل إلا قوله إن ربك يعلم إلى آخرها فمدني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">سورة المدثر عليه الصلاة والسلام مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">سورة القيامة مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">سورة الإنسان مكية أو مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">سورة المرسلات مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">سورة النبأ مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head88">سورة النازعات مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head89">سورة عبس مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head90">سورة التكوير مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head91">سورة الانفطار مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head92">سورة المطففين مكية أو مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head93">سورة الانشقاق مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head94">سورة البروج مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head95">سورة الطارق مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head96">سورة الأعلى مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head97">سورة الغاشية مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head98">سورة الفجر مكية أو مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head99">سورة البلد مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head100">سورة والشمس مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head101">سورة والليل مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head102">سورة الضحى مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head103">سورة الانشراح مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head104">سورة التين مكية أو مدنيه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head105">سورة العلق مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head106">سورة القدر مكية أو مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head107">سورة لم يكن مكية أو مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head108">سورة الزلزلة مكية أو مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head109">سورة والعاديات مكية أو مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head110">سورة القارعة مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head111">سورة التكاثر مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head112">سورة والعصر مكية أو مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head113">سورة الهمزة مكية أو مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head114">سورة الفيل مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head115">سورة قريش مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head116">سورة الدين مكية أو مدنية أو نصفها كذا ونصفها كذا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head117">سورة الكوثر مكية أو مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head118">سورة الكافرين مكية أو مدنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head119">سورة النصر مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head120">سورة تبت مكية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head121">سورة الإخلاص هي واللتان بعدها مكيات أو مدنيات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head122">سورة الفلق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head123">سورة الناس</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 200107</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Zakariyya Ansari</label><label>tags: CENT1000 :: _CULUM :: _QURAN :: _TAFSIR :: GAL@literature-islamic :: GAL@period-postmongol :: GAL@period-mamluk :: GAL@1258-1517CE :: GAL@period-decline :: GAL@shafiis :: GAL@egypt :: GAL@fiqh :: GAL@syria :: Shamela@علوم القرآن</label><label>url: https://raw.githubusercontent.com/OpenITI/0950AH/master/data/0926ZakariyyaAnsari/0926ZakariyyaAnsari.MaqsidLiTalkhis/0926ZakariyyaAnsari.MaqsidLiTalkhis.Shamela0010917-ara1</label><label>tok_length: 49009</label><label>status: pri</label><label>id: Shamela0010917</label><label>ed_info: دار المصحف</label><label>title_lat: Maqsid Li Talkhis</label><label>title_ar: المقصد لتلخيص ما في المرشد في الوقف والابتداء</label><label>book: 0926ZakariyyaAnsari.MaqsidLiTalkhis</label><label>author_lat: Zakariyya Ansari</label><label>author_ar: زكريا بن محمد بن أحمد بن زكريا الأنصاري، زين الدين أبو يحيى السنيكي (المتوفى: 926هـ)</label><label>date: 0926</label><label>versionUri: 0926ZakariyyaAnsari.MaqsidLiTalkhis.Shamela0010917-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
