<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">1 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">يركع بين النداء والصلاة ركعتين خفيفتين»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">2 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">الربا في النسيئة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">3 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">: «إياكم والتبدع والتنطع , وعليكم بالعتيق»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">4 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">: «لا يساوم رجل على سوم أخيه حتى يشتري أو يترك، ولا يخطب على خطبة أخيه حتى ينكح أو يترك </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">5 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">: «انشد عالما أو متعلما , ولا تغد ما بين ذلك، فإن ما بين ذلك جاهل، وإن الملائكة تبسط أجنحتها </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">6 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">: «من أطفأ من أخيه سيئة فكأنما أحيا موءودة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">7 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">: «تبعث هذه الأمة بيض الوجوه، بيض الأقدام، بيض الأذرع»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">8 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">سيكون في أمتي اختلاف وفرقة قوية، يحسنون القيل ويسيئون الفعل، يقرؤون القرآن لا يجاوز </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">9 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">: «سيظهر شرار أمتي على خيارهم , حتى يستخفي فيهم المؤمن كما يستخفي فيكم المنافق </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">10 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">: «تعوذوا بالله من الفقر والمذلة والقلة وأن تظلم أو تظلم»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">11 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">: «يا معشر القراء , ارفعوا رءوسكم , ولا تكونوا عيالا على الناس»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">12 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">: «لو رأى رسول الله صلى الله ms02 عليه وسلم ما أحدث النساء لمنعهن الخروج إلى المساجد كما منعته </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">13 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">دعاء الرجل لأخيه بظاهر الغيب لا يرد، وتقول الملائكة: لك مثله "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">14 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">انهوا نساءكم عن الزينة والتبختر في المساجد، إنما لعنت بنو إسرائيل حيث لبست نساؤهم الزينة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">15 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">الشيطان ذئب الإنسان كذئب الغنم , يأخذ الناحية والقاصية والشاذة , فعليكم بالعامة والجماعة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">16 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">، فآتيه بوضوئه وحاجته، فكان يقوم من الليل، فيقول: «سبحان ربي وبحمده، سبحان ربي وبحمده، الهوى </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">17 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">: " إذا زالت الأفياء وراحت الأرواح فاطلبوا إلى الله عز وجل حوائجكم؛ فإنها ساعة الأوابين {فإنه </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">18 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">تصلي الضحى ثمان ركعات، تخفي ذلك وتغلق عليها بابها , ولا تدخل عليها </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">19 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">: «لو أنسيت آية ثم لم أجد أحدا يذكرنيها إلا رجل ببرك الغماد رحلت إليه»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">20 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">: اتق الله يا ابن سيرين، وعليك بالسداد؛ فإنه قد ذهب بالذين كانوا يعلمون فيما أنزل </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">21 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">وجنازة سعد بن معاذ بين أيدينا، يقول: «اهتز لها عرش الرحمن عز وجل»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">22 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">: «سووا بين أولادكم في العطية؛ فإني لو كنت مؤثرا أحدا على أحد لآثرت النساء على الرجال»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">23 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">: دخل رسول الله صلى الله عليه وسلم المسجد وعليه ثوب نجراني غليظ الصنيعة , فأتاه أعرابي من </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">24 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">: إذا مرض العبد المؤمن، قال الله عز وجل لصاحب اليمين: «أجر لعبدي صالح ما كان </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">25 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">: " لما ms04 أتى قال: اكتب، ولا أكتب "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">26 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">: «ما من امرأة تخرج إلى المسجد تعصف ريحها فيقبل الله منها صلاة حتى ترجع </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">27 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">: " ثلاث هن حق على المسلم يوم الجمعة: الاغتسال , والسواك , وأن يمس طيبا إن </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">28 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">إذا أراد أن ينصرف من صلاته استغفر ثلاث مرات، ثم قال: «اللهم أنت السلام، ومنك السلام، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">29 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">: «بكروا بالصلاة في اليوم الغيم , فإنه من ترك صلاة العصر حبط عمله»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">30 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">: لعن رسول الله صلى الله عليه وسلم المخنثين من الرجال , والمترجلات من النساء، قال رسول الله </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">31 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">إني لأرى في وجهه سفعة من الشيطان» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">32 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">: " ست من كن فيه استكمل الإيمان: قتل أعداء الله بالسيف، والصيام في الصيف، وإسباغ الوضوء في </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">33 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">الله عز وجل لا ينظر إلى صوركم ولا إلى أموالكم ولكن ينظر إلى صلاتكم وأعمالكم، فمن كان له </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">34 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">«أنشد بالله أن أسأل عما لم يكن؛ فإن الله عز وجل قد بين ما هو كائن»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">35 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">: «لكل شيء حرمة وحرمة الدواب وجوهها»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">36 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">عما يصلح للرجل من امرأته وهي حائض , قالت: «ما فوق الإزار» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">37 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">: «ما أذن الله عز وجل لشيء إذنه لنبي يتغنى بالقرآن يجهر به» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">38 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">يكره من الشاة سبعا: الذكر , والأنثيين والمثانة , والحيا , والمرارة , والغدة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">39 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">: «سووا بين أولادكم»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">40 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">«حسب المرء ms08 دينه , وكرمه تقواه , وسؤدده خلقه , ومروءته عقله , فإن لم يكن هكذا فحمار خير </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">41 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">يتجمعا جميعا: أبو القاسم ومحمد "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">42 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">: «من تعلق رقية فقد أتى بابا من الشرك، ومن أتى عرافا فصدقه بما يقول فقد كفر بما أنزل على </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">43 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">: «ليقم صاحب الريح فليتوضأ» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">44 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">: «مثل الراجع في صدقته كالكلب يقيء فيرجع في قيئه فيأكله»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head88">45 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head89">: «لو وضعت إصبعي في خمر ما أحببت أن تتبعني»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head90">46 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head91">: " إذا كنز الناس الذهب والفضة فاكنزوا هؤلاء الكلمات: اللهم إني أسألك الثبات في الأمر، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head92">47 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head93">: «إذا قام أحدكم من الليل فلا يدخل يده في الإناء حتى يفرغ عليها مرتين أو ثلاثا؛ فإن أحدكم لا </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head94">48 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head95">: «توضئوا من هذا المغمر , فمن لم يفعل فأصابه شيء فلا يلومن إلا نفسه»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head96">49 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head97">: اغتسل عبد الله بن عمر من جنابة ثم توضأ، فقلت: ما رأيت أن الغسل كافيك؟ قال: «بلى ولكن ظننت </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head98">50 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head99">: " تجاوز الله عن أمتي ثلاثا: الخطأ والنسيان وما استكرهوا عليه ".</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head100">51 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head101">: «لا يمنعن جار جاره من موضع خشبة في جداره» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head102">52 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head103">نكون في أرض فتصيبنا المخمصة فنصيب الميتة فما يحل لنا منها؟ فقال رسول الله صلى الله عليه </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head104">53 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head105">: «من شرب من الخمر شربة لم تقبل له توبة أربعين صباحا , فإن تاب تاب الله عليه، ثلاثا أو </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head106">54 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head107">: «إني لأخرج إلى الحاجة في أحضان البقيع استحياء من ربي عز وجل»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head108">55 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head109">: " كن النساء يصلين مع رسول الله صلى الله عليه وسلم صلاة الفجر متلفعات بمروطهن، يرجعن إلى </a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 13933</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Hasan Harrani</label><label>tags: CENT0300 :: _HADITH :: _MAKHTUTAT :: GAL@nodata :: Shamela@مخطوطات حديثية</label><label>url: https://raw.githubusercontent.com/OpenITI/0300AH/master/data/0295IbnHasanHarrani/0295IbnHasanHarrani.FawaidMuntaqa/0295IbnHasanHarrani.FawaidMuntaqa.Shamela0029712-ara1</label><label>tok_length: 3488</label><label>status: pri</label><label>id: Shamela0029712</label><label>ed_info: مخطوط نشر في برنامج جوامع الكلم المجاني التابع لموقع الشبكة الإسلامية</label><label>title_lat: Fawaid Muntaqa</label><label>title_ar: فوائد منتقاة من حديث أبي شعيب الحراني</label><label>book: 0295IbnHasanHarrani.FawaidMuntaqa</label><label>author_lat: Ibn Hasan Harrani</label><label>author_ar: عبد الله بن الحسن أحمد، أبو شعيب الأموي الحراني (المتوفى: 295هـ)</label><label>date: 0295</label><label>versionUri: 0295IbnHasanHarrani.FawaidMuntaqa.Shamela0029712-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "001"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
