<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">مقدمة المؤلف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">الباب الأول</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head2"> فصل في ذكر عدة من ms044 الكتب الشاملة للأحاديث والآثار ممن تمس الحاجة إلى التخريج منها لم يحصل لنا غالبها إلا بالإجازة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head3"> فصل في الكتب المفرقة بأبواب معينة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head4"> فصل في الكتب المفردة في الأحكام الفروعية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head5"> فصل في كتب الزهد والرقائق والمواعظ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head6"> فصل في الأدعية والأذكار والثواب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head7"> فصل في كتب تتعلق بالقرآن العظيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head8"> فصل في النوادر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head9"> فصل في الفضائل والمناقب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head10"> فصل في أشراط الساعة وأحوال يوم القيامة</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">الباب الثاني في المسانيد</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head12"> فصل في المفردات من المسندات</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">الباب الثالث في فنون الحديث</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head14"> فصل في العلل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head15"> فصل في المسلسلات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head16"> فصل المشروح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head17"> فصل في الرواة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head18"> فصل في تواريخ الرواة من البلاد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head19"> فصل في كتب الفضائل مما يجري في معنى التاريخ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head20"> فصل في الأنساب</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">الباب الرابع في المعاجم للشيوخ والمشيخات والأربعينات</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head22"> فصل في المعاجم على ترتيب الأقدم فالأقدم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head23"> فصل في المشيخات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head24"> فصل في الأربعينات</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">الباب الخامس في فوائد الشيوخ مرتبا على حروف المعجم مراعيا اعتبار الأشهر فالأشهر في والله المستعان</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head26"> حرف الألف المهموزة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head27"> حرف الباء الموحدة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head28"> حرف التاء المثناة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head29"> حرف الثاء المثلثة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head30"> حرف الثاء المثلثة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head31"> حرف الجيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head32"> حرف الحاء المهملة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head33"> حرف الخاء المعجمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head34"> حرف الدال المهملة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head35"> حرف الذال المعجمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head36"> حرف الراء المهملة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head37"> حرف الزاي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head38"> حرف السين المهملة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head39"> حرف الشين المعجمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head40"> حرف الصاد المهملة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head41"> حرف الضاد المعجمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head42"> حرف الطاء المهملة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head43"> حرف الظاء المعجمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head44"> حرف العين المهملة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head45"> حرف الغين المعجمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head46"> حرف الفاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head47"> حرف القاف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head48"> حرف الكاف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head49"> حرف اللام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head50"> حرف الميم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head51"> حرف النون</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head52"> حرف الهاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head53"> حرف الواو</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head54">حرف الياء آخر الحروف</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">الباب السادس من الفهرست في كتب العلوم التي لا يذكر فيها الإسناد غالبا</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head56"> الفصل الأول من الباب السادس في علوم القرآن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head57"> التفاسير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head58"> الفصل الثاني من الباب السادس في كتب الحديث المجردة عن الأسانيد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head59"> الفصل الثالث في كتب الآداب والتصوف والزهد ونحو ذلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head60"> الفصل الرابع في الفقه وأصوله وأصول الدين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head61"> الفصل الخامس في كتب التواريخ والعربية والآداب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head62"> تصانيف شيخنا الإمام العلامة إمام اللغة مجد الدين محمد بن يعقوب الشيرازي</a>
</li>
</ul>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 754169</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Hajar Casqalani</label><label>tags: COMPLETED :: CENT0900 :: PPE :: _ADILLA :: _FAHARIS :: _KUTUB :: GAL@historiography :: GAL@literature-islamic :: GAL@history :: GAL@history-universal :: GAL@period-postmongol :: GAL@period-mamluk :: GAL@1258-1517CE :: GAL@period-decline :: GAL@egypt :: GAL@syria :: Shamela@فهارس الكتب والأدلة</label><label>url: https://raw.githubusercontent.com/OpenITI/0875AH/master/data/0852IbnHajarCasqalani/0852IbnHajarCasqalani.MucjamMufahras/0852IbnHajarCasqalani.MucjamMufahras.Shamela0010714-ara1.completed</label><label>tok_length: 181066</label><label>status: pri</label><label>id: Shamela0010714</label><label>ed_info: محمد شكور المياديني :: مؤسسة الرسالة - بيروت :: http://www.worldcat.org/oclc/236032435</label><label>title_lat: Mucjam Mufahras</label><label>title_ar: المعجم المفهرس أو تجريد أسانيد الكتب المشهورة والأجزاء المنثورة</label><label>book: 0852IbnHajarCasqalani.MucjamMufahras</label><label>author_lat: Ibn Hajar Casqalani</label><label>author_ar: أبو الفضل أحمد بن علي بن محمد بن أحمد بن حجر العسقلاني (المتوفى: 852هـ)</label><label>date: 0852</label><label>versionUri: 0852IbnHajarCasqalani.MucjamMufahras.Shamela0010714-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "023", "024", "000", "026", "000", "028", "000", "030", "000", "032", "000", "000", "000", "000", "037", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "075", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "093", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "127", "000", "130", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "151", "000", "000", "000", "000", "000", "000", "000", "000", "161", "162", "000", "000", "000", "000", "000", "000", "169", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "189", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "205", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "219", "000", "000", "000", "224", "000", "000", "000", "000", "000", "000", "231", "232", "233", "234", "235", "236", "000", "000", "239", "240", "241", "000", "000", "000", "245", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "268", "000", "000", "271", "272", "273", "274", "275", "276", "277", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "301", "000", "000", "000", "000", "000", "307", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "322", "323", "324", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "351", "000", "000", "354", "355", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "383"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
