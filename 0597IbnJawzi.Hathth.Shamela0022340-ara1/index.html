<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">الباب الأول في الحث على حفظ العلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">الباب الثاني في صفة من هو أهل للحفظ من حيث الصورة والحلية ومن ليس أهلا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">فصل الحفظ يبدأ منذ الصغر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">فصل تربية الصبي على الحفظ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">الباب الثالث في الأدوية المعينة على الحفظ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">فصل في ذكر مطاعم تستعمل للحفظ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">الباب الرابع في بيان طريق أحكام المحفوظ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">الباب الخامس في ذكر الأوقات التي يكرر فيها المحفوظات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">الباب السادس في الإعلام بما ينبغي تقديمه من المحفوظات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">الباب السابع في ذكر الحفاظ المبرزين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">حرف الألف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">أحمد بن حنبل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">أحمد بن أبي خيثمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">أحمد بن يحيى ثعلب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">أحمد بن محمد بن هانئ «أبو بكر الأثرم»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">أحمد بن نصر بن إبراهيم «أبو عمرو الخفاف»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">أحمد بن شعيب «أبو عبد الرحمن النسائي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">أحمد بن إسحاق بن البهلول «أبو جعفر التنوخي القاضي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">أحمد بن محمد بن الحسن «أبو حامد بن الشرقي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">أحمد بن محمد بن سعيد «أبو العباس بن عقدة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">أحمد بن محمد بن دوست العلاف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">أحمد بن الحسين «أبو الطيب المتنبي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">أحمد بن محمد «أبو بكر البرقاني»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">أحمد بن علي بن ثابت الخطيب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">إبراهيم بن الحسين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">إبراهيم بن أورمة الأصبهاني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">إسماعيل بن يوسف «أبو علي الديلمي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">إسحاق بن راهويه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">حرف الباء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">بكر بن محمد الحنفي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">حرف الجيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">جعفر بن محمد الفريابي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">حرف الحاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">الحسن بن علي بن شبيب «أبو علي المعمري»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">الحسن بن ms10 سفيان «أبو العباس النسوي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">الحسين بن محمد بن حاتم بن يزيد «الملقب بعبيد العجل»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">الحسين بن علي بن يزيد «أبو علي النيسابوري»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">الحسين بن أحمد بن بكير بن عبد الله الحافظ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">حرف السين.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">حرف السين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">سعيد بن المسيب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">سليمان بن مهران الأعمش</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">سليمان بن داود الطيالسي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">سليمان بن الأشعث «أبو داود السجستاني»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">سليمان بن أحمد الطبراني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">سفيان الثوري</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">حرف الشين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">شعبة بن الحجاج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">حرف الصاد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">صالح بن محمد «أبو علي الأسدي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">حرف الطاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">طلحة بن عمرو</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">حرف العين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">عبد الله بن أحمد بن محمد بن حنبل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">عبد الله بن أحمد بن موسى القاضي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">عبد الله بن سليمان بن الأشعث «أبو بكر بن أبي داود السجستاني»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">عبد الله بن محمد بن عبد العزيز البغوي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">عبيد الله بن عبد الكريم بن يزيد «أبو زرعة الرازي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">عبد الرحمن بن أحمد بن عبد الله «أبو عبد الله الختلي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">عبد الرحمن بن مهدي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">عبد الملك بن قريب الأصمعي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">عبد الغني بن سعيد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">عامر الشعبي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">عاصم بن علي «أبو الحسن الواسطي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">علي بن المديني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">علي بن عمر الدارقطني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">علي بن محمد بن أبي الفهم «أبو القاسم التنوخي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">حرف الفاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">الفضل بن دكين «أبو نعيم»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">حرف القاف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">قتادة بن دعامة «أبو الخطاب السدوسي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">حرف الميم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">محمد بن مسلم «أبو بكر الزهري»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">محمد بن عمر الواقدي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">محمد بن إسماعيل البخاري</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">محمد بن مسلم بن وارة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">محمد بن إدريس الرازي «أبو حاتم»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">محمد بن أبي بكر بن أبي خيثمة «أبو عبد الله»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">محمد بن جرير «أبو جعفر الطبري»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">محمد بن إسحاق بن خزيمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">محمد بن محمد بن سليمان الباغندي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">محمد ms22 بن نصر «أبو عبد الله المروزي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">محمد بن القاسم «أبو بكر الأنباري»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">محمد بن عبد الواحد بن أبي هاشم «أبو عمر»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">محمد بن أحمد بن إبراهيم العسال الأصبهاني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">محمد بن سالم «أبو بكر الجعابي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">محمد بن الحسين «أبو الفتح الأزدي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">محمد بن المظفر «أبو الحسين»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head88">محمد بن إسحاق بن منده «أبو عبد الله الأصبهاني»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head89">محمد بن عبد الله «أبو عبد الله الحاكم النيسابوري»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head90">محمد بن أحمد «أبو الفتح بن أبي الفوارس»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head91">محمد بن علي «أبو عبد الله الصوري»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head92">مسلم بن الحجاج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head93">موسى بن هارون «أبو عمران»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head94">المعافى بن زكريا الجريري</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head95">حرف الهاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head96">هشيم بن بشير الواسطي:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head97">هشام بن محمد بن السائب الكلبي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head98">هبة الله بن الحسين بن منصور «ابن القاسم اللالكائي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head99">حرف الياء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head100">يحيى بن سعيد القطان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head101">يحيى بن محمد بن صاعد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head102">يعقوب بن إبراهيم «أبو يوسف القاضي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head103">يزيد بن هارون</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 33610</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Jawzi</label><label>tags: CENT0600 :: _ADAB :: _ADHKAR :: _RAQAIQ :: GAL@literature-islamic :: GAL@1000-1258CE :: GAL@polyhistors :: GAL@hadith :: GAL@literature-arabic :: GAL@period-postclassical :: GAL@encyclopaedias :: Shamela@الرقاق والآداب والأذكار</label><label>url: https://raw.githubusercontent.com/OpenITI/0600AH/master/data/0597IbnJawzi/0597IbnJawzi.Hathth/0597IbnJawzi.Hathth.Shamela0022340-ara1</label><label>tok_length: 8212</label><label>status: pri</label><label>id: Shamela0022340</label><label>ed_info: المستشار الدكتور فؤاد عبد المنعم :: مؤسسة شباب الجامعة، الاسكندرية</label><label>title_lat: Hathth</label><label>title_ar: الحث على حفظ العلم وذكر كبار الحفاظ</label><label>book: 0597IbnJawzi.Hathth</label><label>author_lat: Ibn Jawzi</label><label>author_ar: جمال الدين أبو الفرج عبد الرحمن بن علي بن محمد الجوزي (المتوفى: 597هـ)</label><label>date: 0597</label><label>versionUri: 0597IbnJawzi.Hathth.Shamela0022340-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "031", "032", "033", "034", "035", "036", "037", "039", "040", "041", "043", "044", "045", "047", "048", "049", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
