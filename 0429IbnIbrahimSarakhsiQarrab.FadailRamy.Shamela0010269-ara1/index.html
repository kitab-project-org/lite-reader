<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">1 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">[ص: 40]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">الله عز وجل يدخل بالسهم الواحد ثلاثة الجنة: صانعه محتسبا، والمعين به، والرامي به في سبيل </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">2 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">[ص: 43]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">" إن الله عز وجل يدخل بالسهم الواحد ثلاثة الجنة: الرامي به، والممد به، والمحتسب </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">3 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">[ص: 44]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">: «إن الله عز وجل يدخل بالسهم الواحد الجنة من عمله في سبيله، ومن قوى به في سبيل الله عز وجل، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">4 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">: " كل شيء ليس من ذكر الله عز وجل فهو لغو وسهو إلا أربع خصال: مشي الرجل بين الغرضين، وتأديب </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">5 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">[ص: 46]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">: " كل شيء ليس من ذكر الله، فهو لهو أو سهو غير أربع خصال: تأديب الرجل فرسه، وملاعبته أهله، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">6 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">[ص: 48]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">: «نعم لهو المؤمن الرمي، ومن ترك الرمي بعدما علمه، فهو نعمة تركها»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">7 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">: «لن أترك الرمي أبدا، وإن كانت يدي مقطوعة بعد شيء سمعته من رسول الله صلى الله عليه </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">8 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">: «من تعلم الرمي ثم تركه فقد عصاني»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">9 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">: " {وأعدوا لهم ما استطعتم من قوة} [الأنفال: 60] ألا إن القوة الرمي، ألا إن القوة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">10 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">: " {وأعدوا لهم ما استطعتم من قوة} [الأنفال: 60] ألا إن القوة الرمي، ألا إن القوة الرمي، ألا </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">11 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">: " {وأعدوا لهم ما استطعتم ms2 من قوة} [الأنفال: 60] أنه قال: القوة الرمي "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">12 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">: " إن كل لهو لهى به المؤمن باطل، إلا في ثلاث: رميه الصيد بقوسه، وتأديبه فرسه، وملاعبته </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">13 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">[ص: 55]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">: " اللهو في ثلاث: تأديبك فرسك، ورميك بقوسك - أو قال نصلك - وملاعبتك أهلك "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">14 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">: «كل لهو باطل، إلا ركوب الخيل والرمي، ولهو الرجل مع أهله، فعليكم بركوب الخيل والرمي، والرمي </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">15 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">[ص: 56]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">: «أن علموا أولادكم السباحة والرمي والفروسية»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">16 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">: «كان رسول الله صلى الله عليه وسلم يعجبه أن يكون الرجل سابحا ms3 راميا»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">17 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">[ص: 57]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">: «من رمى بسهم في سبيل الله، فهو له درجة في الجنة، ومن بلغ بسهم في سبيل الله فهو عدل محرر» </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">18 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">: «من رمى بسهم في سبيل الله فأصاب أو أخطأ أو قصر، فكأنما أعتق رقبة، ومن أعتق رقبة كانت فكاكه </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">19 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">[ص: 60]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">: «من بلغه برميه فله درجة في الجنة» . فقال رجل: يا رسول الله، إن بلغته برمية فلي درجة في </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">[ص: 61]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">20 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">: «من رمى بسهم في سبيل الله، قصر أو بلغ، فله درجة في الجنة» قال: فرميت يومئذ ستة عشر </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">21 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">[ص: 62]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">: «قاتلوا أهل البغي فمن بلغ منهم فله درجة» . قالوا: يا رسول الله ما الدرجة؟ قال: ما بين </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">22 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">: «من رمى العدو بسهم ن فبلغ سهمه، أخطأ أو أصاب، فعدل رقبة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">23 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">[ص: 64]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">: «من رمى بسهم في سبيل الله، بلغه العدو، أو قصر، أخطأ أو أصاب، كان كعدل محرر من بني </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">24 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">: «أيما مسلم رمى بسهم في سبيل الله، فبلغ، مخطئا أو مصيبا، فله من الأجر كرقبة أعتقها من ولد </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">25 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">: «من رمى بسهم في سبيل الله، فبلغ أو قصر، كان ذلك السهم نورا يوم القيامة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">26 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">: «من رمى بسهم في سبيل الله أصاب أو أخطأ كان له مثل أجر عتق رقبة العضو بالعضو حتى الفرج </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">27 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">: «من رمى بسهم في سبيل الله عز وجل كان له نورا تاما»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">28 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">[ص: 68]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">: «ما بقي من رميك يا فلان؟» قال: لقد جفوته. فقال رسول الله صلى الله عليه وسلم: «أما إنها نعمة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">29 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">: «من أحسن الرمي، ثم تركه، فقد ترك نعمة من النعم»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">30 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">: «من ترك الرمي، بعد أن يحسنه فقد ترك سنة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">31 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">: «من تعلم الرمي فنسيه، كان نعمة أنعمها الله عليه فتركها»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">32 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">: «لصوت أبي طلحة في الجيش خير من مائة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">33 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">[ص: 72]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">: «لصوت أبي طلحة في الجيش خير من مئة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">34 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">[ص: 73]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">«صوت أبي طلحة في الجيش خير من مئة» وكان يجثو بين يدي النبي صلى الله عليه وسلم في الحرب </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">35 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">وكان إذا رمى يشرف النبي صلى الله عليه وسلم، فينظر إلى موضع نبله "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">36 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">: " كان يرمي بين يدي نبي الله صلى الله عليه وسلم، فجعل رسول الله صلى الله عليه وسلم يتطاول </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">نحري دون نحرك "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head88">37 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head89">[ص: 75]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head90">: نحري دون نحرك "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head91">38 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head92">[ص: 76]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head93">: «كل ما رد عليك قوسك»</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 8418</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Ibrahim Sarakhsi Qarrab</label><label>tags: CENT0500 :: _AJZA :: _HADITH :: GAL@literature-islamic :: GAL@1000-1258CE :: GAL@hadith :: GAL@literature-arabic :: GAL@period-postclassical :: GAL@persia :: Shamela@الأجزاء الحديثية</label><label>url: https://raw.githubusercontent.com/OpenITI/0450AH/master/data/0429IbnIbrahimSarakhsiQarrab/0429IbnIbrahimSarakhsiQarrab.FadailRamy/0429IbnIbrahimSarakhsiQarrab.FadailRamy.Shamela0010269-ara1</label><label>tok_length: 2274</label><label>status: pri</label><label>id: Shamela0010269</label><label>ed_info: مكتبة المنار، الأردن - الزرقاء</label><label>title_lat: Fadail Ramy</label><label>title_ar: فضائل الرمي في سبيل الله</label><label>book: 0429IbnIbrahimSarakhsiQarrab.FadailRamy</label><label>author_lat: Ibn Ibrahim Sarakhsi Qarrab</label><label>author_ar: أبو يعقوب إسحاق بن أبي إسحاق إبراهيم بن محمد ابن عبد الرحمن السرخسي الهروي، المعروف بـ القراب (المتوفى: 429هـ)</label><label>date: 0429</label><label>versionUri: 0429IbnIbrahimSarakhsiQarrab.FadailRamy.Shamela0010269-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
