<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">[نقد مراتب الإجماع]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">فإن الإجماع قاعدة من قواعد الملة الحنيفية، يرجع إليه، ويفزع نحوه، ويكفر من خالفه إذا قامت عليه الحجة بأنه إجماع.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">وقوم قالوا: الإجماع هو إجماع الصحابة رضي الله عنهم فقط</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">إنما نعني بقولنا العلماء من حفظ عنه الفتيا. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">وأجمعوا أنه لا يجوز التوضؤ بشيء من المائعات وغيرها، حاشا الماء والنبيذ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">وأما الماء الجاري فاتفقوا على جواز استعماله ما لم تظهر فيه نجاسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">واتفقوا على أن غسل الذراعين إلى منتهى المرفقين فرض في الوضوء. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">واتفقوا على أن الاستنجاء بالحجارة وبكل طاهر - ما لم يكن طعاما أو رجيعا أو نجسا أو جلدا أو عظما أو فحما أو حممة - جائز</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">واتفقوا أن كل إناء - ما لم يكن فضة ولا ذهبا ولا صفرا ولا رصاصا ولا نحاسا ولا مغصوبا ولا إناء كتابي ولا جلد ميتة ولا جلد ما لا يؤكل لحمه وإن ذكي - فإن الوضوء منه والأكل والشرب جائز كل ذلك. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">وأجمعوا أن الحائض - وإن رأت الطهر - ما لم تغسل فرجها أو تتوضأ فوطؤها حرام. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">واتفقوا أن الصلاة لا تسقط، ولا يحل تأخيرها عمدا عن وقتها، عن العاقل البالغ بعذر أصلا، وأنها تؤدى على قدر طاقة المرء من جلوس واضطجاع بإيماء، وكيف أمكنه. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">واتفقوا أن المرأة لا تؤم الرجال وهم يعلمون أنها امرأة، فإن فعلوا فصلاتهم فاسدة بالإجماع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">وروي ms04 عن أشهب أن من ائتم بامرأة وهو لا يدري حتى خرج الوقت ثم علم فصلاته تامة، وكذا من ائتم بكافر وهو لا يعلم أنه كافر. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">واتفقوا على أن وضع الرأس في الأرض والرجلين في السجود فرض. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">واتفقوا على أن الفكرة في أمور الدنيا لا تفسد الصلاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">واتفقوا على جواز الصلاة في كل مكان ما لم يكن جوف الكعبة، أو الحجر، أو ظهر الكعبة، أو معاطن الإبل، أو مكانا فيه نجاسة، أو حماما، أو مقبرة، أو إلى قبر، أو عليه، أو مكانا مغصوبا يقدر على مفارقته، أو مكانا يستهزأ فيه بالإسلام، أو مسجد الضرار، أو بلاد ثمو</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">واتفقوا على أن صلاة العيدين، وكسوف الشمس، وقيام ليالي رمضان، ليست فرضا، وكذلك التهجد على غير النبي صلى الله عليه وسلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">واتفقوا أن كل صلاة - ما عدا الصلوات الخمس، وعدا الجنائز، والوتر، وما نذره المرء - ليست فرضا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">واتفقوا أن من أسقط الجلسة الوسطى من صلاة الظهر والعصر والمغرب والعتمة ساهيا ms05 أن عليه سجدتي السهو</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">واتفقوا أن في مائتي درهم خمسة دراهم، ما لم يكن حلي امرأة، أو حلية سيف، أو منطقة، أو مصحفا، أو خاتما. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">واتفقوا على أن وقت الوقوف ليس قبل الظهر في التاسع من ذي الحجة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">واتفقوا أنه من فعل - من كل ما ذكرنا أنه يجتنبه في إحرامه - شيئا عامدا أو ناسيا أنه لا يبطل حجه ولا إحرامه.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">قال: ومن عجائب الدنيا أن الآية وردت كما تلونا، فأبطلوا الحج بالرفث، ولم يبطلوه بالفسوق.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">واتفقوا أن كل صدقة واجبة في الحج أو إطعام، أنه إن أداه ms06 بمكة أجزأه، واختلفوا فيمن أدى ذلك في غير مكة - حاشا جزاء الصيد - فإنهم اتفقوا أنه لا يجزئ إلا بمكة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">واتفقوا أن من يوم النحر - وهو العاشر من ذي الحجة - إلى انسلاخ ذي الحجة وقتا لطواف الإفاضة، ولما بقي من سنن الحج. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">واتفقوا على أن إيجاب الهدي فرض على المحصر. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">واتفقوا على أن من حلف لخصمه دون أن يحلفه حاكم أو من حكماه على أنفسهما أنه لا يبرأ بتلك اليمين من الطلب. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">وأجمعوا على أن كل من لزمه حق في ماله أو ذمته لأحد فرض عليه أداء الحق إلى من هو له عليه - إذا أمكنه ذلك وبقي له بعد ذلك ما يعيش به أياما هو ومن تلزمه نفقته. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">وأجمعوا أن المملوكة لا يجبر سيدها على إنكاحها، ولا على أن يطأها - وإن طلبت هي ذلك - ولا على بيعها من أجل منعه لها الوطء والإنكاح. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">واتفقوا أن التعريض للمرأة وهي في العدة حلال إذا كانت العدة في غير رجعية أو كانت من وفاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">واتفقوا أن الطلاق إلى أجل أو بصفة واقع إن وافق وقت طلاق، ثم اختلفوا في وقت وقوعه: فمن قائل الآن، ومن قائل هو إلى أجله. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">واتفقوا أن عدة المسلمة الحرة المطلقة - التي ليست حاملا، ولا مستريبة، وهي لم تحض أو لا تحيض إلا أن البلوغ متوهم منها - ثلاثة أشهر متصلة. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">واتفقوا أن استقراض ما عدا ms09 الحيوان جائز.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">واتفقوا أن الوصية بالمعاصي لا تجوز، وأن الوصية بالبر وبما ليس ببر ولا معصية ولا تضييعا للمال جائزة. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">واتفقوا على أنه إن أعطى - يعني: من يقبل منه الجزية عن نفسه وحدها - أربعة مثاقيل ذهب في كل عام، على أن يلتزموا ما ذكره من شروط الذمة، فقد حرم دم من وفى بذلك وماله وأهله وظلمه. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">واتفقوا أنه لا ينفل من ساق مغنما أكثر من ربعه في الدخول، ولا أكثر من ثلثه في الخروج. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">واتفقوا أن الحر البالغ العاقل الذي ليس بسكران إذا أمن أهل الكتاب الحربيين على أداء الجزية على الشروط التي قدمنا، أو على الجلاء، أو أمن سائر الكفار على الجلاء بأنفسهم وعيالهم وذراريهم وترك بلادهم واللحاق بأرض حرب أخرى لا بأرض ذمة ولا ب ms10</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">واتفقوا أن أولاد أهل الجزية ومن تناسل منهم فإن الحكم الذي عقده أجدادهم وإن بعدوا جار على هؤلاء لا يحتاج إلى تجديده مع من حدث منهم. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">واتفقوا أنه لا يجوز أن يكون على المسلمين في</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">وقت واحد في جميع الدنيا إمامان، لا متفقان ولا مفترقان، ولا في مكانين ولا في مكان واحد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">واتفقوا أنه إذا كان الإمام من ولد علي، وكان عدلا، ولم تتقدم بيعته بيعة أخرى لإنسان حي، وقام عليه من هو دونه، أن قتال الآخر واجب. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">وإنما أدخلنا هذا الاتفاق على جوازه لخلاف الزيدية: هل تجوز إمامة غير ms11 علوي أم لا؟ وإن كنا مخطئين لهم في ذلك، ومعتقدين صحة بطلان هذا القول، وأن الإمامة لا تتعدى فهر بن مالك، وأنها جائزة في جميع أفخاذهم، ولكن لم يكن بد في صفة الاجماع الجاري عند ا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">واتفقوا أن من خالف الإجماع المتيقن بعد علمه بأنه إجماع فإنه كافر. </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">واتفقوا أن السمن إذا وقع فيه فأر أو فأرة، فمات أو ماتت وهو مائع أنه لا يؤكل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">واتفقوا أن من نذر معصية فإنه لا يجوز له الوفاء بها.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">واتفقوا أن ازالة المرء عن نفسه ظلما بأن يظلم من لم يظلمه قاصدا إلى ذلك لا يحل، وذلك مثل أن يحل عدو المسلمين بساحة قوم، فيقول أعطوني مال فلان، أو أعطوني فلانا، وهو لا حق له عنده بحكم دين الإسلام، أو قال أعطوني امرأة أو أمة فلان، أو افعلوا كذا </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">اتفقوا أن الله وحده لا شريك له، خالق كل شيء غيره،</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 23665</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Taymiyya</label><label>tags: CENT0800 :: _IBNTAYMIYYA :: GAL@nodata :: Shamela@كتب ابن تيمية</label><label>url: https://raw.githubusercontent.com/OpenITI/0750AH/master/data/0728IbnTaymiyya/0728IbnTaymiyya.NaqdMaratibIjmac/0728IbnTaymiyya.NaqdMaratibIjmac.Shamela0008630-ara1</label><label>tok_length: 5835</label><label>status: pri</label><label>id: Shamela0008630</label><label>ed_info: دار ابن حزم، بيروت</label><label>title_lat: Naqd Maratib Ijmac</label><label>title_ar: نقد مراتب الإجماع</label><label>book: 0728IbnTaymiyya.NaqdMaratibIjmac</label><label>author_lat: Ibn Taymiyya</label><label>author_ar: تقي الدين أبو العباس أحمد بن عبد الحليم بن عبد السلام بن عبد الله بن أبي القاسم بن محمد ابن تيمية الحراني الحنبلي الدمشقي (المتوفى: 728هـ)</label><label>date: 0728</label><label>versionUri: 0728IbnTaymiyya.NaqdMaratibIjmac.Shamela0008630-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "000", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "304", "305", "306", "307", "308"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
