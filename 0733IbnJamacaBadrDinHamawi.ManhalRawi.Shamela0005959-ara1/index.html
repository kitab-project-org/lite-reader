<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">المقدمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">فروع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">الطرف الأول في الكلام على المتن والنظر في أقسامه وأنواعه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">القسم الأول الصحيح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">القسم الثاني الحديث الحسن ذكر الترمذي أنه يريد بالحسن أن لا يكون في إسناده متهم ولا يكون شاذا ويروى من غير وجه نحوه وقال الخطابي هو ما عرف مخرجه واشتهر رجاله قال وعليه مدار أكثر الحديث فالمدلس إذا لم يبين والمنقطع ونحوه مما لم نعرف مخرجه وقال بعض </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">فروع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">القسم الثالث في معرفة الحديث الضعيف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">وأما النظر في أنواع المتن فهي ثلاثون نوعا ونبدأ ب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">فروع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">النوع الخامس المقطوع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">النوع السادس المرسل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">فروع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">النوع السابع المنقطع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">النوع الثامن المعضل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">النوع التاسع المعنعن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">فرعان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">النوع العاشر المعلق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">فرع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">النوع الحادي عشر الشاذ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">النوع الثاني عشر المنكر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">النوع الثالث عشر الأفراد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">النوع الرابع عشر المعلل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">النوع الخامس عشر المضطرب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">النوع السادس عشر المدرج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">النوع السابع عشر المقلوب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">النوع الثامن عشر الموضوع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">النوع التاسع عشر المشهور</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">النوع الموفي العشرين والحادي والعشرون الغريب والعزيز</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">النوع الثاني والعشرون المصحف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">النوع الثالث والعشرون المسلسل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">النوع الخامس والسادس والسابع والعشرون الاعتبار والمتابعات والشواهد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">النوع الثامن والعشرون مختلف الحديث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">النوع التاسع والعشرون في الناسخ والمنسوخ الناسخ من الحديث هو كل حديث دل على رفع حكم شرعي سابق له ومنسوخه كل حديث رفع حكمه الشرعي بدليل شرعي متأخر عنه وهذا فن صعب مهم كان للشافعي فيه يد طولى وسابقة أولى وأدخل بعض أهل الحديث فيه ما ليس منه لخفاء معناه </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">النوع الموفي الثلاثين غريب اللفظ وفقهه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">الطرف الثاني في الإسناد وما يتعلق به والكلام فيه أحد عشر نوعا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">النوع الثاني الإسناد العالي والنازل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">النوع الثالث المزيد في الأسانيد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">النوع الرابع التدليس وهو قسمان تدليس الإسناد وتدليس الشيوخ الأول تدليس الإسناد وهو أن يروي عمن لقيه أو عاصره ما لم يسمعه منه موهما أنه سمعه منه ولا يقول أخبرنا وما في معناه ونحوه بل يقول قال فلان أو عن فلان أو أن فلانا قال وشبه ذلك ثم قد يكون بينهما </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">النوع الخامس تباعد وفاة الراويين عن شيخ واحد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">النوع السادس رواية الأقران</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">النوع السابع رواية الآباء عن الأبناء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">النوع الثامن رواية الأبناء عن الأباء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">النوع التاسع من لم يرو عنه إلا واحد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">النوع العاشر رواية الأكابر عن الأصاغر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">النوع الحادي عشر العنعنة في السند وهو السند الذي يقال فيه فلان عن فلان وقد تقدم ذكره في أنواع المتن فلا حاجة إلى إعادته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">الطرف الثالث في تحمل الحديث وطرق نقله وضبطه وروايته وآداب ذلك وما يتعلق به والكلام فيه في ms31 ستة أنواع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">فروع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">الطريق الثالث الإجازة المجردة وهي أنواع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">فروع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">الطريق الرابع المناولة وهي نوعان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">الطريق الخامس كتابة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">الطريق السادس الإعلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">الطريق السابع الوصية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">الطريق الثامن الوجادة ms40</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">النوع الثالث في كتابة الحديث وضبطه وفيه فصول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">السادس التصحيح والتمريض والتضبيب من شأن المتقنين فالتصحيح كتابة صح على كلام صح رواية ومعنى لكنه عرضة للشك أو الخلاف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">النوع الرابع في رواية الحديث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">النوع الخامس في أدب الراوي وفيه فصول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">النوع السادس في أدب طالب الحديث قد تقدمت جمل من هذا النوع ووراء ذلك فضول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">النوع الثاني في معرفة التابعين وفيه فصول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">النوع الثالث في طبقات الرواة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">النوع الرابع في الأسماء والكنى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">النوع الخامس في اتحاد كنية جمع ممن عرف واشتهر باسمه دون كنيته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">النوع السادس في الألقاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">النوع السابع المختلف والمؤتلف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">القسم الثاني الخصوص وهو ضبط ما في الصحيحين والموطأ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">الأنساب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">النوع الثامن المتفق والمفترق هو ما اتفق خطا ولفظا وافترق مسماه وللخطيب فيه كتاب وهو أقسام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">النوع التاسع ما تركب من النوعين قبله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">النوع العاشر المتشابهون في الاسم واسم الأب المتمايزون في التقديم والتأخير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">النوع الحادي عشر من نسب إلى غير أبيه هم أقسام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">النوع الثاني عشر النسب المخالفة لظاهرها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">النوع الثالث ms70 عشر الأسماء المفردة وهو أقسام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">القسم الثاني الكنى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">القسم الثالث الألقاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">النوع الرابع عشر من ذكر بأسماء أو صفات مختلفة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">النوع الخامس عشر معرفة الموالي أهم هذا النوع المنسوبون إلى القبائل مطلقا وهم مواليهم ثم قد يقال مولى فلان ويراد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">النوع السادس عشر معرفة الأسماء المبهمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">النوع السابع عشر معرفة الثقات والضعفاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">النوع الثامن عشر فيمن خلط من الثقات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">النوع التاسع عشر أوطان الرواة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">النوع العشرون في الإخوة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">النوع الحادي والعشرون في التواريخ والوفيات وهو فن مهم به يعرف اتصال الحديث وانقطاعه وادعى قوم رواية عن ناس فنظر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">فصل الصحيح أن سن سيدنا رسول الله صلى الله عليه وسلم وسن أبي بكر وعمر ثلاث وستون سنة وقبض ضحى يوم الاثنين لاثنتى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">فصل ذكر ابن الصلاح أن حكيم بن حزام وحسان بن ثابت عاشا ستين في الجاهلية وستين في الإسلام وماتا سنة أربع وخمسين وهذا فيه نظر لأن إسلام حكيم عام الفتح سنة ثمان وعاش حسان وأبوه ثابت وجده المنذر وأبو جده حرام كل واحد منهم عاش مئة وعشرين سنة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">فصل أصحاب كتب الحديث المعتمدة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">فصل سبعة من الحفاظ بعدهم أحسنوا التصنيف وعظم به الانتفاع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">القعدة سنة خمس وثمانين وثلاث مئة</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 95882</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Jamaca Badr Din Hamawi</label><label>tags: CENT0800 :: _CULUM :: _HADITH :: _MUSTALAHAT :: GAL@nodata :: Shamela@علوم الحديث</label><label>url: https://raw.githubusercontent.com/OpenITI/0750AH/master/data/0733IbnJamacaBadrDinHamawi/0733IbnJamacaBadrDinHamawi.ManhalRawi/0733IbnJamacaBadrDinHamawi.ManhalRawi.Shamela0005959-ara1</label><label>tok_length: 22883</label><label>status: sec</label><label>id: Shamela0005959</label><label>ed_info: د. محيي الدين عبد الرحمن رمضان :: دار الفكر - دمشق</label><label>title_lat: Manhal Rawi</label><label>title_ar: المنهل الروي في مختصر علوم الحديث النبوي</label><label>book: 0733IbnJamacaBadrDinHamawi.ManhalRawi</label><label>author_lat: Ibn Jamaca Badr Din Hamawi</label><label>author_ar: أبو عبد الله، محمد بن إبراهيم بن سعد الله بن جماعة الكناني الحموي الشافعي، بدر الدين (المتوفى: 733هـ)</label><label>date: 0733</label><label>versionUri: 0733IbnJamacaBadrDinHamawi.ManhalRawi.Shamela0005959-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
