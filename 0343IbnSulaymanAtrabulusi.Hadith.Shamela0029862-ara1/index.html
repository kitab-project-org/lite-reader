<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">1 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">: «ما تصومون؟» قالوا: يا رسول الله يوم عاشوراء، وهو اليوم الذي هزم موسى فرعون فيه، فنحن نصوم </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">2 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">" ما يحل لنا من الميتة؟ قال: ما طعامك؟ قال: قلت: نغتبق، ونصطبح.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">3 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">: «أفطر الحاجم والمحجوم»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">4 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">: «أفطر الحاجم والمحجوم»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">5 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">: «أفطر الحاجم والمحجوم»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">6 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">: «من بنى مسجدا بنى الله عز وجل له بيتا في الجنة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">7 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">: «أتاني جبريل صلى الله عليه وسلم بالبراق» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">8 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">: " كنت أمشي مع رسول الله صلى الله عليه وسلم وعليه برد نجراني غليظ الحاشية، فأدركه أعرابي، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">9 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">: " خير هذه الأمة بعد نبيها: أبو بكر وعمر رضي الله عنهما "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">10 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">عاد مريضا فرآه يصلي على وسادة، فأخذها فرمى بها، وقال: «صل بالأرض إن استطعت، وإلا فأومئ </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">11 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">: «الذباب كله في النار إلا النحلة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">12 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">: «الكلام ينقض الصلاة، ولا ينقض الوضوء» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">13 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">كسب الحجام، قال: نا قتادة، عن أبي طالب، قال: قال ابن عباس: «لو كان حراما لم </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">14 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">أن أبيع غلامين أخوين، فبعتهما، وفرقت بينهما، فذكرت ذلك للنبي صلى الله عليه وسلم ms3 , فقال: </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">15 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">أحساب أهل الدنيا هذا المال»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">16 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">يصفر لحيته، ويلبي إذا وضع رجله في الغرز , قال: فقيل له في ذلك، فقال «رأيت النبي صلى الله </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">17 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">: «من جمع طعاما أربعين يوما يتربص به فقد برئ من الله تعالى وبرئ الله عز وجل منه، وأيما أهل </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">18 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">: «لا يحل لرجل أو قال لامرئ مسلم أن يصلي وهو حاقن حتى يتخفف , ولا يحل لامرئ مسلم أن يؤم قوما </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">19 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">: «المؤمن الذي يخالط الناس ويصبر على أذاهم أعظم أجرا من الذي لا يخالط الناس، ولا يصبر على </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">20 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">: «من فتح له في الدعاء منكم فتحت له أبواب الجنة، وما سئل الله تعالى شيئا أحب إليه من أن يسأل </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">21 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">لأغزون قريشا، والله لأغزون قريشا، والله لأغزون قريشا» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">22 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">: «أهدى ملك الروم إلى رسول الله صلى الله عليه وسلم جرة زنجبيل، فقسمها رسول الله صلى الله </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">23 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">«كره السدل في الصلاة» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">24 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">: «ملت إلى رسول الله صلى الله عليه وسلم والقمل يتناثر على ms5 وجهي، فأمرني أن أحلق رأسي وأنسك </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">25 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">: «لا يزال أهل المغرب ظاهرين على الحق حتى تقوم الساعة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">26 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">رضا الرب عز وجل من رضا الوالد، وسخط الله عز وجل من سخط الوالد»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">27 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">: «لو تعلمون ما أعلم لضحكتم قليلا ولبكيتم كثيرا»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">28 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">الركعتين قبل المغرب، فقال: «ما رأيت أحدا صلاهما على عهد رسول الله صلى الله عليه وسلم ولا </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">29 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">: «تسموا باسمي، ولا تكنوا بكنيتي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">30 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">: " قام النبي صلى الله عليه وسلم حتى هممت هم السوء، قلت: وما هممت؟ يعني أن أجلس </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">31 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">: «إذا أتي أحدكم بالطيب فليصب منه»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">32 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">: " ألا تقولوا: سبحان الله وبحمده، فبكل واحدة عشرة، وبكل عشرة مائة، وبكل مائة ألف، ومن زاد </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">33 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">: «لا يدخل الجنة من كان في قلبه مثقال حبة من خردل من كبر» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">34 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">: «كل بيعين لا بيع بينهما حتى يتفرقا إلا بيع الخيار»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">35 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">: «على سلامى ابن آدم ثلاث مائة وستون عطاء , عليه في كل يوم لكل عظم صدقة، فأمره بالمعروف </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">36 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">: " جعلت لي الأرض كلها مسجدا وطهورا، وبعثت إلى الأحمر والأسود، ونصرت بالرعب على عدوي مسيرة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">37 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">: «من صلى صلاتنا واستقبل قبلتنا وأكل ذبيحتنا فهو المسلم، له ما لنا وعليه ما </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">38 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">يقرأ في صلاة المغرب ليلة الجمعة ب قل يأيها الكافرون وقل هو الله أحد , وكان يقرأ في صلاة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">39 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">: «كلكم راع وكلكم مسئول، والأمير راع على الناس ومسئول عنهم، والرجل راع على أهل بيته ومسئول </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">40 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">: «من أخذ بركاب رجل لا يرجوه ولا يخافه غفر له»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">41 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">: «أنا خير شريك لا يصعد إلي من الرياء شيء»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">42 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">: «لا رقية إلا من عين أو حمة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">43 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">عاد رجلا من الأنصار، فقال: «ما تشتهي؟» فقال: أشتهي خبز بر.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head88">44 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head89">مريم عليها السلام سألت ربها عز وجل أن يطعمها لحما ليس فيه دم فأطعمها </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head90">45 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head91">أكثر الناس شبعا في الدنيا أكثرهم جوعا في الآخرة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head92">46 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head93">«إذا أتي بالباكورة دفعها إلى أصغر من يحضره من الولدان»</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 10194</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Sulayman Atrabulusi</label><label>tags: CENT0400 :: _AJZA :: _HADITH :: _MAKHTUTAT :: _SUNNI :: _TARAJIM :: GAL@nodata :: Shamela@مخطوطات حديثية</label><label>url: https://raw.githubusercontent.com/OpenITI/0350AH/master/data/0343IbnSulaymanAtrabulusi/0343IbnSulaymanAtrabulusi.Hadith/0343IbnSulaymanAtrabulusi.Hadith.Shamela0029862-ara1</label><label>tok_length: 2794</label><label>status: sec</label><label>id: Shamela0029862</label><label>ed_info: مخطوط نشر في برنامج جوامع الكلم المجاني التابع لموقع الشبكة الإسلامية</label><label>title_lat: Hadith</label><label>title_ar: جزء من حديث خيثمة الأطرابلسي</label><label>book: 0343IbnSulaymanAtrabulusi.Hadith</label><label>author_lat: Ibn Sulayman Atrabulusi</label><label>author_ar: أبو الحسن خيثمة بن سليمان بن حيدرة بن سليمان القرشي الشامي الأطرابلسي (المتوفى: 343هـ)</label><label>date: 0343</label><label>versionUri: 0343IbnSulaymanAtrabulusi.Hadith.Shamela0029862-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "001"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
