<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">CHECK مقدمة المؤلف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">CHECK 1 - باب: ما جاء في تخصيص قريش بالتقديم والاتباع والتعلم منهم؛ لكثرة علمهم ورجحان عقلهم وقوة رأيهم، وما في بعضه من الإشارة إلى الشافعي رحمه الله، لزيادة علمه من بين قريش بعد الصحابة رضي الله عنهم، وانتشاره في مشارق الأرض ومغاربها وانتفاع المسلمين به</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">CHECK 2 - باب: ما جاء في قول الله عز وجل: {وإنه لذكر لك ولقومك} وما للعرب ثم لقريش فيه من الشرف، وما وجب بذلك على المسلمين من حبهم، والشافعي من جملتهم رحمه الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">CHECK 3 - باب: ما جاء في تخصيص بني هاشم بالاصطفاء، وفي تخصيصهم تخصيص بني المطلب الذين ينتمي إليهم الشافعي رحمه الله، لقول النبي صلى الله عليه وسلم: «بنو هاشم وبنو المطلب شيء واحد»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">CHECK 4 - باب: ما جاء في تخيير القبائل، وأن خيارهم في الجاهلية خيارهم في الإسلام إذا فقهوا، وفي ذلك إشارة إلى الشافعي، رحمه الله، لكونه من خيار القبائل، ثم ما ظهر من فقهه في دين الله، تبارك وتعالى، وتفقهه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">CHECK 5 - باب: ما جاء في تفضيل أهل اليمن بالإيمان والفقه والحكمة. ومكة والمدينة يمانيتان. ثم الإشارة إلى عالم أهل المدينة، ومولد الشافعي بغزة، وهي من الأرض المقدسة، وعداد أهلها في اليمن ومنشؤه بمكة والمدينة، وأكثر علمه مأخوذ من أهل مكة والمدينة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">CHECK 6 - باب: ما جاء في إخبار المصطفى، صلى الله عليه وسلم، بأنه يبعث لهذه الأمة على رأس كل مائة سنة من يجدد لها دينها، وتأويل من تأوله على رأس المائتين بالشافعي، رحمه الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">CHECK 7 - باب: ما حضرني فيمن آذى قرابة رسول الله، صلى الله عليه وسلم، أو أراد هوانهم، أو بغاهم العواثر، مع ما فيه من البيان: أن قريشا أهل أمانة، وأن رحم النبي، صلى الله عليه وسلم، موصولة في الدنيا والآخرة، وأن سببه ونسبه لا ينقطعان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">CHECK 8 - باب: ما جاء في مولد الشافعي المطلبي، رحمه الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">CHECK 9 - باب: ما جاء في نسب الشافعي، رضي الله عنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">CHECK 10 - باب: ما جاء في تسليمه إلى المعلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">CHECK 11 - باب: ما جاء في اشتغاله بتعلم الأدب والشعر، وسبب أخذه في تعلم العلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">CHECK 12 - باب: ما جاء في رحلته إلى أبي عبد الله: مالك بن انس، الإمام رحمه الله، في تعلم العلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">CHECK 13 - باب: ما جاء في خروجه إلى اليمن ومقامه بها، ثم في حمله من اليمن إلى هارون، وما جرى بينه وبين محمد بن الحسن من المناظرة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">CHECK 14 - باب: ما جاء في رؤيا الشافعي وهو في الحبس، وتصديق الله سبحانه رؤياه فيما عبر به</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">CHECK 15 - باب: ما يستدل به على كبير محل الشافعي عند هارون الرشيد بعد ما جرى مما قدمنا ذكره، ثم عند المأمون</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">CHECK 16 - باب: ما يستدل به على عود الحال فيما بين الشافعي وبين محمد ابن الحسن، رحمهما الله، إلى الجميل، وتعظيم كل واحد منهما صاحبه وتوقيره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">CHECK 17 - باب: ما جاء في كتبة الشافعي كتب محمد بن الحسن؛ ليعلم أقاويل أهل العراق فيمكنه أن يناظرهم، ويناقضهم بما يخالف منها أصولهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">CHECK 18 - باب: ما جاء في صحة نية الشافعي، وجميل قصده في وضع الكتب ومناظرة من خالفه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">CHECK 19 - باب: ما جاء في حسن مناظرة الشافعي، رحمه الله، وغلبته بالعلم، والبيان كل من ناظره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">CHECK 20 - باب: ما جاء في قدوم الشافعي، رضي الله عنه، العراق، أيام المأمون للتدريس والتعليم، وانتفاع المسلمين بعلمه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">CHECK 21 - باب: ما جاء في سبب تصنيف الشافعي، رحمه الله، كتاب الرسالة القديمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">CHECK 22 - باب: ما جاء في قدوم الشافعي، رحمه الله، مصر وتصنيفه بها الكتب المصرية [الجديدة] وانتفاع المسلمين بها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">CHECK 23 - باب: ذكر عدد ما وصل إلينا من مصنفات الشافعي، رحمه الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">CHECK 24 - باب: ما يستدل به على رغبة علماء عصر الشافعي ومن بعدهم في كتبه، والاقتباس من علمه، والانتفاع به، وحسن الثناء عليه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">CHECK 25 - باب: ما يستدل به على حفظ الشافعي، رحمه الله تعالى، لكتاب الله، عز وجل، ومعرفته بالقراءات، وحسن صوته بالقراءة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">CHECK 26 - باب: ما يستدل به على معرفة الشافعي، رحمه الله، بتفسير القرآن ومعانيه، وسبب نزوله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">CHECK 27 - باب: ما يستدل به على معرفة الشافعي بمعاني أخبار رسول الله، صلى الله عليه وسلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">CHECK 28 - باب: ما يستدل به على فقه الشافعي، وتقدمه فيه، وحسن استنباطه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">CHECK 29 - باب: ما يستدل به على معرفة الشافعي بأصول الفقه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">CHECK 30 - باب: ما يستدل به على معرفة الشافعي بأصول الكلام، وصحة اعتقاده فيها ms203</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">CHECK 31 - باب: ما يؤثر عنه، رحمه الله، في دلائل التوحيد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">CHECK 32 - باب: ما يؤثر عن الشافعي، رحمه الله، في أسماء الله، وصفات ذاته، وأن القرآن كلام الله وكلامه من صفات ذاته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">CHECK 33 - باب: ما يؤثر عنه في إثبات المشيئة لله عز وجل وهي من صفات الذات، وفي إثبات القدر وخلق الأفعال، وعذاب القبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">CHECK 34 - باب: ما يؤثر عنه في إثبات الرؤية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">CHECK 35 - باب ms221: ما يؤثر عنه في تفضيل النبي، صلى الله عليه وسلم، على جميع الخلق، وإثبات الشفاعة له</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">CHECK 36 - باب: ما يؤثر عنه في الذنوب التي هي دون الكفر بالله عز وجل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">CHECK 37 - باب ms225: ما يؤثر عنه فيما يلحق الميت من فعل غيره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">CHECK 38 - باب: ما يؤثر عنه في الخلفاء الأربعة رضي الله عنهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">CHECK 39 - باب: ما يؤثر عنه في جملة الصحابة، رضي الله عنهم وعنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">CHECK 40 - باب: ما يؤثر عنه في قتال أمير المؤمنين: علي بن أبي طالب أهل القبلة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">CHECK 41 - باب: ما جاء عن الشافعي، رحمه الله، في مجانبة أهل الأهواء، وبغضه إياهم، وذمه كلامهم، وإزرائه بهم، ودقه عليهم، ومناظرته إياهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">CHECK 42 - باب: ما يستدل به على حسن اعتقاد الشافعي في متابعة السنة، ومجانبة البدعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">CHECK 43 - باب: ما يستدل به على معرفة الشافعي رضي الله عنه بالحديث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">CHECK 44 - باب: ما يستدل به على معرفة الشافعي رحمه الله بالجرح والتعديل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">CHECK 45 - باب ما يستدل به على معرفة الشافعي رضي الله عنه بصحة الحديث وعلته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">CHECK 46 - باب ما يستدل به على إتقان الشافعي رحمه الله في الرواية، ومذهبه في قبول الأخبار، واحتياطه فيها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">CHECK 47 - باب ما يستدل به على فصاحة الشافعي، ومعرفته باللغة وديوان العرب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">CHECK 48 - باب ذكر أبيات تؤثر مما أنشد الشافعي لنفسه أو أنشد لغيره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">CHECK 49 - باب ما يستدل به على معرفة الشافعي، رحمه الله، بالطب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">CHECK 50 - باب ما يستدل به على معرفة الشافعي بالنجوم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">CHECK 51 - باب ما يستدل به على معرفة الشافعي، رحمه الله، بالرمي والفروسية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">CHECK 52 - باب ما يؤثر عن الشافعي، رحمه الله، في فراسته وإصابته فيها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">CHECK 53 - باب ما يؤثر عن الشافعي، رحمه الله، في فضل العلم والترغيب في تعلمه وتعليمه والعمل به</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">CHECK 54 - باب ما يستدل به على اجتهاد الشافعي، رحمه الله، في طاعة ربه، وزهده في الدنيا وحضه عليه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">CHECK 55 - باب ما يستدل به على تمكن الشافعي، رحمه الله، من عقله، وما يؤثر عنه في الآداب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">CHECK 56 - باب ما يستدل به على سخاوة الشافعي، رحمه الله، وحسن جوده، وحسن عهده، وما يؤثر عنه في السخاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">CHECK 57 - باب ما يستدل به على شهادة أئمة المسلمين وعلمائهم للشافعي، رضي الله عنه، بالتقدم في العلم، واعترافهم له به، وحسن ثنائهم عليه، وجميل دعائهم له</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">CHECK 58 - باب ما يؤثر من خضاب الشافعي، رحمه الله، ولباسه وهيئته، ونقش خاتمه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">CHECK 59 - باب ذكر وصية الشافعي، رضي الله عنه وأرضاه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">CHECK 60 - باب ذكر مرض الشافعي، رحمه الله، وأوجاعه، ووفاته، وتربته، ومقدار سنه، وغير ذلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">CHECK 61 - باب ذكر أهل الشافعي وأولاده، رحمهم الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">CHECK 62 - باب ذكر من روى عنهم الشافعي من علماء الحجاز واليمن ومصر والعراق وخراسان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">CHECK 63 - باب ذكر أصحاب الشافعي، رحمه الله، الذين حملوا عنه العلم أو رووا عنه ms466 حديثا، أو حكوا عنه حكاية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">CHECK 64 - باب ذكر من قعد في مجلس الشافعي بعد وفاته، ومن قام من أصحابه بنشر علمه</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 714928</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Bayhaqi</label><label>tags:  :: Sham@التراجم والطبقات</label><label>url: https://raw.githubusercontent.com/OpenITI/0475AH/master/data/0458Bayhaqi/0458Bayhaqi.ManaqibShafici/0458Bayhaqi.ManaqibShafici.Sham19Y0022797-ara1</label><label>tok_length: 178531</label><label>status: pri</label><label>id: Sham19Y0022797</label><label>ed_info: السيد أحمد صقر :: الأولى، 1390 ه - 1970 م :: مكتبة دار التراث - القاهرة</label><label>title_lat: Manaqib Shafici</label><label>title_ar: مناقب الشافعي للبيهقي</label><label>book: 0458Bayhaqi.ManaqibShafici</label><label>author_lat: Bayhaqi</label><label>author_ar: البيهقي، أبو بكر :: أبو بكر أحمد بن الحسين البيهقي (384 - 458 ه)</label><label>date: 0458</label><label>versionUri: 0458Bayhaqi.ManaqibShafici.Sham19Y0022797-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["001", "003", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "001", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "312", "313", "314", "315", "316", "317", "318", "319", "320", "321", "322", "323", "324", "325", "326", "327", "328", "329", "330", "331", "332", "333", "334", "335", "336", "337", "338", "339", "340", "341", "342", "343", "344", "345", "346", "347", "348", "349", "350", "351", "352", "353", "354", "355", "356", "357", "358", "359", "360", "361", "362", "363", "364", "365", "366", "367", "368", "369", "370", "371", "372", "373", "374", "375", "376", "377", "378", "379", "380", "381", "382", "383", "384", "385", "386", "387", "388", "389", "390", "391", "392", "393", "394", "395", "396", "397", "398", "399", "400", "401", "402", "403", "404", "405", "406", "407", "408", "409", "410", "411", "412", "413", "414", "415", "416", "417", "418", "419", "420", "421", "422", "423", "424", "425", "426", "427", "428", "429", "430", "431", "432", "433", "434", "435", "436", "437", "438", "439", "440", "441", "442", "443", "444", "445", "446", "447", "448", "449", "450", "451", "452", "453", "454", "455", "456", "457", "458", "459", "460", "461", "462", "463", "464", "465", "466", "467", "468", "469", "470", "471", "472", "473", "474", "475", "476", "477", "478", "479", "480", "481", "482", "483", "484", "485", "486", "487", "488", "489", "490", "491", "492", "493", "494", "495", "496", "497", "498", "499", "500", "501", "502", "503", "504", "505", "506", "507", "508", "509", "510", "511", "512", "513", "514", "515", "516", "517", "518", "519", "520", "521", "522", "523", "524", "525", "526", "527", "528", "529", "530", "531", "532", "533", "534", "535", "536", "537", "538", "539", "540", "541", "542", "543", "544", "545", "546", "547", "548", "549", "550", "001", "002", "003", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "312", "313", "314", "315", "316", "317", "318", "319", "320", "321", "322", "323", "324", "325", "326", "327", "328", "329", "330", "331", "332", "333", "334", "335", "336", "337", "338", "339", "340", "341", "342", "343", "344", "345", "346", "347", "348", "349", "350", "351", "352", "353", "354", "355", "356", "357", "358", "359", "360", "361", "362", "363", "364", "365", "366", "367", "046", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "190", "192", "193", "194", "195", "196", "197", "198", "199", "200", "202", "203", "205", "206", "207", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "248", "250", "251", "252", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "312", "313", "314", "315", "316", "317", "318", "319", "320", "321", "322", "323", "324", "325", "326", "327", "328", "329", "330", "331", "332", "333", "334", "335", "336", "337", "338", "339", "340", "341", "342", "343", "344", "345", "346", "347", "348", "349", "350", "351", "352", "353", "354", "355", "356", "357", "358", "359", "360", "361", "362", "363", "364", "365", "366", "367", "368", "369", "370", "371", "372", "373", "374", "375", "376", "377", "378", "379", "380", "381", "382", "383", "384", "385", "386", "387", "388", "389", "390", "391", "392", "393", "394", "395", "396", "397", "398", "399", "400", "401", "402", "403", "404", "405", "406", "407", "408", "409", "411", "412", "413", "414", "415", "416", "417", "418", "419", "420", "422", "423", "424", "425", "426", "427", "428", "429", "430", "431", "432", "433", "435", "436", "437", "438", "439", "440", "441", "442", "443", "444", "445", "446", "447", "448", "449", "450", "451", "452", "453", "454", "455", "456", "457", "458", "459", "460", "461", "462", "463", "464", "465", "466", "467", "468", "469", "470", "471", "472", "473", "474", "475", "476", "477", "478", "479", "480", "481", "482", "483", "484", "485", "486", "487", "488", "489", "490", "491", "492", "493", "494", "495", "496", "497", "498", "499", "500", "501", "502", "503", "505", "506", "507", "508", "509", "510", "511", "512", "513", "514", "515", "516", "517", "518", "519", "520", "521", "522", "523", "524", "525", "526", "527", "528", "529", "530", "531", "532", "533", "534", "535", "536", "537", "538", "539", "540", "541", "542", "543", "544", "545", "546", "547", "548", "549", "550"], "02": ["005", "006", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "138", "140", "141", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "163", "164", "165", "166", "167", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "312", "313", "314", "315", "316", "317", "318", "319", "320", "321", "322", "323", "324", "325", "326", "327", "328", "329", "330", "331", "332", "333", "334", "336", "337", "338", "339", "340", "341", "342", "343", "344", "345", "346", "347", "348", "349", "350", "351", "352", "353", "354", "355", "356", "357", "358", "360", "361", "362", "363", "364", "365", "366", "367", "368"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
