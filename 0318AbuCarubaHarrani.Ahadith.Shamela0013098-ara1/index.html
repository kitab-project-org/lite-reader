<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">: «فمره فليراجعها فإذا طهرت ثم حاضت، ثم طهرت، فإن شاء فليمسكها، وإن أراد أن يطلقها فلا </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">2 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">: «مره فليمسكها حتى تحيض غير هذه الحيضة، ثم تطهر، فإن بدا له أن يطلقها فليطلقها كما أمر الله </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">3 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">: «فليراجعها، فإذا طهرت فليطلقها طاهرا أو حاملا»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">4 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">[ص: 32]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">: «لعلك تريدين أن ترجعي إلى رفاعة؟ لا، حتى تذوقي عسيلته ويذوق عسيلتك»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">5 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">: «لا تحلين للأول، حتى تذوقي عسيلته، ويذوق عسيلتك الآخر»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">6 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">: «تصلي المستحاضة، وإن قطر الدم على الحصير»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">7 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">، فأمرها النبي صلى الله عليه وسلم، أن تنكح»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">8 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">فأمرها النبي صلى الله عليه وسلم أن تتزوج»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">9 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">: «طلقها زوجها ثلاثا، فأتت النبي صلى الله عليه وسلم، فأمرها فانتقلت» ، فنزلت على عمرو بن أم </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">10 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">[ص: 36]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">11 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">: «لا يحل لامرأة تؤمن بالله واليوم الآخر أن تحد على ميت فوق ثلاث إلا على </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">12 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">: «كان حرا»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">13 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">[ص: 37]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">: «أنت أحق ما لم تنكحي»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">14 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">، هذا أبوك , وهذه أمك، فخذ بيد أيهما شئت» ، فأخذ بيد أمه، فانطلقت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">15 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">، هذا أبوك، وهذه أمك، فاختر أيهما شئت»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">16 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">: «لا نكاح إلا بولي، والسلطان ولي من لا ولي له» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">17 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">18 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">: «أيما امرأة أنكحت بغير إذن وليها فنكاحها باطل - ثلاث مرات - فإن كان دخل بها فلها الصداق </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">19 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">: " لا نكاح إلا بولي - أو قال -: بإذن ولي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">20 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">: «أيما امرأة زوجها وليان لها، فهي للأول منهما، ومن باع بيعا من رجلين فهو للأول </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">21 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">: «تستأمر اليتيمة في نفسها، فإن سكتت فقد ms4 أذنت، وإن كرهت لم تكره»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">22 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">: «اعتمر النبي صلى الله عليه وسلم ثلاث عمر قبل أن يحج»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">23 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">، نهى أن تتخذ جلود السباع فرشا " أو كما قال</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">24 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">، إذا مشى مشى مشيا مجتمعا، ليس فيه كسل»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">25 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">، فلبى حتى رمى جمرة العقبة يوم النحر»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">26 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">يصلي مع رسول الله صلى الله عليه وسلم ثم يأتي قومه فيؤمهم في الصلاة التي صلى مع رسول الله </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">27 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">[ص: 44]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">: " {يوم يقوم الناس لرب العالمين} [المطففين: 6] يوم القيامة، حتى يبلغ الرشح أنصاف آذانهم ". قال </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">28 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">: «لا طلاق إلا بعد نكاح»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">29 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">: «فأحبي عائشة فإني أحبها» ، فقالت فاطمة: ما أقول لعائشة شيئا تكرهه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">30 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">: «مقبوجا، مشقوجا تؤذي حبيبة رسول الله صلى الله عليه وسلم»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">31 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">أنها زوجة رسول الله صلى الله عليه وسلم في الدنيا والآخرة» يعني عائشة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">32 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">: «هذا جبريل يقرأ عليك السلام» ، قالت: وعليه السلام، ترى ما لا نرى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">33 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">: هذه زوجتك في الدنيا والآخرة "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">34 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">: «كمل من الرجال كثير، ولم يكمل من النساء إلا مريم بنت عمران، وآسية امرأة فرعون، وفضل عائشة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">35 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">: «فضل عائشة على النساء كفضل الثريد على سائر الطعام»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">36 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">السكينة تنطق على لسان عمر»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">37 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">: «ما زلنا أعزة منذ أسلم عمر»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">38 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">: " تهادوا: تزدادوا خيرا، وهاجروا: تورثوا أبناءكم مجدا، وأقيلوا الكرام </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">39 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">: «ما نزل علي الوحي في لحاف امرأة منكن إلا في لحاف عائشة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">40 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">، إنكم سترون بعدي جفوة، فاستعينوا عليها بأرقاء الناس»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">41 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">: " إني سألت الله عز وجل لكم ثلاثا: أن يهدي ضالكم، ويعلم جاهلكم، ويثبت قائلكم، وسألت الله عز </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">42 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">أمر بقتل الكلاب في الإحرام والحرم»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">43 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">: «لا يحل لمسلم أن يهجر أخاه فوق ثلاث»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">44 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head88">: «من أعتق رقبة، أعتق الله بكل عضو منها عضوا منه، حتى بفرجها فرجه»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head89">45 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head90">: " اغزوا؛ تغنموا، وصوموا؛ تصحوا، وسافروا: تصحوا "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head91">46 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head92">: «قص الشارب من السنة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head93">47 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head94">: «تسمونهم محمدا، ثم تلعنونهم»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head95">48 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head96">: «لا يغرس مسلم غرسا، ولا يزرع زرعا فيأكل منه إنسان ولا بهيمة إلا كان له </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head97">49 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head98">يعتكف عشرة أيام من شهر رمضان، فلما كان العام الذي قبض فيه، اعتكف عشرين»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head99">50 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head100"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head101">«توضأ مرة مرة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head102">51 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head103"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head104">«توضأ مرة مرة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head105">52 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head106">«توضأ مرة مرة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head107">53 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head108">توضأ واحدة واحدة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head109">54 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head110">: توضأ ثلاثا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head111">55 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head112"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head113">: «توضأ ثلاثا ثلاثا»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head114">56 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head115"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head116">: «توضأ ثلاثا ثلاثا»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head117">57 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head118">: توضأ ثلاثا ثلاثا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head119">58 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head120">: «هذا وضوء من لا يقبل له صلاة إلا به» ، ثم توضأ مرتين مرتين ثم قال: «هذا وضوء يضاعف له الأجر </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head121">59 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head122">60 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head123">: «فمن أجل ذلك يغيب المفتاح»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head124">61 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head125">، توضأ مرة مرة، ومرتين مرتين، وثلاثا ثلاثا.؟ قال: «نعم»</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 10209</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Abu Caruba Harrani</label><label>tags: CENT0400 :: _AJZA :: _HADITH :: _TARAJIM :: GAL@nodata :: Shamela@الأجزاء الحديثية</label><label>url: https://raw.githubusercontent.com/OpenITI/0325AH/master/data/0318AbuCarubaHarrani/0318AbuCarubaHarrani.Ahadith/0318AbuCarubaHarrani.Ahadith.Shamela0013098-ara1</label><label>tok_length: 2725</label><label>status: sec</label><label>id: Shamela0013098</label><label>ed_info: د عبد الرحيم محمد أحمد القشقري :: شركة الرياض - السعودية - الرياض</label><label>title_lat: Ahadith</label><label>title_ar: أحاديث أبي عروبة الحراني برواية أبي أحمد الحاكم</label><label>book: 0318AbuCarubaHarrani.Ahadith</label><label>author_lat: Abu Caruba Harrani</label><label>author_ar: أبو عروبة الحسين بن محمد بن أبي معشر مودود السلمي الجزري الحراني (المتوفى: 318هـ)</label><label>date: 0318</label><label>versionUri: 0318AbuCarubaHarrani.Ahadith.Shamela0013098-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "030"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
