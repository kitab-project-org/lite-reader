<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">1 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">[ص: 106]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">يؤخذ الرجل فيحفر له في الأرض فيجعل فيها، ويجاء بالمنشار فيوضع على رأسه، فينشر باثنين، فما </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">2 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">كلكم راع، وكلكم مسؤول عن رعيته؛ الرجل عن أهل بيته، والمرأة عن أهل بيتها، والعبد عن مال </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">3 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">: «خير الدعاء يوم عرفة، وخير ما جاء به النبيون قبلي لا إله إلا الله»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">4 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">: " لا يحقرن أحدكم يرى أمرا لله فيه مقال أن يقول فيه، فيبعثه الله عز وجل يوم القيامة، فيقول: </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">5 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">قسم بينكم أخلاقكم كما قسم بينكم أرزاقكم، وإن الله تعالى يعطي الدنيا من يحب ومن لا يحب، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">6 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">قسم بينكم أخلاقكم كما قسم بينكم أرزاقكم، وإن الله عز وجل يعطي المال من يحب ومن لا يحب ولا </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">7 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">أولى الناس بالله وبرسوله الذي بدأهم بالسلام»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">8 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">: «من اطلع في بيت قوم قبل أن يأذنوا له فقد حل لهم أن يفقؤوا عينه»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">9 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">أصحاب هذه الصور يعذبون يوم القيامة، ويقال لهم: أحيوا ما خلقتم "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">10 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">: «أذهب البأس رب الناس، واشف أنت الشافي، لا شافي إلا أنت، اللهم إني أسألك شفاء لا يغادر </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">11 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">: " إن كنا لنطرد على عهد رسول الله صلى الله عليه وسلم أن نصلي بين الساريتين إلا أن نلجأ </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">12 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">: يا أهل الجنة، تخلدون فلا تموتون أبدا، وتصحون فلا تمرضون أبدا، وتشبون فلا تهرمون أبدا، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">13 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">يكتحل كل ليلة، ويحتجم كل شهر، ويشرب الدواء في كل سمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">14 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">: " هلاك هذه الأمة إذا بغت نساؤها ورجالها، واستخف بالقرآن، وكان النكاح زنى: يطلق الرجل </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">15 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">، لك الحمد لما بسطت رزقنا، وأظهرت أمننا، وأحسنت معافاتنا، ومن كل ما سألناك أعطيتنا، فلك </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">16 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">17 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">، من لقي الله عز وجل بهما غير شاك لم يحجب عن الجنة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">18 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">، فما رآه المسلمون حسنا فهو عند الله حسن، وما رآه المسلمون سيئا فهو عند الله </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">19 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">خلق أحدكم يجمع في بطن أمه خمسة وأربعين يوما، ثم يكون علقة مثل ذلك، ثم يكون مضغة مثل ذلك، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">20 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">: اطردهم لا يجترؤون علينا. قال: وكنت أنا وابن مسعود ورجل من هذيل، ورجلان نسيت أسماءهما، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">21 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">منزلنا غدا إن شاء الله لخيف بني كنانة بحيث تقاسموا على الكفر»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">22 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">، عندك ما يكفيك فلم تطلب ما يطغيك؟ لا بقليل تقنع، ولا بكثير تشبع، إذا أصبحت آمنا في سربك، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">23 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">: «الهين اللين السهل القريب»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">24 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">ليس شيء يقربكم من النار ويباعدكم عن الجنة إلا وقد نهيتكم عنه، وإنه ليس من شيء يدنيكم من </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">25 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">: رأيت رسول الله صلى الله عليه وسلم والحسن بن علي عليهما السلام يشبهه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">26 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">: «إذا أتي أحدكم بالطيب فليصب منه»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">27 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">: «أحب بيوتكم إلى الله عز وجل بيت فيه يتيم مكرم»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">28 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">: «لا تجوز شهادة خائن ولا خائنة، ولا ذي غمر على أخيه، ولا موقوفا على حد»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">29 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">: " ستة لعنتهم؛ فلعنهم الله، وكل نبي مجاب الدعوة: المكذب بقدر الله، والزائد في كتاب الله، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">30 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">أذن له بالدعاء»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">31 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">: " لا يكن حبك كلفا، ولا يكن بغضك تلفا. قلت: كيف ذلك يا أمير المؤمنين؟ قال: إذا أحببت كلفت </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">32 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">33 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">: " لأقضين بينكم بالحق: أما ما أعطيته فيرده إليك، وأما ابنك فيجلد مائة جلدة، ويغرب سنة، وأما </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">34 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">: «إذا اطمأن الرجل إلى الرجل، ثم قتله بعدما اطمأن إليه نصب له لواء غدر»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">35 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">: «الخيل معقود بنواصيها الخير ms10 إلى يوم القيامة» قيل: وما ذاك؟ قال: «الأجر، والمغنم إلى يوم </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">36 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">في الجنة طيرا له سبعون ألف ريشة، فإذا وضع الخوان قدام ولي من الأولياء جاء الطير فسقط </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">37 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">: «أيما مؤمن سقى مؤمنا شربة على ظمأ سقاه الله عز وجل يوم القيامة من الرحيق المختوم، وأيما </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">38 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">: " يخرج من النار من قال: لا إله إلا الله وكان في قلبه من الخير ما يزن شعيرة، ثم يخرج من </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">39 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">خلق السماوات وكان الإسلام قديما، وكان فيه زيادة، فأما في آخر الزمان فإنه ينقص» ، قال: فقال </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">40 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">: «على كل ذي ميسم من الإنسان صلاة كل يوم» ، فقال رجل من القوم: هذا من أشد ما أتينا به قال </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">41 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">: " لا حسد إلا في اثنين: رجل أتاه الله الكتاب فهو يقوم به آناء الليل وآناء النهار، ورجل أتاه </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">42 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">الله أمرني بمداراة الناس كما أمرني بإقامة الفرائض»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">43 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">: " ما من عبد يقول حين يمسي أو حين يصبح ms12 ثلاث مرات: رضيت بالله ربا، وبالإسلام دينا، ومحمد نبيا </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">44 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">: " من حج بمال حرام فقال: لبيك اللهم لبيك، قال الله عز وجل له: لا لبيك ولا سعديك، وحجك مردود </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">45 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head88">: «شر الطعام طعام الوليمة؛ يدعى الشبعان ويترك الغرثان»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head89">46 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head90">: «أيما مؤمن لقي مؤمنا فصافحه وتبسم في وجهه؛ لم يفترقا إلا عن مغفرة»</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head91">47 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head92">: «لو تكونون إذا خرجتم من عندي كما تكونون عندي؛ لزاركم الملائكة؛ ولصافحتكم في الطريق، ولو لم </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head93">48 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head94">: «المؤمن في الدنيا كالغريب، لا ينافس في عزها، ولا يجزع من ذلها، للناس حال وله حال، وجهوا </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head95">49 - </a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 15123</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Mardawayh</label><label>tags: CENT0500 :: _AJZA :: _AMALI :: _HADITH :: _MAJALIS :: _TARAJIM :: GAL@nodata :: Shamela@الأجزاء الحديثية</label><label>url: https://raw.githubusercontent.com/OpenITI/0425AH/master/data/0410IbnMardawayh/0410IbnMardawayh.Majalis/0410IbnMardawayh.Majalis.Shamela0008275-ara1</label><label>tok_length: 4003</label><label>status: sec</label><label>id: Shamela0008275</label><label>ed_info: الدكتور محمد ضياء الرحمن الأعظمي الأستاذ المشارك بالجامعة الإسلامية بالمدينة المنورة :: دار علوم الحديث، الإمارات العربية المتحدة</label><label>title_lat: Majalis</label><label>title_ar: ثلاثة مجالس من أمالي ابن مردويه</label><label>book: 0410IbnMardawayh.Majalis</label><label>author_lat: Ibn Mardawayh</label><label>author_ar: أبو بكر أحمد بن موسى بن مردوية بن فورك بن موسى بن جعفر الأصبهاني (المتوفى: 410هـ)</label><label>date: 0410</label><label>versionUri: 0410IbnMardawayh.Majalis.Shamela0008275-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "192"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
