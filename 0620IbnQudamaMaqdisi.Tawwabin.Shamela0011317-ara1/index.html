<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">ذكر التوابين من الملائكة عليهم السلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">1 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">قصة هاروت وماروت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">ذكر التوابين من الأنبياء عليهم السلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">توبة آدم عليه السلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">توبة نوح عليه السلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">توبة موسى عليه السلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">[توبة داود عليه السلام]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">توبة سليمان عليه السلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">توبة يونس عليه السلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">ذكر التوابين من ملوك الأمم الماضية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">[توبة طالوت]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">توبة ابن ملك من ملوك بني إسرائيل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">توبة صاحب الخورنق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">توبة النعمان بن امرئ القيس الأكبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">توبة ملك من الملوك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">توبة امرئ القيس الكندي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">توبة ملك من ملوك اليمن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">توبة ملك من ملوك بني إسرائيل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">توبة ملك من ملوك بني إسرائيل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">توبة حفيد نبي هو ولد عابد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">توبة ملك من الملوك وقوم لا يعبدون الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">[توبة ملك يقال له: كنعان ms029 وقومه من بعده]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">ذكر التوابين من الأمم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">توبة قوم موسى عليه السلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">توبة قوم يونس عليه السلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">توبة قوم نبي من الأنبياء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">ذكر التوابين من آحاد الأمم الماضية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">توبة أصحاب الغار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">توبة الكفل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">توبة العابد والمرأة البغي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">توبة القصاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">توبة صاحب الرغيف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">توبة راهب من بني إسرائيل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">توبة راهب من بني إسرائيل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">توبة عابد من العبدة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">توبة ذي الرجل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">توبة برخ العابد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">توبة العبد العاصي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">توبة شاب مسرف على نفسه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">توبة رجلين من بني إسرائيل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">توبة عاص من العصاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">توبة الخارج من القرية الظالمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">توبة من قتل مائة نفس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">توبة لص من بني إسرائيل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">توبة ثلاث بنات من البغايا وغواة قرية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">توبة صاحب فاحشة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">أخبار التائبين من أصحاب رسول الله صلى الله عليه وسلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">[توبة أبي خيثمة - رضي الله عنه -]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">توبة مخشي بن حمير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">43 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">توبة كعب بن مالك رضي الله عنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">توبة أبي لبابة رضي الله عنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">توبة ثعلبة بن عبد الرحمن رضي الله عنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">توبة عمرو مالك الرؤاسي رضي الله عنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">[توبة غني من أغنياء الصحابة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">توبة أبي سفيان بن الحارث رضي الله عنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">توبة عبد الله بن الزبعري رضي الله عنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">توبة هبار بن الأسود رضي الله عنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">توبة عكرمة بن أبي جهل رضي الله عنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">توبة سهيل بن عمرو والحارث بن هشام رضي الله عنهما</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">توبة الأنصار رضي الله عنهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">توبة أبي محجن الثقفي رضي الله عنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">توبة طليحة بن خويلد رضي الله عنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">ذكر التوابين من ملوك هذه الأمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">توبة ذي الكلاع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">توبة أمير وتاجر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">توبة ملك من ملوك البصرة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">توبة ملك من ملوك البصرة وجاريته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">توبة أم البنين بنت عبد العزيز بن مروان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">توبة غضيض أمة هشام بن عبد الملك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">توبة الأمير حميد بن جابر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">توبة إبراهيم بن أدهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">إبراهيم بن أدهم والشيخ الحاج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">إبراهيم بن آدم والبحر الهائج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">توبة شقيق البلخي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">عبد الله بن مرزوق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">جعفر بن حرب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">توبة هارون الرشيد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">توبة ابن هارون الرشيد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">[توبة علي بن المأمون, والمأمون]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">توبة موسى بن محمد بن سليمان الهاشمي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">توبة جعفر البرمكي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">توبة جارية من بنات الكبار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">توبة الواثق بالله وابنه المهتدي بالله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">ذكر سبب توبة جماعة من الأمة رحمة الله عليهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head88">توبة حبيب أبي محمد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head89">توبة زاذان الكندي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head90">توبة مالك بن دينار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head91">توبة داود الطائي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head92">توبة الفضيل بن عياض</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head93">توبة علي بن الفضيل بن عياض</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head94">توبة بشر بن الحارث الحافي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head95">توبة عشرة فتيان وعشرة أحداث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head96">توبة رجل عن طغيانه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head97">توبة تاجر من تجار بغداد من الوقيعة في الناس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head98">توبة أبي عبد رب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head99">توبة القعنبي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head100">توبة عكبر الكردي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head101">توبة صدقة بن سليمان الجعفري</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head102">توبة ذي النون المصري</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head103">توبة سكران</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head104">توبة المرتعش</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head105">توبة عبد الرحمن القس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head106">توبة أبي الحارث الأولاسي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head107">توبة أبي الفضل محمد بن ناصر السلامي عن اعتقاد المبتدعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head108">توبة أبي الحسن الهرقاني عن مذهب المتكلمين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head109">أخبار جماعة من التوابين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head110">توبة منازل بن لاحق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head111">توبة امرأة من دومة الجندل عن عمل السحر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head112">توبة شاب عن اللهو واللعب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head113">توبة شاب عن الانهماك في الدني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head114">توبة جندي صاحب قصر عن الغناء والملاهي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head115">توبة رجل من أعوان السلطان عن الفواحش</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head116">توبة فتى من الأزدكان عن التأنث والتخنث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head117">توبة امرأة وهي تطوف حول الكعبة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head118">توبة رجل عما جنت يداه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head119">توبة ملهي أهل المدينة عن اللهو على يد والدته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head120">توبة دينار العيار عن المعاصي على يد والدته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head121">توبة رجل عن حب جاريته المغنية التي شغلته عن الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head122">توبة شاب وامرأته على يد سري السقطي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head123">توبة امرأة بارعة الجمال أرادت أن تفتن الربيع بن خيثم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head124">توبة جار لأحمد بن حنبل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head125">توبة أبي عمر بن علوان عن نظره إلى امرأة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head126">توبة فتى شاب وجارية جميلة أحب كل منهما الآخر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head127">توبة رجل عن الشراب والعود بسماع آيات من القرآن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head128">توبة شيخ مهلبي وجاريته عن الشراب والضرب بالعود</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head129">توبة أعرابي لسماع آية من القرآن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head130">توبة أمير من أمراء الأعراب بسبب الصوم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head131">توبة لبيب العابد عن قتل الحيات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head132">توبة المعتصم ورجوعه عن قتل تميم بن جميل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head133">توبة لص من اللصوص عن التعرض للناس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head134">توبة يوسف بن أسباط على يد شاب كان يعمل نباشا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head135">توبة نباش عن نبش القبور</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head136">توبة شاب مسرف على نفسه على يد إبراهيم بن أدهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head137">توبة صاحب مقثأة على يد شاب دمشقي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head138">توبة عاصي في جوف الليل وموته لسماع آية من القرآن فيها ذكر النار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head139">توبة امرأة عن الغناء والعود وتوبة مولاها على يدها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head140">ذكر خبر جماعة ممن أسلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head141">توبة أبي إسماعيل النصراني وإسلامه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head142">توبة شاب نصراني وإسلامه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head143">توبة عابد صنم وإسلامه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head144">توبة مجوسي وإسلامه وأهل داره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head145">توبة يهودي محسن وإسلامه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head146">توبة مجوسي كريم وإسلامه مع أولاده ورهطه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head147">توبة مجوسي بغدادي وإسلامه مع ابنه وابنته وكثير من أصحابه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head148">توبة طبيب نصراني محسن وإسلامه</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 194619</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Qudama Maqdisi</label><label>tags: CENT0700 :: _ADAB :: _ADHKAR :: _AKHLAQ :: _HADITH :: _MISC :: _RAQAIQ :: _SULUK :: _SUNNI :: GAL@literature-islamic :: GAL@1000-1258CE :: GAL@hanbalis :: GAL@literature-arabic :: GAL@period-postclassical :: GAL@fiqh :: Shamela@الرقاق والآداب والأذكار</label><label>url: https://raw.githubusercontent.com/OpenITI/0625AH/master/data/0620IbnQudamaMaqdisi/0620IbnQudamaMaqdisi.Tawwabin/0620IbnQudamaMaqdisi.Tawwabin.Shamela0011317-ara1</label><label>tok_length: 48692</label><label>status: sec</label><label>id: Shamela0011317</label><label>ed_info: دار ابن حزم</label><label>title_lat: Tawwabin</label><label>title_ar: كتاب التوابين</label><label>book: 0620IbnQudamaMaqdisi.Tawwabin</label><label>author_lat: Ibn Qudama Maqdisi</label><label>author_ar: أبو محمد موفق الدين عبد الله بن أحمد بن محمد بن قدامة الجماعيلي المقدسي ثم الدمشقي الحنبلي، الشهير بابن قدامة المقدسي (المتوفى: 620هـ)</label><label>date: 0620</label><label>versionUri: 0620IbnQudamaMaqdisi.Tawwabin.Shamela0011317-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "009", "010", "011", "012", "013", "014", "014", "014", "015", "016", "016", "017", "018", "019", "020", "021", "022", "023", "019", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "032", "033", "033", "034", "034", "035", "035", "036", "036", "036", "037", "037", "038", "039", "040", "040", "040", "041", "042", "043", "044", "045", "045", "046", "047", "047", "048", "049", "050", "050", "051", "051", "052", "052", "053", "053", "000", "053", "054", "054", "054", "055", "055", "056", "056", "057", "057", "058", "058", "059", "059", "060", "061", "062", "063", "063", "063", "064", "065", "066", "067", "067", "068", "068", "069", "069", "070", "071", "071", "071", "072", "072", "073", "074", "075", "075", "076", "077", "077", "078", "078", "079", "080", "080", "081", "081", "082", "082", "083", "084", "084", "085", "086", "087", "088", "088", "089", "090", "091", "091", "092", "093", "094", "094", "095", "095", "096", "097", "097", "098", "099", "100", "100", "100", "101", "101", "102", "102", "103", "104", "105", "105", "106", "107", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "117", "118", "118", "119", "119", "120", "121", "122", "123", "124", "122", "124", "125", "126", "126", "126", "127", "127", "128", "128", "129", "129", "129", "130", "130", "131", "131", "132", "133", "133", "133", "134", "134", "135", "135", "135", "136", "136", "137", "137", "138", "138", "139", "140", "140", "141", "142", "143", "144", "144", "145", "145", "146", "147", "147", "148", "148", "149", "149", "150", "150", "151", "151", "152", "153", "153", "154", "154", "155", "155", "156", "157", "157", "158", "158", "159", "160", "160", "161", "161", "162", "162", "163", "163", "164", "164", "165", "165", "166", "166", "167", "167", "168", "168", "168", "169", "170", "171", "171", "172", "172", "173", "174", "175", "176", "177", "178", "178", "179", "179", "180", "180", "181", "181", "182", "182", "182", "183", "183", "184"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
