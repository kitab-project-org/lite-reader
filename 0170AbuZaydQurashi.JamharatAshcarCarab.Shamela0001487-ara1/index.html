<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">بسم الله الرحمن الرحيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">أول من قال الشعر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">اللفظ المختلف ومجاز المعاني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">أول من قال الشعر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">النبي والشعر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">أي الشعراء أشعر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">شياطين الشعراء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">خبر آخر:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">فصل آخر:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">باب صفة الذين قدموا زهيرا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">فصل آخر:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">فصل آخر:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">فصل من أخبار زهير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">باب خبر الذين قدموا النابغة الذبياني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">فصل آخر:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">فصل آخر عنه:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">باب خبر أعشى بكر بن وائل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">باب خبر لبيد بن ربيعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">فصل آخر:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">فصل آخر من أخباره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">باب صفة عمرو بن كلثوم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">باب صفة طرفة بن العبد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">باب ذكر طقبات من سمينا منهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">طعام عبد الملك والأعرابي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">فصل آخر:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">أخبار امرىء القيس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">فصل آخر:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">المعلقات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">معلقة امرىء القيس الطويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">معلقة زهير الطويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">معلقة النابغة الذبياني البسيط</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">معلقة الأعشى الخفيف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">معلقة لبيد الكامل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">معلقة عمرو بن كلثوم الوافر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">معلقة طرفة لابن العبد الطويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">عنترة بن شداد الكامل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">المجمهرات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">مجمهرة عبيد بن الأبرص</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">مجمهرة عدي بن زيد الطويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">مجمهرة بشر بن أبي خازم الكامل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">مجمهرة أمية بن أبي الصلت الوافر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">مجمهرة خداش بن زهير الطويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">مجمهرة النمر بن تولب الطويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">المنتقيات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">المسيب بن ms078 علس الكامل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">المرقش الأشغر الطويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">المتلمس البسيط</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">عروة بن الورد الطويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">المهلهل بن ربيعة السريع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">دريد بن الصمة الطويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">المتنخل بن عويمر الهذلي الوافر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">المذهبات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">حسان بن ثابت الأنصاري الطويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">عبد الله بن رواحة الوافر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">مالك بن عجلان المنسرح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">قيس بن الخطيم الأوسي الطويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">أحيحة بن الجلاح الوافر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">أبو قيس بن الأسلت السريع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">عمرو بن امرىء القيس المنسرح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">المراثي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">أبو ذؤيب الهذلي الكامل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">محمد بن كعب الغنوي الطويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">أعشى باهلة البسيط</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">علقمة ذو جدن الحميري السريع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">أبو زبيد الطائي الخفيف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">متمم بن نويرة اليربوعي الطويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">مالك بن الريب التميمي الطويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">المشوبات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">نابغة بني جعدة الطويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">كعب بن زهير بن أبي سلمى البسيط</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">القطامي البسيط</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">الحطيئة المتقارب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">الشماخ بن ضرار الطويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">عمرو بن أحمر البسيط</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">تميم بن مقبل العامري البسيط</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">الملحمات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">الفرزدق الطويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">جرير بن بلال الكامل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">الأخطل التغلبي البسيط</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">عبيد الراعي الكامل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">ذو الرمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">الكميت بن زيد الأسدي الطويل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">الطرماح بن حكيم الطائي الخفيف</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 160535</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Abu Zayd Qurashi</label><label>tags: CENT0200 :: _ADAB :: _ADAB :: _BALAGHA :: _SHICR :: GAL@poetry :: GAL@literature-arabic :: GAL@literature-national :: Shamela@الأدب والبلاغة</label><label>url: https://raw.githubusercontent.com/OpenITI/0175AH/master/data/0170AbuZaydQurashi/0170AbuZaydQurashi.JamharatAshcarCarab/0170AbuZaydQurashi.JamharatAshcarCarab.Shamela0001487-ara1</label><label>tok_length: 38464</label><label>status: pri</label><label>id: Shamela0001487</label><label>ed_info: علي محمد البجادي :: نهضة مصر للطباعة والنشر والتوزيع</label><label>title_lat: Jamharat Ashcar Carab</label><label>title_ar: جمهرة أشعار العرب</label><label>book: 0170AbuZaydQurashi.JamharatAshcarCarab</label><label>author_lat: Abu Zayd Qurashi</label><label>author_ar: أبو زيد محمد بن أبي الخطاب القرشي (المتوفى: 170هـ)</label><label>date: 0170</label><label>versionUri: 0170AbuZaydQurashi.JamharatAshcarCarab.Shamela0001487-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "080", "081", "082", "083", "084", "085", "086", "087", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "172", "174", "176", "178", "179", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297", "298", "299", "300", "304", "305", "306", "307", "308", "309", "310", "311", "312", "313", "314", "315", "316", "317", "318", "319", "320", "321", "322", "323", "324", "325", "326", "327", "328", "329", "330", "331", "332", "333", "334", "335", "336", "337", "338", "339", "340", "341", "342", "347", "348", "349", "350", "351", "352", "353", "354", "355", "356", "357", "358", "359", "360", "361", "363", "364", "365", "366", "367", "368", "369", "370", "371", "372", "373", "374", "375", "376", "379", "380", "381", "382", "383", "384", "385", "386", "387", "388", "389", "390", "391", "392", "393", "394", "395", "396", "397", "398", "399", "400", "401", "402", "403", "404", "405", "406", "407", "408", "409", "410", "411", "412", "413", "414", "415", "416", "417", "418", "419", "420", "421", "422", "423", "424", "425", "426", "427", "428", "429", "431", "432", "433", "434", "435", "436", "437", "438", "439", "440", "441", "442", "443", "444", "445", "446", "449", "450", "451", "452", "453", "454", "455", "457", "458", "459", "460", "461", "462", "463", "464", "465", "466", "467", "468", "469", "470", "471", "472", "473", "474", "477", "478", "479", "480", "481", "482", "483", "484", "485", "486", "487", "488", "491", "492", "493", "494", "495", "496", "498", "499", "500", "501", "502", "503", "504", "505", "506", "507", "508", "509", "510", "511", "512", "513", "514", "517", "518", "519", "520", "521", "522", "523", "524", "525", "526", "527", "530", "531", "532", "533", "534", "535", "536", "537", "538", "539", "540", "541", "542", "543", "544", "545", "546", "547", "548", "549", "550", "551", "555", "556", "557", "558", "559", "560", "561", "562", "563", "564", "568", "569", "570", "571", "572", "573", "574", "575", "576", "577", "578", "579", "580", "581", "582", "583", "584", "585", "586", "587", "588", "589", "590", "591", "592", "593", "594", "595", "596", "597", "598", "599", "600", "601", "607", "608", "609", "610", "611", "612", "613", "614", "617", "618", "619", "620", "621", "622", "623", "624", "625", "626", "627", "628", "629", "630", "631", "632", "633", "634", "635", "636", "637", "638", "639", "640", "641", "642", "643", "644", "645", "646", "647", "648", "649", "650", "651", "652", "653", "654", "655", "656", "657", "658", "659", "660", "661", "662", "663", "664", "665", "666", "667", "668", "669", "670", "671", "672", "673", "674", "675", "676", "677", "678", "679", "680", "681", "682", "683", "684", "685", "686", "687", "688", "689", "690", "691", "693", "694", "695", "696", "697", "698", "699", "700", "701", "702", "703", "704", "705", "706", "707", "708", "709", "710", "711", "712", "713", "714", "715", "716", "717", "718", "719", "720", "721", "722", "723", "724", "725", "726", "727", "728", "729", "730", "731", "732", "733", "734", "735", "736", "737", "738", "739", "740", "741", "742", "743", "744", "745", "746", "747", "748", "749", "750", "751", "752", "753", "754", "755", "756", "757", "758", "759", "760", "761", "762", "763", "764", "765", "766", "767", "768", "769", "770", "771", "772", "773", "774", "775", "776", "777", "778", "779", "780", "781", "782", "783", "784", "785", "786", "787", "788", "789", "790", "794", "795", "796", "797", "798", "799", "800", "801", "802", "803"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
