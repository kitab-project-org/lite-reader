<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">مقدمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">في فضل العرب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">بيان في أصول العرب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">آل الرحيل المعروفون في صحار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">نسب بني سامة بن لؤي بن غالب بعمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">نسب بني غافر بن سامة في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">نسب آل العطابي في بني غافر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">نسب آل صالح بن علي في بني غافر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">نسب آل عزرة في سامة بن لؤي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">نسب بني زياد أهل عقر نزوى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">نسب آل أمبو سعيد أهل العقر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">نسب المصالحة من قريش في عمان ms11</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">نسب بني رمضان في النزار بعمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">نسب آل سعد أهل الباطنة في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">نسب الناصر في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">نسب بني بكر أهل الظاهرة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">نسب بني ياس في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">نسب بني الشكيل في النزار.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">نسب آل عمير في النزار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">نسب آل عبس في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">نسب آل وهيبة في النزار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">نسب الهشم ومن أليهم في النزار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">؟؟؟؟؟؟؟؟؟؟؟ نسب بطون وائل؟؟؟؟؟ في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">نسب الشكور في وايل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">نسب آل حراص في وايل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">نسب بني جابر في ذبيان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">نسب بني عوف في ذبيان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">نسب بني محارب في قيس عيلان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">نسب بني جشم في النزار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">نسب آل قيس وهو ثقيف بعمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">نسب عامر بن صعصعة في عمان وبطونهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">ومن القبائل المهمة بعمان بنو عامر بن صعصعة بن بكر بن هوازن بن منصور</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">نسب بني هلال في عامر صعصعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">نسب بني كعب في عامر صعصعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">نسب الجبور في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">نسب الجعافرة في عامر صعصعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">نسب آل عمير في ms29 عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">نسب بني جني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">نسب آل عزير في عامر صعصعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">نسب بني عمر في عامر صعصعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">نسب شحيمان في جعلان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">نسب بني عادي في عامر صعصعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">نسب بني خالد في عامر صعصعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">نسب بني تميم في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">نسب المحاريق في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">نسب بني تقاعس في تميم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">نسب بني عدي في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">نسب المشارقة في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">نسب الحناظلة في نميم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">نسب بني غدانة في تميم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">نسب بني كليب في تميم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">نسب بني دارم في تميم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">نسب العمور في عبد القيس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">نسب بني قتب في ضبة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">نسب السوالم في مضر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">نسب بني فزارة في ذبيان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">بنو جساس في وايل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">نسب آل محرز في وائل بعمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">نسب بني هميم في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">نسب القواسم في عمان وما قيل فيهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">نسب أولاد حسين أو بني حسين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">نسب الدروع في النزار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">نسب المزاريع في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">نسب بني كلبان في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">نسب بني حمدان لعمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">الفوارس في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">نسب مالك بن فهم الأزدي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">نسب بني هناءة بن مالك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">نسب بني فراهيد بن مالك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">نسب بني معن بن مالك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">نسب بني سليمة بن مالك بن فهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">نسب الشحوح في أهل عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">نسب بني جهضم بن عوف بن مالك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">نسب بني جماز بن مالك بن فهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">نسب بني محارب بن الأزد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">نسب بن معولة بن شمس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">نسب بني الجلندى في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">نسب آل الحارث بن كعب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">نسب آل عبرة في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">نسب آل نبهان ملوك عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">نسب آل يعرب في نصر بن زهران</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">نسب بني راسب في الأزد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">نسب بني غسان في الأزد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">نسب المساكرة في الأزد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">نسب الحجريين في الأزد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">نسب بني ربيعة في الأزد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">نسب بني خزير في الأزد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">نسب بني عمران في الأزد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head88">نسب بني علي في الأزد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head89">نسب بني الحدان بن شمس في الأزد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head90">نسب بني الندب بن شمس في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head91">نسب بني شبيب في الأزد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head92">نسب بني بطاش في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head93">نسب بني ريام في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head94">نسب آل كندة في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head95">نسب بني اسماعيل في اليمن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head96">نسب بني راشد بن اسماعيل في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head97">نسب اليعاقيب في اليمن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head98">نسب الغوارب في اليمن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head99">نسب بني راسب في قضاعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head100">نسب الجنبة في اليمن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head101">نسب الرحبيين في همدان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head102">نسب بني شمس في اليمن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head103">......... </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head104">نسب طي في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head105">نسب أولاد سعد أمبو علي في طي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head106">نسب النباهنة في طي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head107">نسب المشارفة في طي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head108">نسب الهاديين في طي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head109">نسب أخزم في طي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head110">نسب بني تمام أي بنو بوعلي في طي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head111">نسب بني لام في طي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head112">نسب آل الريس في طي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head113">نسب الهدادبة، وهم قوم من طي على الشائع الشهير. والهدادبةهم بطن من آل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head114">نسب بني نهد في اليمن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head115">نسب بني حرب في همدان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head116">نسب بني حضرموت في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head117">نسب الجهاور بعمان في اليمن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head118">نسب بني عرابة في طي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head119">نسب بني وهيب في طي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head120">نسب بني حسن في عمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head121">نسب بني عمر أهل اللجيلة في طي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head122">نسب النعب في قضاعة</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 107326</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Salim Ibadi</label><label>tags: CENT1500 :: _ANSAB :: GAL@nodata :: Shamela@الأنساب - مرقم آليا</label><label>url: https://raw.githubusercontent.com/OpenITI/1425AH/master/data/1414SalimIbadi/1414SalimIbadi.IscafAcyan/1414SalimIbadi.IscafAcyan.Shamela0000490-ara1</label><label>tok_length: 25707</label><label>status: pri</label><label>id: Shamela0000490</label><label>ed_info: </label><label>title_lat: Iscaf Acyan</label><label>title_ar: إسعاف الأعيان في أنساب أهل عمان</label><label>book: 1414SalimIbadi.IscafAcyan</label><label>author_lat: Salim Ibadi</label><label>author_ar: سالم بن حمود بن شامس بن خميس السيابي الإباضي (المتوفى: 1414هـ)</label><label>date: 1414</label><label>versionUri: 1414SalimIbadi.IscafAcyan.Shamela0000490-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
