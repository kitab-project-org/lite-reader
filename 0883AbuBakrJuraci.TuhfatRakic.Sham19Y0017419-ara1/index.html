<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">CHECK مقدمة المؤلف</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head1">AUTO الفصل الأول من المقدمة في فضل المساجد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head2">AUTO الفصل الثاني في فضل بنائها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head3">AUTO الفصل الثالث في فضل حبها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head4">AUTO الفصل الرابع في فضل السعي إليها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head5">CHECK الفصل الخامس في مدلول المسجد لغة وشرعا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head6">CHECK الفصل السابع في ms012 فضل ملازمة المسجد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head7">AUTO الفصل السادس في ذهاب الأرض كلها يوم القيامة إلا المساجد</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">CHECK الكتاب الأول في ذكر الكعبة زادها الله تعالى شرفا وما يتعلق بها</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head9">AUTO الباب الأول في ذكر أسمائها</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head10">AUTO الأول: الكعبة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head11">AUTO الثاني: البيت العتيق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head12">CHECK الرابع: أول بيت وضع للناس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head13">AUTO الثالث: البيت الحرام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head14">AUTO الخامس: من أسمائها: بكة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head15">AUTO السادس: قادس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head16">AUTO السابع: بادر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head17">AUTO الثامن: قبلة أهل الإسلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head18">AUTO التاسع: القربة القديمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head19">AUTO العاشر: الدوار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head20">AUTO الحادي عشر: البنية</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head21">AUTO الباب الثاني في ذكر بنائها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head22">AUTO الباب الثالث في كيفية بناء المسجد الحرام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head23">AUTO الباب الرابع في فضل المسجد الحرام</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head24">AUTO فائدة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head25">AUTO فائدة</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head26">AUTO الباب الخامس في ذكر كسوة الكعبة، زادها الله شرفا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head27">AUTO الباب السادس في سدانة البيت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head28">AUTO الباب السابع في فضل الحجر الأسود وذكر أخذه ورده</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head29">AUTO فصل</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head30">AUTO الباب الثامن فيما جاء في رفع الحجر الأسود</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head31">AUTO الباب التاسع في ذكر الركن اليماني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head32">AUTO الباب العاشر في ذكر الحجر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head33">AUTO الباب الحادي عشر في ذكر الميزاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head34">AUTO الباب الثاني عشر في ذكر الحطيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head35">AUTO الباب الثالث عشر في فضل النظر إلى البيت ونزول الرحمة عليه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head36">AUTO الباب الرابع عشر في ذكر المواضع التي يستجاب فيها الدعاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head37">AUTO الباب الخامس عشر في ذكر طواف الحشرات بالبيت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head38">AUTO الباب السادس عشر في ذرع الكعبة من جهاتها الأربع وارتفاعها في السماء وذكر الشاذروان</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head39">AUTO تنبيه</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head40">AUTO الباب السابع عشر في ذكر المقام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head41">AUTO الباب الثامن عشر في ذكر ابتداء زمزم وتجديدها بعد دثورها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head42">AUTO الباب التاسع عشر في ذكر الشرب من ماء زمزم والوضوء والغسل وإزالة النجاسة به</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head43">AUTO الباب العشرون في أسماء زمزم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head44">AUTO الباب الحادي والعشرون في غور الماء قبل يوم القيامة إلا زمزم وذكر ذرعها وغور مائها وفوره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head45">AUTO الباب الثاني والعشرون في حد المسجد الحرام ومن هو حاضره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head46">AUTO الباب الثالث والعشرون في ذكر حال انتهاء البيت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head47">AUTO الباب الرابع والعشرون في أسماء مكة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head48">AUTO الباب الخامس والعشرون في فضل مكة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head49">AUTO الباب السادس والعشرون في فضل صوم رمضان بمكة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head50">AUTO الباب السابع والعشرون في أن الحسنات كلها تضاعف بمكة كالصلاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head51">AUTO الباب الثامن والعشرون في أن السيئات تضاعف فيها كما تضاعف الحسنات وأنه يعاقب عليها قبل فعلها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head52">AUTO الباب التاسع والعشرون في بيان أن أهل مكة أهل الله تعالى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head53">AUTO الباب الثلاثون في ذكر حدود الحرم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head54">AUTO الباب الحادي والثلاثون في ذكر نصب حدود الحرم وأول من نصبها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head55">AUTO الباب الثاني والثلاثون في ذكر تعظيم حرمة الحرم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head56">AUTO الباب الثالث والثلاثون في ذرع المسجد الحرام وعدد اسطواناته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head57">CHECK الباب الرابع والثلاثون في عدد الطاقات به</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head58">AUTO الباب الخامس والثلاثون في صفة أبواب المسجد وعددها وذرعها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head59">AUTO الباب السادس والثلاثون في ذرع جدرات المسجد وعدد شرفاته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head60">AUTO الباب السابع والثلاثون في حكم بيع مكة وإجارتها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head61">AUTO الباب الثامن والثلاثون في ذكر منى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head62">AUTO الباب التاسع والثلاثون في ذكر مسجد الخيف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head63">AUTO الباب الأربعون في ذكر آيات عظام بمنى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head64">AUTO الباب الحادي والأربعون في ذكر المزدلفة</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head65">AUTO تنبيه</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head66">AUTO الباب الثاني والأربعون في الطريق من المزدلفة إلى عرفة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head67">AUTO الباب الثالث والأربعون في ذكر عرفة وحدودها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head68">AUTO الباب الرابع والأربعون في ذكر المجاورة بمكة شرفها الله ms078 تعالى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head69">AUTO الباب الخامس والأربعون في كراهة نقل تراب الحرم وحجارته إلى الحل وعكسه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head70">AUTO الباب السادس والأربعون في بيان الحجاز</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head71">AUTO الباب السابع والأربعون في ذكر جزيرة العرب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head72">AUTO الباب الثامن والأربعون في ذكر خصائص البيت والمسجد الحرام وأحكامهما</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head73">AUTO تنبيه</a>
</li>
</ul>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">CHECK الكتاب الثاني في المسجد النبوي على صاحبه أفضل الصلاة والسلام وما يتعلق به</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head75">AUTO الباب الأول في ذكر بنائه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head76">AUTO الباب الثاني في فضله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head77">AUTO الباب الثالث في فضل الصلاة فيه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head78">AUTO الباب الرابع في ذكر منبر النبي - صلى الله عليه وسلم -</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head79">AUTO الباب الخامس في ذكر الروضة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head80">AUTO الباب السادس في حنين الجذع الذي كان في مسجد النبي - صلى الله عليه وسلم -</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head81">AUTO الباب السابع في ذكر بناء الجدار الذي سقط في زمن الوليد بن عبد الملك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head82">AUTO الباب الثامن في ذكر آثار حسنة في المسجد الشريف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head83">AUTO الباب التاسع في فضل المدينة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head84">AUTO الباب العاشر في ذكر حدود الحرم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head85">AUTO الباب الحادي عشر فى أسماء مدينة النبي - صلى الله عليه وسلم -</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head86">AUTO الباب الثاني عشر في ذكر خراب المدينة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head87">AUTO الباب الثالث عشر في ذكر خروج النار التي أخبر عنها المختار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head88">AUTO الباب الرابع عشر فيما جاء أن المدينة أقل الأرض مطرا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head89">AUTO الباب الخامس عشر هل المدينة حجازية أم شامية أم يمانية؟</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head90">AUTO الباب السادس عشر في ذكر ms126 جملة من الخصائص والأحكام والفضائل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head91">AUTO الباب السابع عشر في صفة قبر النبي وقبر صاحبيه رضي الله عنهما</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head92">AUTO الباب الثامن عشر في ذكر مسجد قباء وأهله</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head93">CHECK الكتاب الثالث في ذكر المسجد الأقصى وما يتعلق به</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head94">AUTO الباب الأول في معنى اسمه وابتداء بنائه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head95">AUTO الباب الثاني في فضله وفضل الصلاة فيه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head96">CHECK الباب الثالث في ذكر فتح بيت المقدس ومصلى المسلمين الذي بناه عمر رضي الله عنه والصخرة وغير ذلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head97">AUTO الباب الرابع في أسمائها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head98">AUTO الباب الخامس في ذكر جملة من خصائصه وأحكامه</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head99">CHECK الكتاب الرابع في ذكر بقية المساجد وذكر طرف من أخبار المدارس</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head100">AUTO الباب الأول في ذكر أول مسجد بني في الإسلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head101">AUTO الباب الثاني في ذكر طرف من أخبار المدارس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head102">AUTO الباب الثالث في ذكر أول مسجد وضع بالقاهرة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head103">AUTO الباب الرابع في ذكر أحكام تتعلق بسائر المساجد</a>
</li>
</ul>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 272164</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Abu Bakr Juraci</label><label>tags:  :: Sham@فقه حنبلي</label><label>url: https://raw.githubusercontent.com/OpenITI/0900AH/master/data/0883AbuBakrJuraci/0883AbuBakrJuraci.TuhfatRakic/0883AbuBakrJuraci.TuhfatRakic.Sham19Y0017419-ara1</label><label>tok_length: 65769</label><label>status: pri</label><label>id: Sham19Y0017419</label><label>ed_info: الأولى، 1425 ه - 2004 م :: وزارة الأوقاف الكويتية - إدارة مساجد محافظة الفروانية - المراقبة الثقافية.</label><label>title_lat: Tuhfat Rakic</label><label>title_ar: تحفة الراكع والساجد بأحكام المساجد</label><label>book: 0883AbuBakrJuraci.TuhfatRakic</label><label>author_lat: Abu Bakr Juraci</label><label>author_ar: أبو بكر بن زيد الجراعي الصالحي الحنبلي (المتوفى: 883 ه) :: الجراعي</label><label>date: 0883</label><label>versionUri: 0883AbuBakrJuraci.TuhfatRakic.Sham19Y0017419-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "029", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "312", "313", "314", "315", "316", "317", "318", "319", "320", "321", "322", "323", "324", "325", "326", "327", "328", "329", "330", "331", "332", "333", "334", "335", "336", "337", "338", "339", "340", "341", "342", "343", "344", "345", "346", "347", "348", "349", "350", "351", "352", "353", "354", "355", "356", "357", "358", "359", "360", "361", "362", "363", "364", "365", "366", "367", "368", "369", "370", "371", "372", "373", "374", "375", "376", "377", "378", "379", "380", "381", "382", "383", "384", "385", "386", "387", "388", "389", "390", "391", "392", "393", "394", "395", "396", "397", "398", "399", "400", "401", "402", "403", "404", "405", "406", "407", "408", "409", "410", "411", "412", "413", "414", "415", "005", "010", "032", "034", "035", "036", "037", "039", "040", "041", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "056", "057", "058", "059", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "103", "104", "105", "107", "108", "109", "110", "111", "112", "114", "115", "116", "117", "118", "120", "122", "123", "124", "125", "126", "127", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "144", "145", "147", "148", "149", "150", "153", "154", "155", "156", "158", "159", "160", "161", "164", "165", "166", "170", "172", "173", "174", "176", "178", "179", "184", "185", "186", "187", "188", "191", "195", "196", "198", "199", "200", "202", "203", "204", "205", "206", "207", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "220", "221", "222", "223", "224", "225", "226", "228", "230", "231", "232", "233", "234", "235", "237", "238", "240", "242", "243", "244", "245", "246", "248", "249", "252", "253", "254", "256", "257", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "305", "306", "307", "308", "309", "310", "311", "313", "315", "316", "317", "318", "319", "320", "321", "322", "323", "324", "325", "326", "327", "328", "330", "331", "332", "333", "334", "336", "337", "338", "339", "340", "341", "342", "344", "345", "346", "347", "349", "350", "352", "353", "354", "355", "356", "357", "358", "359", "360", "361", "362", "363", "364", "366", "368", "369", "370", "371", "372", "373", "374", "375", "376", "377", "378", "379", "380", "381", "382", "383", "384", "385", "386", "387", "388", "389", "390", "391", "392", "394", "395", "396", "397", "398", "399", "400", "401", "402", "403", "404", "405", "406", "407", "408", "409", "410", "411", "412", "413", "414", "415", "416"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
