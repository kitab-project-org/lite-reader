<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">إذا خرج من الخلاء قال: «غفرانك» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">يخرج فيبول فيتمسح بالتراب، فقال: يا رسول الله، الماء منك قريب! فقال: «ما أدري لعلي لا </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">الماء لا ينجس ".</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">: «إذا كان الماء قلتين لم يحمل الخبث» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">: «الماء لا ينجسه شيء إلا ما غلب على ريحه وطعمه ولونه» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">السنور سبع ".</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">، فجئته بإداوة، فإذا فيها نبيذ، فتوضأ رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">واحدة واحدة، فقال: «هذا وضوء من لا يقبل الله منه صلاة إلا به» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">يتوضأ، فغسل كفيه ثلاثا، وتمضمض ثلاثا، واستنشق ثلاثا، وغسل وجهه ثلاثا، وذراعيه ثلاثا ومسح </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">، فأمرني أن أمسح على الجبائر.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">توضأ، ثم أخذ حفنة من ماء، فقال بها هكذا - يعني: انتضح بها.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">إذا بال توضأ، وينتضح.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">، فتوضأ النبي صلى الله عليه وسلم فلما فرغ أخذ النبي صلى الله عليه وسلم بيده ماء، فنضح به </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">نزلت آية التيمم، ضرب رسول الله صلى الله عليه وسلم بيده على الأرض، فمسح بها وجهه، وضرب </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">العين وكاء السه، فمن نام فليتوضأ ".</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">: «لا وضوء إلا من صوت أو ريح» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">يقبلني، ثم يخرج إلى الصلاة ولا يحدث وضوء.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">يتوضأ، ثم يقبل، ثم يصلي ولا يتوضأ.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">قبل بعض نسائه، ثم خرج إلى الصلاة ولم يتوضأ.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">رجل مس ذكره في الصلاة؟ قال: «وهل هو إلا مضغة منه - أو بضعة منه -» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">أهراق الدم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">: «عدي أيام أقرائك» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">الذي يأتي امرأته وهي ms057 حائض: «يتصدق بدينار، أو بنصف دينار» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">هو ركضة من ركضات الشيطان، فتحيضي ستة أو سبعة أيام في علم الله عز وجل، ثم اغتسلي حتى إذا </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">يذكر الله على كل أحيانه.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">: «إنها ليست بنجس، إنها من الطوافين عليكم والطوافات» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">لا تستمتعوا من الميتة بإهاب ولا عصب ".</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">: «لا صلاة لمن لا وضوء له، ولا وضوء لمن ms077 لم يذكر اسم الله عليه» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">للوضوء شيطانا يقال له: ولهان، فاتقوا وسواس الماء ".</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">يتوضأ، والماء يسيل من وجهه ولحيته على صدره، فرأيته يفصل بين المضمضة والاستنشاق.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">توضأ بأعلى نهر، فلما فرغ ms083 من وضوئه أفرغ فضله في النهر، وقال: «يبلغه الله قوما ينفعهم به» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">: «الأذنان من الرأس» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">: توضأ عمر وبقي على بعض رجله قطعة لم يصبها الماء، فأمره رسول الله صلى الله عليه وسلم أن </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">مسح أعلى الخف وأسفله.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">فلقيه رجل فسلم عليه، فلم يرد عليه حتى أقبل على الجدار، فمسح بوجهه ويديه، ثم رد عليه </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">: " التيمم ضربتان: ضربة للوجه، وضربة لليدين إلى المرفقين ".</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">الاستطابة: «بثلاثة أحجار، ليس فيها رجيع» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">: «عليكم بالسواك» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">السواك من أذن النبي صلى الله عليه وسلم موضع القلم من أذن الكاتب.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">توضأ ثلاثا ثلاثا.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">، فغسل يديه قبل أن يدخلهما الإناء، ثم قال: هكذا رأيت رسول الله صلى الله عليه وسلم صنع.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">، فأخذ بيمينه الإناء فكفأ على يده اليسرى، فغسل كفيه ثلاث مرات.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">الوضوء مرة مرة، فقال: «هذا الذي افترض الله عليكم» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">خرج من الخلاء، فاتبعته بالإداوة أو القدح، فجلست له بالطريق، فكان إذا أتى حاجة أبعد.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">: «ويل للأعقاب من النار» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">: «أتموا الوضوء، ويل للأعقاب من النار» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">: «ويل للأعقاب من النار» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">: «ويل للأعقاب من النار» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">: صلى رسول الله صلى الله عليه وسلم يوم الفتح خمس صلوات بوضوء، ومسح على خفيه، فقال له عمر: </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">مخضب من صفر، قالت: فكنت أرجل رأس رسول الله صلى الله عليه وسلم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">مخضبا من صفر، فقالت: كان رسول الله صلى الله عليه وسلم يغتسل فيه.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">بال ثم توضأ، ومسح على خفيه.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">بال فتوضأ، ومسح على خفيه.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">يمسح على خفيه وخماره.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">: " للوضوء شيطان يقال له: الولهان ".</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">نغتسل من إناء واحد، وذلك القدح يومئذ يدعى الفرق.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">: «معك ماء؟» قلت: نعم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">: اختلفت يدي ويد رسول الله صلى الله عليه وسلم في الوضوء من إناء واحد.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">: «إذا استيقظ أحدكم من نومه فلا يغمس يده في الإناء حتى يغسلها ثلاثا، فإنه لا يدري أين باتت </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">، المرأة ترى ما يرى الرجل في المنام، فترى من نفسها ما يرى الرجل من نفسه؟ فقالت عائشة: يا أم </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">توضأ فمسح رأسه مرة.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">فأصب على رأسي ثلاث مرات» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">قبلها ثم مضى لوجهه ولم يحدث وضوء.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">: «بسم الله» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">ترك الوضوء مما مست النار.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">مسح على خفيه، ولكن أقبل «المائدة» أم بعدها؟ لا يخبرك أحد أن رسول الله صلى الله عليه وسلم </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">: «إذا استيقظ أحدكم من منامه فليغسل كفيه ثلاث مرات قبل أن يدخلها في الإناء، فإنه لا يدري أين </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">توضأ ثلاثا ثلاثا.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">توضأ مرة مرة، ثم قال: «هذا وضوءنا معشر الأنبياء فمن زاد على ذلك فقد أساء وأربى» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">تبرز وتوضأ ومسح على خفيه. . . وذكر الحديث.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">ترك الوضوء مما مست النار.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">أكل مع النبي صلى الله عليه وسلم لحما، ثم صلى ولم يتوضأ.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">توضأ وبقي على ظهر قدمه مثل ظفر إبهامه لم يمسه الماء، فقال له النبي صلى الله عليه وسلم: </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">: " إذا أخذت مضجعك فتوضأ وضوءك للصلاة، ثم اضطجع على شقك الأيمن، ثم قل: اللهم إني أسلمت وجهي </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">: «ويل للأعقاب من النار» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">مسح على عمامته وخفيه.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">توضأ وخلل لحيته.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">: أنتم الغر المحجلون من آثار الطهور، فمن استطاع منكم أن يطيل غرته فليفعل ".</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">ذهب لحاجته في غزوة تبوك، قال المغيرة: فذهبت معه بماء، فجاء رسول الله صلى الله عليه وسلم، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">إذا ذهب إلى الغائط أبعد.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">: «لينهكن أحدكم أصابعه قبل أن تنهكه النار» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">توضأ، فأفرغ على يديه ثلاثا فغسلهما، ثم مضمض واستنثر وغسل وجهه ثلاثا، وغسل يده اليمنى إلى </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">أشد ضفر رأسي، فأنقضه لغسل الجنابة؟ فقال: «لا، إنما يكفيك أن تحثي على رأسك ثلاث حثيات، ثم </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">: «الوضوء مما مست النار» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">: «من كان يؤمن بالله واليوم الآخر فليكرم جاره، ومن كان يؤمن بالله واليوم الآخر فليكرم ضيفه، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">: شرب رسول الله صلى الله عليه وسلم لبنا، ثم قال: «هاتوا ماء» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">: «ويل للأعقاب من النار» .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">يمسح على الموقين والخمار.</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 173941</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Cabd Hadi</label><label>tags: CENT0800 :: _AHKAM :: _CILAL :: _HADITH :: _MUSHKIL :: _SUALAT :: _TARAJIM :: GAL@nodata :: Shamela@العلل والسؤالات</label><label>url: https://raw.githubusercontent.com/OpenITI/0750AH/master/data/0744IbnCabdHadi/0744IbnCabdHadi.TacliqaCalaCilal/0744IbnCabdHadi.TacliqaCalaCilal.Shamela0011569-ara1</label><label>tok_length: 46009</label><label>status: pri</label><label>id: Shamela0011569</label><label>ed_info: سامي بن محمد بن جاد الله :: أضواء السلف، الرياض</label><label>title_lat: Tacliqa Cala Cilal</label><label>title_ar: تعليقة على العلل لابن أبي حاتم</label><label>book: 0744IbnCabdHadi.TacliqaCalaCilal</label><label>author_lat: Ibn Cabd Hadi</label><label>author_ar: شمس الدين محمد بن أحمد بن عبد الهادي بن يوسف الدمشقي الحنبلي (المتوفى: 744هـ)</label><label>date: 0744</label><label>versionUri: 0744IbnCabdHadi.TacliqaCalaCilal.Shamela0011569-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "101", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
