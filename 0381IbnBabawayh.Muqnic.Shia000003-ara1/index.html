<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">[أبواب الطهارة]</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head2">1 باب الوضوء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head3">2 باب السواك وفضله </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head4">3 باب التيمم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head5">4 باب ما يقع في البئر، والأواني من الناس، والبهائم، والطيور، وغير ذلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head6">5 باب الغسل من الجنابة وغيرها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head7">6 باب الحائض، والمستحاضة، والنفساء ورؤيتهن الدم، وغسلهن وما يجب عليهن من الصلاة وتركها </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head8">7 باب غسل الميت، وتكفينه، وتحنيطه، وتشييعه، ودفنه، والصلاة عليه </a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head9">صفة غسل الميت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head10">الصلاة ms016 على الميت</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head11">8 باب الصلاة على الطفل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head12">9 باب الصلاة على من لا يعرف مذهبه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head13">10 باب الصلاة على المستضعف </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head14">11 باب الصلاة على المنافق </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head15">12 باب زيارة القبور </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head16">13 [باب التعزية]</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">أبواب الصلاة </a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head18">1 باب المواضع التي تكره الصلاة فيها </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head19">2 باب ما يصلى فيه من الثياب، وما لا يصلى فيه، وغير ذلك </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head20">3 باب ما يسجد عليه وما لا يسجد عليه، وغير ذلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head21">4 باب الأعظم التي يقع عليها السجود</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head22">5 باب دخول المسجد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head23">6 باب الأذان والإقامة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head24">7 باب تسبيح فاطمة الزهراء - عليها السلام - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head25">8 باب أدنى ما يجزي من الدعاء بعد المكتوبة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head26">9 باب صلاة المرأة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head27">10 باب السهو في الصلاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head28">11 باب الجماعة وفضلها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head29">12 باب صلاة المريض </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head30">13 باب صلاة العريان </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head31">14 باب صلاة المغمى عليه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head32">15 باب الصلاة في السفينة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head33">16 باب الصلاة في السفر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head34">17 باب صلاة الخوف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head35">18 باب الصلاة في الحرب، والمسايفة، والمطاردة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head36">19 باب صلاة الليل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head37">20 باب ثواب صلاة الليل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head38">21 باب ثواب من أحيا ليلة تامة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head39">22 باب صلاة جعفر بن أبي طالب - عليه السلام - وثوابها </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head40">23 باب صلاة الكسوف، والزلزلة، والرياح، والظلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head41">24 باب صلاة يوم الجمعة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head42">25 باب صلاة العيدين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head43">26 باب صلاة الاستخارة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head44">27 باب صلاة الاستسقاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head45">28 باب صلاة الحاجة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head46">29 [باب صلاة الشكر]</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">أبواب الزكاة</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head48">1 باب ما يجب الزكاة عليه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head49">2 باب زكاة الحنطة والشعير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head50">3 باب زكاة التمر والزبيب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head51">4 باب زكاة الإبل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head52">5 باب زكاة البقر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head53">6 باب زكاة الغنم </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head54">7 باب زكاة الذهب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head55">8 باب زكاة الفضة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head56">9 باب زكاة السبائك </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head57">10 باب زكاة مال اليتيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head58">11 باب تقديم الزكاة وتأخيرها، وغير ذلك </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head59">12 باب من يعطى من ms043 الزكاة، ومن لا يعطى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head60">13 باب العتق من الزكاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head61">14 باب تكفين الموتى من الزكاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head62">15 باب زكاة الحلي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head63">16 باب زكاة المال إذا كان في تجارة</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">باب الخمس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">باب الصدقة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">أبواب الصوم</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head67">1 باب أن الصوم على أربعين وجها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head68">2 باب رؤية هلال شهر رمضان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head69">3 باب صوم اليوم الذي يشك فيه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head70">4 باب ما يفطر الصائم وما لا يفطره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head71">5 باب من أفطر، أو جامع في شهر رمضان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head72">6 باب من جامع، أو أفطر ناسيا في شهر رمضان، أو غيره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head73">7 باب من يضعف عن الصيام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head74">8 باب الوقت الذي يؤخذ الصبي فيه بالصوم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head75">9 باب تقصير المسافر في الصوم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head76">10 باب قضاء شهر رمضان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head77">11 باب الرجل يتطوع بالصيام وعليه شيء من شهر رمضان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head78">12 باب الرجل يسلم وقد مضى بعض شهر رمضان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head79">13 باب فضل السحور</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head80">14 باب الوقت الذي يجوز فيه الافطار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head81">15 باب فضل الصوم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head82">16 باب الاعتكاف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head83">17 باب الفطرة</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">باب الحج</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head85">الإفاضة من عرفات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head86">الحلق </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head87">التكبير أيام التشريق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head88">الصلاة في مسجد الخيف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head89">زيارة البيت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head90">إتيان الحجر الأسود</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head91">رمي الجمار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head92">الإفاضة من منى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head93">وداع البيت</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head94">باب ثواب الأعمال</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head95">باب النكاح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head96">باب العقيقة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head97">باب المتعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head98">باب الطلاق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head99">باب المكاسب والتجارات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head100">باب الربا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head101">باب الدين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head102">باب الكفالات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head103">باب اللقطة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head104">باب ما هو بمنزلة اللقطة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head105">باب الرهن، والوديعة، والعارية، وغير ذلك </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head106">باب المزارعة، والإجارة، وشراء أراضي أهل الذمة وبيعها، وبيع الكلاء والزرع وشرب الماء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head107">باب القضاء والأحكام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head108">باب الشفعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head109">باب الأيمان، والنذور، والكفارات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head110">باب الصيد والذبائح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head111">[أبواب الحدود]</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head112">1 باب الزنا، واللواط، وما يجب في ذلك من الحكم والحد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head113">2 باب حد القاذف وما يجب في ذلك من الحكم </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head114">3 باب حد السرقة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head115">٤ [باب حد المحارب]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head116">5 باب شرب الخمر، والغناء، وما يجب في ذلك من الحد والحكم</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head117">باب الملاهي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head118">باب العتق، والتدبير، والمكاتبة، والولاء، وغير ذلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head119">باب الوصايا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head120">باب المواريث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head121">باب الديات </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head122">باب ms156 الدخول في أعمال السلطان، وطلب الحوائج إليه </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head123">باب النوادر</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 615076</label><label>author_lat_full_name:  Abū Ǧaʿfar Muḥammad b. ʿAlī b. al-Ḥusayn b. Mūsā b. Bābawayh al-Qummī</label><label>author_lat_shuhra: Ibn Bābawayh, al-Šayḫ al-Ṣadūq</label><label>author_from_uri: Ibn Babawayh</label><label>tags: MARKDOWN :: CENT0400 :: _BEFORE800 :: _FIQH :: _SHICI :: GAL@period-classical :: GAL@literature-islamic :: GAL@imamis :: GAL@shia :: GAL@0750-1000CE :: GAL@literature-arabic :: GAL@fiqh :: Shia@فقه الشيعة الى القرن الثامن</label><label>url: https://raw.githubusercontent.com/OpenITI/0400AH/master/data/0381IbnBabawayh/0381IbnBabawayh.Muqnic/0381IbnBabawayh.Muqnic.Shia000003-ara1.mARkdown</label><label>tok_length: 182461</label><label>status: pri</label><label>id: Shia000003</label><label>ed_info: لجنة التحقيق التابعة لمؤسسة الإمام الهادي (ع) :: 1415 :: http://www.worldcat.org/oclc/39833265</label><label>title_lat: al-Muqniʿ :: al-Muqniʿ</label><label>title_ar: المقنع :: المقنع</label><label>book: 0381IbnBabawayh.Muqnic</label><label>author_lat: Ibn Babawayh :: Ibn Bābawayh, al-Šayḫ al-Ṣadūq ::  Abū Ǧaʿfar Muḥammad b. ʿAlī b. al-Ḥusayn b. Mūsā b. Bābawayh al-Qummī</label><label>author_ar: إبن بابويه، الشيخ الصدوق ::  أبو جعفر محمد بن علي بن الحسين بن موسا بن بابويه القمي</label><label>date: 0381</label><label>versionUri: 0381IbnBabawayh.Muqnic.Shia000003-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["003", "004", "005", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "171", "172", "173", "174", "175", "176", "177", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "312", "313", "314", "315", "316", "317", "318", "319", "320", "321", "322", "323", "324", "325", "326", "327", "328", "329", "330", "331", "332", "333", "335", "336", "337", "338", "339", "340", "341", "343", "344", "345", "346", "347", "348", "349", "350", "351", "352", "353", "354", "355", "356", "357", "358", "359", "360", "361", "362", "363", "364", "365", "366", "367", "368", "369", "370", "371", "372", "373", "374", "375", "376", "377", "378", "379", "380", "381", "382", "383", "384", "385", "386", "387", "389", "390", "391", "392", "393", "395", "396", "397", "398", "399", "400", "401", "402", "403", "405", "406", "407", "408", "409", "410", "411", "412", "413", "414", "415", "416", "417", "418", "419", "420", "421", "422", "423", "424", "425", "427", "428", "429", "430", "431", "432", "433", "434", "435", "436", "437", "438", "439", "440", "441", "442", "443", "444", "445", "446", "447", "448", "449", "450", "451", "452", "453", "454", "455", "456", "457", "458", "459", "460", "461", "462", "463", "464", "465", "466", "467", "468", "469", "470", "471", "472", "473", "474", "475", "477", "478", "479", "480", "481", "482", "483", "484", "485", "486", "487", "488", "489", "490", "491", "492", "493", "494", "495", "496", "497", "498", "499", "500", "501", "502", "503", "504", "505", "506", "507", "508", "509", "510", "511", "512", "513", "514", "515", "516", "517", "518", "519", "520", "521", "522", "523", "524", "525", "526", "527", "528", "529", "530", "531", "532", "533", "534", "535", "536", "537", "539", "540", "541", "542", "543", "544", "545", "546", "547"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
