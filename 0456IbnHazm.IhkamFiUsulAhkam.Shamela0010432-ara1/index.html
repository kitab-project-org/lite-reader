<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">الباب الرابع في كيفية ظهور اللغات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">فصل فيمن لم يبلغه الأمر من الشريعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">الباب السابع في أصول الأحكام في الديانة وأقسام المعارف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">الباب الثامن في البيان ومعناه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">الباب التاسع في تأخير البيان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">الباب العاشر في الأخذ بموجب القرآن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">الباب الحادي عشر في الكلام في الأخبار وهي السنن المنقولة عن رسول الله صلى الله عليه وسلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">فصل فيه أقسام الإخبار عن الله ms0101 تعالى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head0">فصل في خلاف الصاحب للرواية وتعلل أهل الباطل بذلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head1">فصل فيما ادعاه قوم من تعارض النصوص</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head2">فصل في تمام الكلام في تعارض النصوص</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head3"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head4">فصل فيمن قال لا يجوز تخصيص القرآن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head5">فصل وقد يرد خبر مرسل إلا أن الإجماع صح بما فيه متيقنا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head6">فصل في إبطال ترجيح الحديث بعمل أهل المدينة وإبطال الاحتجاج بعملهم أيضا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head7">فصل فيه بيان سبب الاختلاف الواقع بين الأئمة في صدر هذه الأمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head8">فصل في صفة الرواية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head9">فصل وقد تعلل قوم في أحاديث صحاح بأن قالوا هذا حديث أسنده فلان وأرسله فلان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head0">الباب الثاني عشر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head1">فصل في كيفية ورود الأمر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head2">فصل في حمل الأوامر والأخبار على ظواهرها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head3">فصل في الأوامر أعلى الفور هي أم على التراخي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head4">فصل في الأمر المؤقت بوقت محدود الطرفين في الأمر المؤقت بوقت محدود الطرفين متى يجب أفي أوله أم في آخره والأمر المرتبط به بصفة ما والأمر المؤقت بوقت محدود الأول غير محدود الآخر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head5">فصل في موافقة معنى الأمر لمعنى النهي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head6">فصل في الأمر هل يتكرر أبدا أو يجري منه ما يستحق به المأمور اسم فاعل لما أمر به</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head7">فصل في التخيير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head8">فصل في الأمر بعد الحظر ومراتب الشريعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head9">فصل في ورود الأمر بلفظ خطاب الذكور</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head10">فصل في الخطاب الوارد هل يخص به الأحرار دون العبيد أم يدخل فيه العبيد معهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head11">فصل في أوامر ورد فيها ذكر حكمه عليه السلام ولم يأت فيها من لفظه عليه السلام السبب المحكوم فيه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head12">فصل في ورود حكمين بنقل يدل لفظه على أنهما في ms0387 أمر واحد لا أمرين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head13">فصل في عطف الأوامر بعضها على بعض</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head14">فصل في تناقض القائلين بالوقف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head15">الباب الثالث عشر في حمل الأمر وسائر الألفاظ كلها على العموم وإبطال قول من قال في كل ذلك بالوقفأو الخصوص إلا ما أخرجه عن العموم دليل حق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head16">فصل في بيان العموم والخصوص</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head17">فصل في مسائل من العموم والخصوص</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head18">فصل من الكلام في العموم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head19">فصل من العموم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head0">الباب الرابع عشر في أقل الجمع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head1">فصل من الخطاب الوارد بلفظ الجمع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head2">الباب الخامس عشر في الاستثناء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head3">فصل من الاستثناء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head4">الباب ms0487 السادس عشر في الكناية بالضمير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head5">الباب السابع عشر في الإشارة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head6">الباب الثامن عشر في المجاز والتشبيه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head7">فصل في التشبيه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head8">الباب التاسع عشر في أفعال رسول الله صلى الله عليه وسلم وفي الشيء يراه عليه السلام أو يبلغه فيقره صامتا عليه لا يأمر به ولا ينهى عنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head9">فصل في إمكان النسخ ثم إيجابه ثم امتناعه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head10">فصل فيما يجوز النسخ فيه وفيما لا يجوز فيه النسخ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head11">فصل هل يجوز نسخ الناسخ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head12">فصل في مناقل النسخ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head13">فصل في آية ينسخ بعضها ما حكم سائرها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head14">فصل في كيف يعلم المنسوخ والناسخ مما ليس منسوخا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head15">فصل في نسخ الأخف بالأثقل والأثقل بالأخف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head16">فصل في نسخ الشيء قبل أن يعمل به</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head17">فصل في نسخ القرآن بالسنة والسنة بالقرآن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head18">فصل في نسخ الفعل بالأمر والأمر بالفعل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head19">فصل في متى يقع النسخ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head20">فصل في النسخ بالإجماع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head21">فصل في رد المؤلف على من أجاز نسخ القرآن والسنة بالقياس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head22">الباب الحادي والعشرون في المتشابه من القرآن والفرق بينه وبين المتشابه في الأحكام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head23">الباب الثاني والعشرون في الإجماع وعن أي شيء يكون الإجماع وكيف ينقل الإجماع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head24">فصل في من قال إن الإجماع لا يجوز لأحد خلافه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head25">فصل فيمن قال ما لا يعرف فيه خلاف فهو إجماع وبسط الكلام فيما هو إجماع وفيما ليس إجماعا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head26">فصل في من قال بأن خلاف الواحد من الصحابة أو ممن بعدهم لا يعد خلافا وأن قول من سواه فيمن خالفهم فيه إجماع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head27">فصل في قول من قال قول الأكثر هو الإجماع ولا يعتد بقول الأقل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head28">فصل في إبطال قول من قال الإجماع هو إجماع أهل المدينة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head29">فصل فيمن قال إن الإجماع هو إجماع أهل الكوفة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head30">فصل في إبطال قول من قال إن قول الواحد من الصحابة رضي الله عنهم إذا لم يعرف له</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head31">فصل واختلفوا هل يدخل أهل الأهواء أم لا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="05.html#head0">الباب الثالث والعشرون في استصحاب الحال وبطلان جميع العقود والعهود والشروط إلا ما أوجبه منها قرآن أو سنة عن رسول الله صلى الله عليه وسلم ثابتة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="05.html#head1">الباب الرابع والعشرون وهو باب الحكم بأقل ما قيل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="05.html#head2">الباب الخامس والعشرون في ذم الاختلاف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="05.html#head3">الباب السادس والعشرون في أن الحق في واحد وسائر الأقوال كلها باطل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="05.html#head4">الباب السابع والعشرون في الشذوذ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="05.html#head5">الباب الثامن والعشرون في تسمية الصحابة الذين رويت عنهم الفتيا وتسمية الفقهاءالمذكورين في الاختلاف بعد عصر الصحابة رضي الله عنهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="05.html#head6">الباب التاسع والعشرون في الدليل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="05.html#head7">الباب الثلاثون في لزوم الشريعة الإسلامية لكل مؤمن وكافر في الأرض ووقت لزوم الشرائع للإنسان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="05.html#head8">الباب الحادي والثلاثون في صفة التفقه في الدين وما يلزم كل امرىء طلبه من دينه وصفة المفتيالذي لم يفت في الدين وصفة الاجتهاد الواجب على أهل الإسلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="05.html#head9">الباب الثاني والثلاثون في وجوب النيات في جميع الأعمال والفرق بين الخطأ الذي تعمد فعله ولم يقصد به خلاف ما أمر وبين الخطأ الذي لم يتعمد فعله وبين العمل المصحوب بالقصد إليه وحيث يلحق عمل المرء غيره بأجر أو إثم وحيث لا يلحق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="05.html#head10">الباب الثالث والثلاثون في شرائع الأنبياء عليهم السلام قبل محمد صلى الله عليه وسلم أيلزمنا اتباعها ما لم ننه عنها أم لا يجوز لنا اتباع شيء منها أصلا إلا ما كان منها في شريعتنا وأمرنا نحن به نصا باسمه فقط</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head0">الباب الرابع والثلاثون في الاحتياط وقطع الذرائع والمشتبه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head1">الباب الخامس والثلاثون في الاستحسان والاستنباط في الرأي وإبطال كل ذلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head2">الباب السادس والثلاثون في إبطال التقليد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="07.html#head0">الباب السابع والثلاثون في دليل الخطاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="07.html#head1">فصل في إبطال دعواهم في دليل الخطاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="07.html#head2">فصل في عظيم تناقضهم في هذا الباب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="07.html#head3">الباب الثامن والثلاثون في إبطال القياس في أحكام الدين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head0">الباب التاسع والثلاثون في إبطال القول بالعلل في جميع أحكام الدين</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 1625671</label><label>author_lat_full_name:  Abū Muḥammad ʿAlī b. Aḥmad b. Saʿīd b. Ḥazm al-Andalusī, al-Qurṭubī, al-Ẓāhirī</label><label>author_lat_shuhra: Ibn Ḥazm</label><label>author_from_uri: Ibn Hazm</label><label>tags: CENT0500 :: _FIQH :: _QAWACID :: _SUNNI :: _USUL :: GAL@literature-islamic :: GAL@1000-1258CE :: GAL@zahiris :: GAL@almohads :: GAL@literature-arabic :: GAL@period-postclassical :: GAL@fiqh :: Shamela@أصول الفقه والقواعد الفقهية</label><label>url: https://raw.githubusercontent.com/OpenITI/0475AH/master/data/0456IbnHazm/0456IbnHazm.IhkamFiUsulAhkam/0456IbnHazm.IhkamFiUsulAhkam.Shamela0010432-ara1</label><label>tok_length: 408723</label><label>status: sec</label><label>id: Shamela0010432</label><label>ed_info: الشيخ أحمد محمد شاكر :: دار الآفاق الجديدة، بيروت</label><label>title_lat: Ihkam Fi Usul Ahkam</label><label>title_ar: الإحكام في أصول الأحكام</label><label>book: 0456IbnHazm.IhkamFiUsulAhkam</label><label>author_lat: Ibn Hazm :: Ibn Ḥazm ::  Abū Muḥammad ʿAlī b. Aḥmad b. Saʿīd b. Ḥazm al-Andalusī, al-Qurṭubī, al-Ẓāhirī</label><label>author_ar: إبن حزم ::  أبو محمد علي بن أحمد بن سعيد بن حزم الأندلسي، القرطبي، الظاهري</label><label>date: 0456</label><label>versionUri: 0456IbnHazm.IhkamFiUsulAhkam.Shamela0010432-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150"], "02": ["002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149"], "03": ["002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160"], "04": ["002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238"], "05": ["002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187"], "06": ["002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182"], "07": ["002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204"], "08": ["002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
