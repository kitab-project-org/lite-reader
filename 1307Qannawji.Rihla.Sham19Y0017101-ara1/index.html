<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">AUTO مقدمة إدارة الشؤون الإسلامية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">AUTO الباب الأول</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head2">AUTO 1 - فصل في فضل مكة -زادها الله تشريفا وتكريما-</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head3">AUTO 2 - فصل في أسمائها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head4">AUTO 3 - فصل في ألقابها وحدودها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head5">AUTO 4 - فصل في جبالها وحكم زيارتها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head6">AUTO 5 - فصل في حكم المجاورة بها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head7">AUTO 6 - فصل في الموت بها، وذكر من دفن بها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head8">AUTO 7 - فصل في آداب المجاورة بها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head9">AUTO 8 - فصل في مساجدها ودورها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head10">AUTO 9 - فصل في خطاها والمشي فيها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head11">AUTO 10 - فصل في النظر إلى البيت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head12">AUTO 11 - فصل في محلات يستجاب الدعاء بها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head13">AUTO 12 - فصل في بعض آياتها</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">AUTO الباب الثاني</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head15">AUTO 1 - فصل في فضل الحاج والمعتمر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head16">AUTO 2 - فصل في فضل رمضان بمكة والعمرة بها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head17">AUTO 3 - فصل في فضل الطواف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head18">AUTO 4 - فصل فيما جاء في الحجر والركنين والملتزم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head19">AUTO 5 - فصل في المشي بين الصفا والمروة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head20">AUTO 6 - فصل في فضل شرب ماء زمزم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head21">AUTO 7 - فصل في أسماء ماء زمزم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head22">AUTO 8 - فصل في المحافظة على الصلوات في المسجد الحرام جماعة في أوقاتها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head23">AUTO 9 - فصل في فضل من صبر على حرها ولأوائها</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">AUTO الباب الثالث</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head25">AUTO 1 - فصل في الترغيب في الحج والعمرة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head26">AUTO 2 - فصل في آداب سفر الحج، وهي كثيرة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head27">AUTO 3 - فصل في وجوب الحج والعمرة لله -عز وجل-</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head28">AUTO 4 - فصل في وجوب الحج على الفور</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head29">AUTO 5 - فصل في اعتبار الزاد والراحلة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head30">AUTO 6 - فصل في ركوب البحر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head31">AUTO 7 - فصل في حج الصبي والرقيق والحج عن الغير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head32">AUTO 8 - فصل في أنواع الحج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head33">AUTO 9 - فصل في بيان الأفضل من هذه الأنواع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head34">AUTO 10 - فصل في نوع حجه - صلى الله عليه وسلم -</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head35">AUTO 11 - فصل في إدخال العمرة على الحج وفسخه إليها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head36">AUTO 12 - فصل في مواقيت الحج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head37">AUTO 13 - فصل في ميقات العمرة وهو الحل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head38">AUTO 14 - فصل في كراهة الإحرام قبل أشهر الحج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head39">AUTO 15 - فصل في جواز العمرة في جميع السنة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head40">AUTO 16 - فصل في وجوه الإحرام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head41">AUTO 17 - فصل فيمن أحرم مطلقا، أو قال: أحرمت بما أحرم به فلان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head42">AUTO 18 - فصل في الاشتراط</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head43">AUTO 19 - فصل في الفوات والإحصار ووجوب الهدي على المحصر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head44">AUTO 20 - فصل في حكم الهدي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head45">AUTO 21 - فصل في ركوب الهدي والحمل عليه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head46">AUTO 22 - فصل فيما يجتنبه المحرم وما يباح له</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head47">AUTO 23 - فصل في الفدية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head48">AUTO 24 - فصل في نكاح المحرم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head49">AUTO 25 - فصل في صيد المحرم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head50">AUTO 26 - فصل في جزاء الصيد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head51">AUTO 27 - فصل في قتل المؤذيات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head52">AUTO 28 - فصل في حرم مكة المكرمة -زادها الله تعالى تعظيما-</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head53">AUTO 29 - فصل في حرم المدينة المنورة -زاد الله شرفها-</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head54">AUTO 30 - فصل في حرم وج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head55">AUTO 31 - فصل في التفاضل بين مكة والمدينة</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">AUTO الباب الرابع</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head57">AUTO 1 - فصل في آداب الإحرام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head58">AUTO 2 - فصل في قطع التلبية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head59">AUTO 3 - فصل في آداب دخول مكة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head60">AUTO 4 - فصل في آداب الطواف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head61">AUTO 5 - فصل في صفة الطواف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head62">AUTO 6 - فصل في السعي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head63">AUTO 7 - فصل في المسير إلى منى، ومنها إلى عرفة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head64">AUTO 8 - فصل في الوقوف بعرفة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head65">AUTO 9 - فصل في الإفاضة من عرفة إلى المزدلفة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head66">AUTO 10 - فصل في الوقوف بالمشعر الحرام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head67">AUTO 11 - فصل في رمي جمرة العقبة يوم النحر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head68">AUTO 12 - فصل في نحر الهدى وتحسينه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head69">AUTO 13 - فصل في الحلق والتقصير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head70">AUTO 14 - فصل في ترتيب الرمي والنحر والحلق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head71">AUTO 15 - فصل في الإفاضة من منى للطواف يوم النحر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head72">AUTO 16 - فصل في المبيت بمنى، وما يفعل في أيامها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head73">AUTO 17 - فصل في التحصيب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head74">AUTO 18 - فصل في دخول الكعبة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head75">AUTO 19 - فصل في صفة العمرة المفردة، وما يتصل بها من إكثار الاعتمار والطواف، وشرب زمزم وغيرها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head76">AUTO 20 - فصل في طواف الوداع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head77">AUTO 21 - فصل في زيارة المساجد وأبنية مكة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head78">AUTO 22 - فصل في الرجوع من حج أو عمرة وما يتصل به</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">AUTO الباب الخامس</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head80">AUTO 1 - فصل في حكم الزيارة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head81">AUTO 2 - فصل في آداب الزيارة وما يتصل بها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head82">AUTO 3 - فصل في فضائل "المدينة" وما يشبهها</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">AUTO خاتمة</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 194566</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Qannawji</label><label>tags:  :: Sham@فقه عام</label><label>url: https://raw.githubusercontent.com/OpenITI/1325AH/master/data/1307Qannawji/1307Qannawji.Rihla/1307Qannawji.Rihla.Sham19Y0017101-ara1</label><label>tok_length: 46490</label><label>status: pri</label><label>id: Sham19Y0017101</label><label>ed_info: الأولى، 1428 ه - 2007 م :: وزارة الأوقاف والشؤون الإسلامية، قطر</label><label>title_lat: Rihla</label><label>title_ar: رحلة الصديق إلى البلد العتيق</label><label>book: 1307Qannawji.Rihla</label><label>author_lat: Qannawji</label><label>author_ar: أبو الطيب محمد صديق خان بن حسن بن علي ابن لطف الله الحسيني البخاري القنوجي (المتوفى: 1307ه) :: صديق حسن خان</label><label>date: 1307</label><label>versionUri: 1307Qannawji.Rihla.Sham19Y0017101-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "009", "014", "015", "016", "106", "113", "125", "129", "130", "131", "134", "150", "159", "160"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
