<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">- * الشيخ الأول والدي أبو العباس أحمد بن إبراهيم بن أحمد الرازي الفقيه على مذهب الشافعي رحمه الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">- * الشيخ الثاني أبو الحسن علي بن عمر بن محمد الحراني الصواف المعروف بابن حمصة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">- * الشيخ الثالث أبو الحسن علي بن ربيعة بن علي التميمي البزاز</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">- * الشيخ الرابع أبو القاسم علي بن محمد بن علي بن أحمد بن عيسى الفارسي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">- * الشيخ الخامس أبو الحسن محمد بن الحسين بن محمد بن الحسين بن أحمد بن السري البزاز المقرىء ويعرف بابن الطفال النيسابوري</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">- * الشيخ السادس أبو الحسن أحمد بن محمد بن أحمد بن نصر بن الفتح الوراق ويعرف بالحكيمي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">- * الشيخ السابع أبو الحسن عبد الملك بن عبد الله بن محمود بن صهيب بن مسكين الزجاج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">- * الشيخ الثامن أبو الفضل أحمد بن علي بن محمد بن سلمة بن علي بن عيسى الفهمي الأنماطي ويكنى أبا العباس أيضا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">- * الشيخ التاسع أبو أحمد العباس بن الفضل بن جعفر بن الفضل بن محمد بن موسى بن الحسن بن الفرات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">- * الشيخ العاشر أبو الحسن علي بن عبيد الله بن محمد بن إبراهيم الكسائي الهمداني المدعو بالقاضي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">- * الشيخ الحادي عشر أبو القاسم علي بن عبد الواحد بن عيسى النجيرمي الكاتب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">- * الشيخ الثاني عشر أبو الطاهر محمد بن الحسين بن سعدون الموصلي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">- * الشيخ الثالث عشر أبو القاسم يحيى بن الحسين بن موسى بن عيسى بن علي المطار العدل المعروف بالقفاص الفقيه على مذهب الشافعي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">- * الشيخ الرابع عشر أبو العباس أحمد بن سعيد بن أحمد بن نفيس المقرىء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">- * الشيخ الخامس عشر أبو الحسن علي بن الحسين بن علي بن شعبان الخولاني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">- * الشيخ السادس عشر أبو القاسم عبد الرحمن بن المظفر بن عبد الرحمن بم محمد الكحال السلمي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">- * الشيخ السابع عشر أبو محمد عبد الله بن الوليد بن سعد بن بكر الأنصاري</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">- * الشيخ الثامن عشر القاضي أبو الفضل محمد بن أحمد بن عيسى بن عبد الله بن عبد الوهاب السعدي البغدادي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">- * الشيخ التاسع عشر أبو عبد الله الحسين بن أحمد بن بكار بن فارس بن علي الكندي المقرىء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">- * الشيخ العشرون أبو صالح محمد بن أبي عدي بن الفضل السمرقندي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">- * الشيخ الحادي والعشرون أبو العباس أحمد بن علي بن هاشم المقرىء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">- * الشيخ الثاني والعشرون أبو الحسين محمد بن الحسين بن علي بن الترجمان الغزي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">- * الشيخ الثالث والعشرون أبو عبد الله الحسين بن أحمد بن الحسن العداس الحاسب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">- * الشيخ الرابع والعشرون الشريف أبو إبراهيم أحمد بن القاسم بن الميمون بن حمزة بن الحسين بن محمد بن الحسين بن حمزة بن عبيد الله بن الحسين بن علي بن الحسين بن علي بن أبي طالب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">- * الشيخ الخامس والعشرون أبو الفيض ذو النون بن أحمد بن محمد بن أحمد بن إبراهيم بن إسحاق المصري المعروف بالعصار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">- * الشيخ السادس والعشرون أبو الحسن علي بن بقاء بن محمد الوراق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">- * الشيخ السابع والعشرون أبو القاسم عبد العزيز بن علي بن الحسين بن الحسن بن علي بن محمد بن يحيى الدقاق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">- * الشيخ الثامن والعشرون أبو عبد الله محمد بن أحمد بن علي القزويني المقرىء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">- * الشيخ التاسع والعشرون القاضي أبو بكر أحمد بن عبيد الله بن محمد بن عبد الله بن إسحاق البغدادي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">- * الشيخ الثلاثون القاضي أبو عبد الله محمد بن سلامة بن جعفر بن علي القضاعي قاضي مصر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">- * الشيخ الحادي والثلاثون أبو طالب علي بن عبد السميع بن عمر الشريف الهاشمي وكان من أولاد العباس بن عبد المطلب عم رسول الله صلى الله عليه وسلم ورضي عنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">- * الشيخ الثاني والثلاثون أبو محمد الحسن بن الحسين بن عتيق بن جعفر بن أحمد بن عبد الله بن مطر التجيبي الجهازي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">- * الشيخ الثالث والثلاثون أبو زكريا عبد الرحيم بن أحمد بن نصر بن إسحاق بن عمرو بن مزاحم بن غياث البخاري الحافظ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">- * الشيخ الرابع والثلاثون أبو الفتح أحمد بن بابشاذ بن داود بن سليمان الجوهري الواعظ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">- * الشيخ الخامس والثلاثون أبو بكر محمد بن إسماعيل بن أحمد الكجي الجوهري</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">- * الشيخ السادس والثلاثون أبو نصر عبد الملك بن علي بن سابور المقرىء البغدادي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">- * الشيخ السابع والثلاثون أبو عبد الله الحسين بن عبد الله بن الحسين بن محمد بن الشويح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">- * الشيخ الثامن والثلاثون القاضي أبو الحسين محمد بن حمود بن عمر بن عبد الأحد المعروف بابن الدليل الصواف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">- * الشيخ التاسع والثلاثون أبو الحسين نصر بن عبد العزيز بن أحمد بن نوح الفارسي الشيرازي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">- * الشيخ الأربعون أبو إسحاق إبراهيم بن سعيد بن عبد الله الحافظ المعروف بالحبال</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">- * الشيخ الحادي والأربعون أبو نصر إبراهيم بن الحسين بن حاتم البغدادي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">- * الشيخ الثاني والأربعون أبو محمد الحسين بن محمد بن أحمد النيسابوري الواعظ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">- * الشيخ الثالث والأربعون أبو عبد الله محمد بن الفرج بن عبد الولي الأنصاري الأندلسي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">- * الشيخ الرابع والأربعون أبو علي الحسن بن علي بن الحسن القروي الحضرمي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">- * الشيخ الخامس والأربعون أبو الحسين محمد بن الحسن بن بريه القلزمي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">- * الشيخ السادس والأربعون أبو عبد الله الحسين بن علي بن نعيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">- * الشيخ السابع والأربعون </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">حكايات ثلاث لأبي عبد الله الرازي</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 91938</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Abu Tahir Silafi</label><label>tags: COMPLETED :: CENT0600 :: PPE :: _AJZA :: _HADITH :: _MISC :: _TARAJIM :: GAL@literature-islamic :: GAL@1000-1258CE :: GAL@hadith :: GAL@literature-arabic :: GAL@period-postclassical :: GAL@persia :: JK@أجزاء حديثية :: JK@أخرى :: JK@كتب الحديث النبوي الشريف وتراجم الرواة</label><label>url: https://raw.githubusercontent.com/OpenITI/0600AH/master/data/0576AbuTahirSilafi/0576AbuTahirSilafi.Mashyakha/0576AbuTahirSilafi.Mashyakha.JK000649-ara1.completed</label><label>tok_length: 22315</label><label>status: pri</label><label>id: JK000649</label><label>ed_info: http://www.worldcat.org/oclc/44102829</label><label>title_lat: Mashyakha</label><label>title_ar: مشيخة الشيخ الأجل أبي عبد الله محمد الرازي(م) :: مشيخة الشيخ الأجل أبي عبد الله محمد الرازي</label><label>book: 0576AbuTahirSilafi.Mashyakha</label><label>author_lat: Abu Tahir Silafi</label><label>author_ar: أبو طاهر السلفي :: أبي طاهر السلفي(م)</label><label>date: 0576</label><label>versionUri: 0576AbuTahirSilafi.Mashyakha.JK000649-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["001", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "312", "313", "314", "315", "316", "317", "318", "319", "320", "321", "322", "323", "324"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
