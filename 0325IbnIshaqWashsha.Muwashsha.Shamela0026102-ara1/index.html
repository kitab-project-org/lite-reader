<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0"></a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head1">مقدمة المؤلف</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head2"></a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head3">البيان عن حدود الأدب ما يجب على الأدباء من الفحص والطلب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head4">النهي عن ممازحة الأخلاء والنهي عن مفاكهة الأوداء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head5">الأمر باختيار الإخوان وانتخاب الأقران والأخدان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head6">الحث على صحبة الإخوان والإغراء على مودة الخلان والرغبة في أهل الصلاح والإيمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head7">صفة المتحابين في الله عز وجل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head8">البشاشة بالإخوان والصبر على تألف قلوب ذوي الأضغان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head9">اتفاق القلوب على مودة الصديق وقلة الخلاف على الرفيق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head10">النهي عن استعمال الإفراط في حب الصديق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head11">الأمر بإغباب زيارة الأحباب والنهي عن مداومة غشيان الأصحاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head12">شرائع المروة وصفتها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head13">ما جاء من فضل الصدق لذوي الآداب وما كره من الكذب لذوي الألباب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head14">ما جاء في قبح خلف المواعيد وما يلحق صاحبه من اللوم والتفنيد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head15">الحث على كتمان السر والترغيب في حفظ ما حنت عليه ضلوع الصدر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head16">سنن الظرف</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head17">ابنة عبد الملك والمحبوس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head18">عبد الله القس وسلامة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head19">علي بن أبي طالب والمؤذن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head20">عبد الملك بن مروان وبثينة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head21">جميل في يومه الأخير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head22">عمر بن أبي ربيع وامرأة من ربيعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head23">الأعرابي المتعفف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head24">الأعرابي العاشق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head25">تعريف الظرف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head26">مجنون ليلى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head27">لا بأس بالعشق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head28">علامات الهوى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head29">سكينة وابن أذينة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head30">العباس بن الأحنف والجارية العاشقة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head31">المأمون وعمه إبراهيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head32">مدح الضمر وذم السمن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head33">جميل بن معمر والبطين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head34">كيف يكون العاشق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head35">المأمون ومخارق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head36">المتوكل وجاريته قبيحة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head37">من اشتهروا بالعشق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head38">موت عروة بن حزام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head39">مجنون بني عامر وليلاه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head40">ثلاثة أماتهم الحب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head41">حديث الجاحظ عن قتلى الحب</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head42">من مات من شدة الفقد وتضعضعت أعضاؤه من شدة الوجد</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head43">حكايات عمن قتلهم الحب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head44">الفتاة التي أكلها السبع</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head45">من وصف الحب  وما فيه من شدة المرارة والكرب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head46">ما في معرفة الهوى وما كان اسمه في البداية أولا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head47">ما سئل عنه أهل الصدق من تمام خلات العشق</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head48">قتيل الهوى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head49">دماء العشاق مهدورة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head50">شهداء الحب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head51">ممن يحسن الحب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head52">مسامير الحب</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head53">ما جاء فيمن تعفف في محبته  ورعى عقود عهود مودته</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head54">الغدر طبع في النساء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head55">غدر الرجال</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head56">وفاء النساء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head57">عبد الله بن علقمة وحبيشة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head58">عفراء وعروة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head59">هاتف من القبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head60">مالك الغساني وابنة عم النعمان بن بشير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head61">العامرية ووفاؤها</a>
</li>
</ul>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">الجزء الثاني</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head63">صفة ذم القيان ونفوذ حيلتهن في الفتيان</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head64">بمن يحسن العشق</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head65">ما جاء في مصارمة ذوي الغدر والمبادرة عند الملل والهجر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head66">النهي عن الهوى والتعرض لأسباب الضنى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head67">ذكر زي الظرفاء في اللباس المستحسن ms095 عند سروات الناس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head68">زي الظراف في التكك والنعال والخفاف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head69">زيهم المخصوص في الخواتيم والفصوص</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head70">زيهم في التعطر والطيب الذي من خالفه كان غير مصيب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head71">في متظرفات النساء.. في اللباس المخالف لزي الظرفاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head72">زيهن المخالف لزي الرجال في لبس التكك والخفاف والنعال</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head73">ذكر زي الظرفاء في الطعام الذي ms099 بانوا به عن منزلة اللئام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head74">ذكر زيهم في الشراب الذي يتخيره ذوو الألباب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head75">ذكر الأشياء التي يتطير الظرفاء من إهدائها ويرغبون عنها لشناعة أسمائها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head76">ما قيل في صفة الورد ومحله من قلوب ذوي الوجد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head77">ذكر التفاح وما كره الأدباء من أكله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head78">ما جاء في السواك  وما قيل في عود الأراك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head79">صفة ذوي التظرف ومباينتهم لذوي التكلف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head80">ما اختير من ألفاظ الأدباء في المكاتبات واستحسن من الظرفاء من مليح المعاتبات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head81">ما ضمنوه كتبهم من الأشعار وتكاتب به ذوو الظرف والأخطار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head82">مما ضمنوه كتبهم من السلام وجعلوه تلوا للشعر والنظام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head83">ما كتبوه على العنوانات وسلكوا به سبيل المداعبات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head84">ما يكتب على الفصوص</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head85">ومما ينقشه أهل الحزم على خواتيمهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head86">وفي ضرب آخر </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head87">ومما ينقشه أهل الهوى على خواتيمهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head88">وفي ضرب آخر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head89">وفي صرب منه آخر </a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head90">ما وجد على التفاح من الألفاظ الملاح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head91">ما وجد على ذيول الأقمصة والأعلام وطرز الأردية والأكمام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head92">ما وجد على الكرازن والعصائب ومشاد الطرر والذوائب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head93">ما وجد على الزنانير والتكك والمناديل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head94">ما وجد على الستور والوسائد والبسط والمرافق والمقاعد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head95">ما وجد على المناص والحجل والأسرة والكلل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head96">ما يكتب على المجالس والأبواب ووجوه المستنظرات وصدور القباب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head97">ما وجد للمتظرفات والظراف مكتوبا على النعال والخفاف </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head98">ما يكتب بالحناء في الوطأة والوشاح وعلى الأقدام والراح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head99">ما يكتب على الجبين والخد ويطرف به ذوو الصبابة والوجد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head100">ما يفلج به التفاح والأترج والدستبويات.. ويعدل به تنضيد الورد والياسمين والخيريات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head101">ما يكتب على القناني والكاسات والأقداح والأرطال والجامات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head102">ما يكتب على أواني الفضة والذهب ومدهون الصيني المذهب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head103">ما يكتب على العيدان والمضارب.. والسرنايات والطبول والمعازف والدفوف والنايات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head104">ما يكتب على الأقلام من مستظرف الكلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head105">ما يكتب على الدراهم والدنانير التي ضربت للملوك في المقاصير</a>
</li>
</ul>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 178652</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Ishaq Washsha</label><label>tags: COMPLETED :: CENT0400 :: _ADAB :: _ADAB :: _BALAGHA :: _MISC :: GAL@period-classical :: GAL@literature-islamic :: GAL@baghdad-school :: GAL@0750-1000CE :: GAL@iraq :: GAL@literature-arabic :: GAL@philology :: GAL@baghdad :: Shamela@الأدب والبلاغة</label><label>url: https://raw.githubusercontent.com/OpenITI/0325AH/master/data/0325IbnIshaqWashsha/0325IbnIshaqWashsha.Muwashsha/0325IbnIshaqWashsha.Muwashsha.Shamela0026102-ara1.completed</label><label>tok_length: 43115</label><label>status: pri</label><label>id: Shamela0026102</label><label>ed_info: كمال مصطفى :: مكتبة الخانجي، شارع عبد العزيز، مصر - مطبعة الاعتماد :: http://www.worldcat.org/oclc/34637861</label><label>title_lat: Muwashsha</label><label>title_ar: الموشى = الظرف والظرفاء</label><label>book: 0325IbnIshaqWashsha.Muwashsha</label><label>author_lat: Ibn Ishaq Washsha</label><label>author_ar: محمد بن أحمد بن إسحاق بن يحيى، أبو الطيب، المعروف بالوشاء (المتوفى: 325هـ)</label><label>date: 0325</label><label>versionUri: 0325IbnIshaqWashsha.Muwashsha.Shamela0026102-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
