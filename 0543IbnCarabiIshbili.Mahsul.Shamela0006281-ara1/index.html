<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">القول في أصول الفقه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">المسألة الأولى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">المسألة الثانية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">المسألة الثالثة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">المسألة الرابعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">المسألة الخامسة في تكليف الكفار بفروع الشريعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">فائدة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">السابقة الأولى في وجه بيان الحاجة إلى العبارة التي بها يقع البيان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">السابقة الثانية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">السابقة الثالثة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">السابقة الرابعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">السابقة الخامسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">مسألة ms06</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">السابقة السادسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">السابقة السابعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">السابقة الثامنة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">السابقة التاسعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">السابقة العاشرة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">العقد الأول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">أولها أما</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">الثاني إنما</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">الثالث ما</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">الحرف الرابع أو</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">الحرف الخامس حرف من</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">الحرف السادس هل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">الحرف السابع الألف واللام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">الحرف الثامن لو</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">الحرف التاسع لولا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">الحرف العاشر إلى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">الحرف الحادي عشر بلى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">الحرف الثاني عشر على</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">الحرف الثالث عشر حتى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">الحرف الرابع عشر مذ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">الحرف الخامس عشر إلا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">وا أ / اأم أما القول في المعنى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">المسألة الأولى في حقيقة البيان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">المسألة الثانية في مراتبه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">الخامس القياس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">المسألة الثالثة في تأخير البيان عن وقت الحاجة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">المسألة الرابعة تأخير البيان إلى وقت الحاجة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">المسألة الخامسة في جواز تأخير التخصيص</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">كتاب الأقسام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">القول في الأوامر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">المسألة الأولى في حقيقة الأمر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">المسألة الثانية وهي أن الأمر لا صيغة له</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">المسألة الثالثة في مطلق لفظة افعل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">المسألة الرابعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">المسألة الخامسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">المسألة السادسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">الجواب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">جواب آخر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">المسالة السابعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">المسألة الثامنة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">المسألة التاسعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">المسألة العاشرة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">المسألة الحادية عشر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">المسألة الثانية عشر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">المسألة الثالثة عشر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">المسألة الرابعة عشر المندوب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">المسألة الخامسة عشر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">المسألة الأولى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">المسألة الثانية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">المسألة الثالثة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">المسألة الرابعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">المسألة الخامسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">المسألة السادسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">المسألة الأولى القول في حقيقة العموم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">المسألة الثانية القول في صيغة العموم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">المسألة الثالثة النساء يندرجن تحت خطاب الرجال بحكم العموم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">القول في العبيد وهي المسألة الرابعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">المسالة الخامسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">المسالة السادسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">المسألة السابعة ترك الاستفصال في حكايات الأحوال مع الاحتمال تتنزل منزلة العموم في المقال</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">المسألة الثامنة إذا ورد خطاب على سبب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">المسألة التاسعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">المسألة العاشرة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">المسألة الثانية عشر اللفظ العام إذا خص في بعض متناولاته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">الاستثناء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">المسألة الأولى في حروفه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">المسألة الثانية من شروط الاستثناء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">المسألة الثالثة من شرط الاستثناء ألا يرجع إلى جميع الكلام السابق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">المسالة الرابعة الاستثناء من الاستثناء جائز</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">المسألة الخامسة من شرط الاستثناء أن يكون من الجنس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">المسألة السادسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">المسألة الأولى في بيان المحكم والمتشابه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">المسألة الثانية آية الاستواء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">المسألة الثالثة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">المسألة الرابعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head88">المسألة الخامسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head89">المسألة السادسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head90">المسالة السابعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head91">المسألة الثامنة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head92">المسألة التاسعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head93">المسألة العاشرة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head94">المسألة الحادية عشرة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head95">المسألة الثانية عشر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head96">المسألة الثالثة عشر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head97">المسألة الرابعة عشر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head98">المسألة الخامسة عشر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head99">المسألة السادسة عشر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head100">المسألة السابعة عشر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head101">المسألة الثامنة عشرة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head102">المسألة التاسعة عشر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head103">ال</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head104">مسألة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head105"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head106">مسألة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head107">مسألة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head108">مسألة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head109">المسألة الأولى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head110">المسألة الثانية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head111">المسألة الثالثة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head112">المسألة الرابعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head113">المسألة الخامسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head114">الفصل الأول في الخبر المتواتر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head115">المسألة الأولى في حقيقته وحده</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head116">المسألة الثانية في أقل عدده</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head117">والثالثة في أكثره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head118">المسألة الرابعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head119">الفصل الثاني في خبر الواحد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head120">المسألة الأولى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head121">المسألة الثانية خبر الواحد يوجب العمل اتفاقا من الأكثر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head122">المسألة الثالثة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head123">المسألة الرابعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head124">المسألة الخامسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head125">المسألة السادسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head126">المسألة السابعة القراءة الشاذة لا توجب علما ولا عملا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head127">المسألة الثامنة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head128">المسألة الأولى في صورة الإجماع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head129">المسألة الثانية في محل الإجماع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head130">المسألة الثالثة في دليل الإجماع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head131">المسألة الرابعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head132">المسألة الخامسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head133">الفصل الأول في حقيقته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head134">الفصل الثاني في الدليل على صحة الأصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head135">الفصل الثالث في أقسام القياس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head136">الفصل الرابع في إثبات علة الأصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head137">المسلك الأول الطرد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head138">المسلك الثاني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head139">المسلك الثالث في الدليل الصحيح على علة الأصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head140">النوع الأول النص من الشارع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head141">والنوع الثاني الإيماء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head142">النوع الثالث الاشتقاق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head143">الفصل الخامس في الاستصحاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head144">الفصل السادس القول في الاستحسان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head145">الفصل السابع في ذكر ما يعلل وما لا يعلل من الأحكام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head146">الفصل الثامن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head147">الفصل التاسع في ترتيب الأدلة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head148">الفصل العاشر في الاعتراضات على القياس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head149">النوع الأول المنع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head150">النوع الثاني النقض</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head151">النوع الثالث القول الواجب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head152">النوع الرابع القول بالقلب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head153">النوع الخامس عدم التأثير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head154">النوع السادس فساد الموضوع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head155">النوع السابع في فساد الاعتبار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head156">النوع الثامن الفرق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head157">النوع التاسع المعارضة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head158">النوع العاشر جعل العلة معلولا والمعلول علة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head159">المسألة الأولى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head160">المسألة الثانية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head161">المسألة الثالثة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head162">الفصل الأول في حقيقته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head163">الفصل الثاني في المطلوب به</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head164">الفصل الثالث في تصويب المجتهدين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head165">الفصل ms70 الأول في حقيقة التقليد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head166">الفصل الثاني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head167">الفصل الثالث ما يجب على المقلد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head168">الفصل الرابع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head169">الفصل الخامس</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 91674</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Carabi Ishbili</label><label>tags: CENT0600 :: _FIQH :: _QAWACID :: _USUL :: GAL@nodata :: Shamela@أصول الفقه والقواعد الفقهية</label><label>url: https://raw.githubusercontent.com/OpenITI/0550AH/master/data/0543IbnCarabiIshbili/0543IbnCarabiIshbili.Mahsul/0543IbnCarabiIshbili.Mahsul.Shamela0006281-ara1</label><label>tok_length: 21373</label><label>status: pri</label><label>id: Shamela0006281</label><label>ed_info: حسين علي اليدري - سعيد فودة :: دار البيارق - عمان</label><label>title_lat: Mahsul</label><label>title_ar: المحصول في أصول الفقه</label><label>book: 0543IbnCarabiIshbili.Mahsul</label><label>author_lat: Ibn Carabi Ishbili</label><label>author_ar: القاضي محمد بن عبد الله أبو بكر بن العربي المعافري الاشبيلي المالكي (المتوفى: 543هـ)</label><label>date: 0543</label><label>versionUri: 0543IbnCarabiIshbili.Mahsul.Shamela0006281-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
