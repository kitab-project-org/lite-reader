<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">AUTO المقدمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">AUTO بسم الله الرحمن الرحيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">AUTO الحمد لله رب العالمين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">AUTO باب من التعازي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">AUTO باب من الشعر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">AUTO باب من التعازي والمواعظ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">AUTO باب من التعازي والتعزي في الأشعار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">AUTO باب وصايا</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head8">AUTO وصية أبي بكر الصديق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head9">AUTO </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head10">AUTO </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head11">AUTO </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head12">AUTO رحمه الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head13">AUTO </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head14">AUTO </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head15">AUTO </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head16">AUTO رحمه الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head17">AUTO وصية عمر بن الخطاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head18">AUTO </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head19">AUTO </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head20">AUTO </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head21">AUTO رحمه الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head22">AUTO وصية علي بن أبي طالب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head23">AUTO </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head24">AUTO </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head25">AUTO </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head26">AUTO رحمه الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head27">AUTO وصية معاوية بن أبي سفيان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head28">AUTO </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head29">AUTO </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head30">AUTO </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head31">AUTO رحمه الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head32">AUTO وصية أبي عبيدة بن الجراح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head33">AUTO رحمه الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head34">AUTO رحمه الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head35">AUTO رحمه الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head36">AUTO وصية عبد الملك بن مروان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head37">AUTO رحمه الله PageV01P030 وأوصى عبد الملك بن مروان حين حضرته الوفاة فقال لبنيه: أوصيكم بتقوى الله، فإنها عصمة باقية وجنة واقية. والتقوى خير زاد، وأفضل في المعاد، وأحصن كهف، وأزين حلية. ليعطف الكبير منكم على الصغير وليعرف الصغير منكم حق الكبير مع سلامة الصدور والأخذ بجميل الأمور. فإنكم إذا فعلتم ذلك كنتم للعز خلقاء، وهابتكم الأعداء. إياكم والتباغي والتحاسد فإن بهما هلك الملوك الماضون، وذوو العز المتكبرون. انظروا يا بني، مسلمة بن عبد الملك فاصدروا عن رأيه، فإنه نابكم الذي تفترون عنه، ومجنكم الذي تستجنون به. وأكرموا الحجاج، فإنه الذي وطأ لكم المنابر، وكفاكم قحم تلك القناطر. كونوا أولادا أبرارا، وفي الحرب أحرارا، وللمعروف منارا، واحلولوا في مرارة، ولينوا في شدة. ثم رفع رأسه إلى الوليد فقال: لا ألفينك يا وليد، إذا وضعتني في حفرتي تعصر عينيك كما تفعل الأمة، بل شمر واتزر، والبس جلد نمر، وادع الناس إلى البيعة، فمن قال برأسه هكذا فقل بالسيف هكذا. أوصيك بأخيك عبد الله بن عبد الملك وبعمر بن ms055 عبد العزيز خيرا. لا تعزلهما ولا تستبدل بهما. وأوصيك بابن عمنا هذا خيرا يعني علي بن عبد الله بن العباس. فأما الحجاج فلست تستغني عنه.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head38">AUTO وصية الربيع بن خثيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head39">AUTO وصية جندب بن عبد الله البجلي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head40">AUTO وصية المهلب بن أبي صفرة الأزدي PageV01P033 ولما ms060 احتضر المهلب بن أبي صفرة أوصى بنيه فقال: أوصيكم بتقوى الله وصلة الرحم، فإن تقوى الله تعقب الجنة، وإن صلة الرحم تنسىء في الأجل، وتثري المال، وتجمع الشمل وتكثر العدد، وتعمر الديار، وتعز الجانب. وأنهاكم عن معصية الله، فإنها تعقب النار، وإن قطيعة الرحم تورث القلة والذلة، وتفرق الجمع، وتذر الديار بلقعا وتذهب المال، وتطمع العدو، وتبدي العورة. يا بني، قومكم قومكم ! إنه ليس لكم عليهم فضل بل هم أفضل منكم إذ فضلوكم وسودوكم ووطؤوا أعقابكم، وبلغوا حاجاتكم لما أردتم، وأعانوكم، فلهم بذلك حق عليكم، وبلاء عندكم لا تؤدون شكره ولا تقومون بحقه. فإن طلبوا فأطلبوهم، وإن سألوا فأعطوهم، وإن لم يسألوا فابتدئوهم، وإن شتموا فاحتملوهم، وإن غشوا أبوابكم فلتفتح لهم ولا تغلق دونهم. يا بني، إني أحب الرجل منكم أن يكون لفعله الفضل على لسانه، وأكره للرجل منكم أن يكون للسانه الفضل على فعله. يا بني، اتقوا الجواب وزلة اللسان، فإني وجدت الرجل تعثر قدمه فيقوم من زلته وينتعش منها، ويزل لسانه فيوبقه، وتكون فيه هلكته. يا بني، إذا غدا عليكم رجل أو راح فكفى بذلكم مسألة وتذكرة بنفسه. يا بني، ثيابكم على غيركم أحسن منها عليكم، ودوابكم تحت غيركم أحسن منها تحتكم. يا بني، أحبوا المعروف، واكرهوا المنكر واجتنبوه، وآثروا الجود على البخل، واصطنعوا العرب وأكرموهم، فإن العربي تعده العدة فيموت دونك ويشكر لك، فكيف بالصنيعة إذا وصلت إليه، في احتماله لها، وشكره والوفاء لصاحبها. يا بني، سودوا كباركم واعرفوا فضل ذوي أسنانكم تعظموا به، وارحموا صغيركم وقربوه وألطفوه واجبروا يتيمكم وعودوا عليه بما قدرتم، وخذوا على يدي سفهائكم، وتعاهدوا فقراءكم وجيرانكم بما قدرتم عليه، واصبروا للحقوق ونوائب الدهر. وعليكم في الحرب بالأناة، والتؤدة في اللقاء. وعليكم بالتماس الخديعة، في الحرب، لعدوكم، وإياكم والنزق والعجلة، فإن المكيدة والأناة والخديعة في الحرب أنفع من الشجاعة. واعلموا أن القتال والمكيدة مع الصبر، فإذا كان اللقاء نزل القضاء، فإن ظفر امرؤ وقد أخذ بالحزم قال القائل: قد أتى الأمر من وجهه ms061، وإن لم يظفر قال: ما ضيع ولا فرط ولكن القضاء غالب. والزموا الحزم على أي الحالتين وقع الأمر، والزموا الطاعة والجماعة، وإياكم والخلاف. تواصلوا وتآزروا وتعاطفوا، فإن ذلك يثبت المودة. وخذوا فيما أوصيكم به بالجد والقوة والقيام به تظفروا بدنياكم ما كنتم فيها، وبآخرتكم إذا صرتم إليها ولا قوة إلا بالله. وليكن أول ما تبدؤون به إذا أصبحتم تعليم القرآن والسنن والفرائض، وتأدبوا بآداب الصالحين من قبلكم من سلفكم، ولا تقاعدوا أهل الدعارة والريبة، ولا يطمع في ذلك منكم طامع. وإياكم والخفة في مجالسكم وكثرة الكلام، فإنه لا يسلم منه صاحبه، وأدوا حق الله عليكم، فإني قد أبلغت إليكم في وصيتي، واتخذت لله الحجة عليكم..</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">AUTO باب مراث من أشعار المحدثين</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head42">AUTO باب مواعظ وتعاز وأشعار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head43">AUTO باب مواعظ وتعاز وأشعار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head44">AUTO باب الجفاة عند الموت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head45">AUTO باب من تكلم في مرضه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head46">AUTO بشيء حكي عنه</a>
</li>
</ul>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 172080</label><label>author_lat_full_name:  Abū l-ʿAbbās Muḥammad b. Yazīd b. ʿAbd al-Akbar b. ʿUmayr b. Ḥasān b. Salīm b. Saʿd b. ʿAbdallāh b. Zayd b. Mālik b. al-Ḥāriṯ b. ʿĀmir b. ʿAbdallāh b. Bilāl b. ʿAwf b. Aslam b. Kaʿb b. al-Ḥāriṯ b. Kaʿb b. ʿAbdallāh b. Mālik b. al-Naḍr b. al-Azad b. al-Ġawṯ al-Azdī al-Ṯimālī al-Mubarrad</label><label>author_lat_shuhra: Ibn Yazīd al-Mubarrad</label><label>author_from_uri: Ibn Yazid Mubarrad</label><label>tags:  :: ShamIbadiyya@الأدب والبلاغة</label><label>url: https://raw.githubusercontent.com/OpenITI/0300AH/master/data/0285IbnYazidMubarrad/0285IbnYazidMubarrad.TacaziWaMarai/0285IbnYazidMubarrad.TacaziWaMarai.ShamIbadiyya0000610-ara1</label><label>tok_length: 42899</label><label>status: pri</label><label>id: ShamIbadiyya0000610</label><label>ed_info: </label><label>title_lat: Tacazi Wa Marai</label><label>title_ar: التعازي والمراثي للمبرد</label><label>book: 0285IbnYazidMubarrad.TacaziWaMarai</label><label>author_lat: Ibn Yazid Mubarrad :: Ibn Yazīd al-Mubarrad ::  Abū l-ʿAbbās Muḥammad b. Yazīd b. ʿAbd al-Akbar b. ʿUmayr b. Ḥasān b. Salīm b. Saʿd b. ʿAbdallāh b. Zayd b. Mālik b. al-Ḥāriṯ b. ʿĀmir b. ʿAbdallāh b. Bilāl b. ʿAwf b. Aslam b. Kaʿb b. al-Ḥāriṯ b. Kaʿb b. ʿAbdallāh b. Mālik b. al-Naḍr b. al-Azad b. al-Ġawṯ al-Azdī al-Ṯimālī al-Mubarrad</label><label>author_ar: إبن يزيد المبرد ::  أبو لعباس محمد بن يزيد بن عبد الأكبر بن عمير بن حسان بن سليم بن سعد بن عبدلاه بن زيد بن مالك بن الحارث بن عامر بن عبدلاه بن بلال بن عوف بن أسلم بن كعب بن الحارث بن كعب بن عبدلاه بن مالك بن النضر بن الأزد بن الغوث الأزدي الثمالي المبرد</label><label>date: 0285</label><label>versionUri: 0285IbnYazidMubarrad.TacaziWaMarai.ShamIbadiyya0000610-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
