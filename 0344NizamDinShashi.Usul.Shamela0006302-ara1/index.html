<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">بحث كون أصول الفقه أربعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">البحث الأول في كتاب الله تعالى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">الفصل الثاني فصل في المطلق والمعيد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">بحث المشترك والمؤول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">الفصل الثالث فصل في المشترك والمؤول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">بحث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">الحقيقة والمجاز</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">الفصل الرابع فصل في الحقيقة والمجاز</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">الحقيقة والمجاز</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">الفصل الخامس فصل في تعريف طريق الاستعارة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">الفصل السادس فصل في الصريح والكناية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">الفصل السابع فصل في المتقابلات يعنى بها الظاهر والنص والمفسر والمحكم مع ما يقابلها من الخفي والمشكل والمجمل والمتشابه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">الفصل الثامن فصل فيما يترك به حقائق الألفاظ وما يترك به حقيقة اللفظ خمسة أنواع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">بحث ترك الحقيقة بدلالة في نفس الكلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">بحث ترك الحقيقة بدلالة من قبل المتكلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">الفصل التاسع فصل في متعلقات النصوص</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">بحث كون حكم دلالة النص عموم الحكم المنصوص عليه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">بحث كون المقتضى زيادة على النص</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">بحث كون القبول ركنا في باب البيع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">الفصل العاشر فصل في الأمر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">بحث تحقيق موجب الأمر المطلق فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">فصل الأمر بالفعل لا يقتضي التكرار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">بحث تكرار العبادات بتكرار أسبابها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">بحث نوعي المأمور به مطلق ومقيد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">بحث نوعي المأمور به مطلق ومقيد وحكمهما</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">بحث أحد نوعي المأمور به أي المقيد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">بحث كون المأمور به في حق الحسن نوعين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">فصل الأمر بالشيء يدل على حسن المأمور به</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">فصل الواجب بحكم الأمر نوعان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">بحث الأداء القاصر وحكمه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">بحث القضاء ونوعية كامل وقاصر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">بحث تقسيم النهي إلى قسمين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">الفصل الحادي عشر فصل في النهي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">بحث النهي عن الأفعال الحسية والشرعية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">الفصل الثاني عشر فصل في تعريف طريق المراد بالنصوص</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">بحث طريق معرفة المراد بالنصوص</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">1 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">2 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">3 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">بحث التمسكات الضعيفة الفاسدة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">الفصل الثالث عشر تقرير حروف المعاني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">بحث كون الواو لمطلق الجمع والفاء للتعقيب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">فصل الفاء للتعقيب مع الوصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">بحث أن الفاء قد تستعمل لبيان العلية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">فصل ثم للتراخي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">بحث وضع بل لتدارك الغلط</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">فصل بل لتدارك الغلط بإقامة الثاني مقام الأول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">بحث كون لكن للاستدراك بعد النفي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">فصل لكن للاستدراك بعد النفي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">بحث كون أو متناولا لأحد المذكورين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">فصل (أو)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">بحث مجيء أو لتناول أحد المذكورين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">بحث إفادة حتى معنى الغاية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">فصل حتى للغاية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">بحث وضع إلى لانتهاء الغاية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">فصل إلى لانتهاء الغاية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">بحث كون كلمة على للإلزام وفي للظرف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">فصل كلمة على</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">بحث افادة في معنى الظرفيه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">فصل كلمة ((في))</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">بحث إفادة كلمة في معنى الظرفية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">بحث وضع حرف الباء للإلصاق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">فصل حرف الباء للإلصاق في وضع اللغة ولهذا تصحب الأثمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">الفصل الرابع عشر بيان التقرير وبيان التفسير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">فصل في وجوه البيان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">فصل وأما بيان التفسير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">بحث بيان التغيير فصل وإما بيان التغيير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">بحث كون الاستثناء من صور بيان التغيير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">وحكم بيان التغيير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">بحث بيان الضرورة وبيان الحال</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">فصل وأما بيان الضرورة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">فصل وأما بيان الحال</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">بحث بيان العطف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">فصل وأما بيان العطف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">بحث سنة رسول الله صلى الله عليه وسلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">فصل وأما بيان التبديل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">البحث الثاني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">فصل في أقسام الخبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">1 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">2 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">3 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">بحث كون المتواتر موجبا للعلم القطعي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">بحث تقسيم الراوي على قسمين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">1 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">بحث شرط العمل بخبر الواحد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">1 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">2 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">3 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head88">بحث ترك العمل بخبر الواحد إذا يخالف الظاهر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head89">بحث حجية خبر الواحد في أربعة مواضع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head90"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head91">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head92">البحث الثالث في الإجماع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head93">1 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head94">2 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head95">بحث كون الإجماع على أربعة أقسام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head96">3 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head97">4 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head98">بحث نوع من الإجماع وهو عدم القائل بالفصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head99">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head100">بحث بيان الواجب على المجتهد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head101">فصل الواجب على المجتهد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head102">بحث إذا تعارض الدليلان ما يفعل المجتهد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head103">بحث حجية القياس ووجول العمل به</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head104">البحث الرابع فصل في القياس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head105">بحث الأخبار التي توجب حجية القياس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head106">1 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head107">2 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head108">بحث كون شروط صحة القياس خمسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head109">فصل شروط صحة القياس خمسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head110">بحث بيان أمثلة شروط القياس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head111">بحث في تعريف القياس الشرعي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head112">فصل القياس الشرعي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head113">بحث العلة المعلومة بالكتاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head114">بحث العلة المعلومة بالسنة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head115">بحث العلة المستفيدة بالإجماع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head116">بحث العلة المعلومة بالرأي والإجتهاد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head117">بحث الأسولة المتوجهة على القياس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head118">فصل الأسولة المتوجهة على القياس ثمانية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head119">بحث القول بموجب العلة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head120">بحث تقسيم القلب على قسمين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head121">بحث العكس وفساد الوضع والنقض</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head122">فصل الحكم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head123">بحث الفرق بين السبب والعلة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head124">بحث كون السبب تارة بمعنى العلة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head125">بحث تعلق الأحكام الشرعية بأسبابها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head126">فصل الأحكام الشرعية تتعلق بأسبابها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head127">بحث كون الموانع أربعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head128">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head129">بحث بيان معنى الفرض لغة وشرعا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head130">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head131">بحث العزيمة ماهي لغة وشرعا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head132">فصل العزيمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head133">بحث بيان الرخصة لغة وشرعا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head134">بحث ان الاحتجاج بلا دليل أنواع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head135">فصل الاحتجاج بلا دليل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head136">1 - </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head137">بحث أن العنبر لا خمس فيه عند أبي حنيفة</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 76765</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Nizam Din Shashi</label><label>tags: CENT0400 :: _FIQH :: _QAWACID :: _USUL :: GAL@nodata :: Shamela@أصول الفقه والقواعد الفقهية</label><label>url: https://raw.githubusercontent.com/OpenITI/0350AH/master/data/0344NizamDinShashi/0344NizamDinShashi.Usul/0344NizamDinShashi.Usul.Shamela0006302-ara1</label><label>tok_length: 18131</label><label>status: sec</label><label>id: Shamela0006302</label><label>ed_info: دار الكتاب العربي - بيروت</label><label>title_lat: Usul</label><label>title_ar: أصول الشاشي</label><label>book: 0344NizamDinShashi.Usul</label><label>author_lat: Nizam Din Shashi</label><label>author_ar: نظام الدين أبو علي أحمد بن محمد بن إسحاق الشاشي (المتوفى: 344هـ)</label><label>date: 0344</label><label>versionUri: 0344NizamDinShashi.Usul.Shamela0006302-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "000", "017", "000", "023", "026", "029", "033", "036", "039", "042", "043", "046", "000", "050", "052", "053", "056", "057", "060", "061", "064", "065", "068", "069", "000", "073", "076", "077", "080", "081", "085", "086", "089", "090", "093", "094", "099", "101", "102", "104", "105", "108", "109", "112", "113", "116", "117", "120", "123", "124", "127", "128", "131", "132", "135", "136", "138", "139", "142", "143", "146", "147", "150", "154", "157", "158", "159", "165", "168", "169", "175", "176", "177", "178", "185", "186", "189", "190", "193", "194", "198", "199", "203", "206", "209", "210", "213", "215", "218", "221", "222", "226", "227", "229", "232", "233", "236", "237", "240", "241", "245", "246", "249", "250", "256", "257", "261", "262", "266", "268", "269", "272", "275", "276", "280", "281", "284", "287", "288", "291", "292", "295", "296", "300", "301", "304", "305", "308", "312", "314", "315", "318", "319", "325", "326", "329", "330", "333", "334", "338", "339", "341", "342", "346", "347", "350", "352", "353", "356", "359", "361", "362", "364", "365", "366", "373", "374", "375", "379", "380", "383", "385", "388", "389", "394"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
