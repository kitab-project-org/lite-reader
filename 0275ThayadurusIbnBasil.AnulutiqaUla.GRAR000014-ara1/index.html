<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">[book 1]</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head1">[chapter 1: I 1] بسم الله الرحمن الرحيم أنولوطيقا الأولى، نقل تذارى المقالة الأولى 〈نظرية القياس〉</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head2">〈المقدمة. الحد. القياس وأنواعه. مقالة الكل واللاشىء〉</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head3">[chapter 2: I 2] 〈عكس القضايا المطلقة〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head4">[chapter 3: I 3] 〈عكس القضايا ذوات الجهة〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head5">[chapter 4: I 4] 〈القياس الحملى من الشكل الأول〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head6">[chapter 5: I 5] الشكل الثانى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head7">[chapter 6: I 6] 〈الشكل الثالث〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head8">[chapter 7: I 7] 〈الضروب غير المباشرة فى الأشكال الثلاثة. — رد الأقيسة〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head9">[chapter 8: I 8] فى تأليف القياسات 〈القياسات ذوات الجهة — الأقيسة ذوات المقدمتين الاضطرار يتين〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head10">[chapter 9: I 9] تأليف الوجودى والاضطرارى فى الشكل الأول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head11">[chapter 10: I 10] 〈أقيسة الشكل الثالث التى فيها إحدى المقدمتين اضطرارية والأخرى وجودية〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head12">[chapter 11: I 11] 〈أقيسة الشكل الثالث التى فيها إحدى المقدمتين اضطرارية والأخرى وجودية〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head13">[chapter 12: I 12] 〈مقارنة بين الأقيسة الحملية وبين الأقيسة ذات الجهة الاضطراربة〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head14">[chapter 13: I 13] فى الممكن ms021</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head15">[chapter 14: I 14] تأليف الممكن فى الشكل الأول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head16">[chapter 15: I 15] تأليف الممكن والوجودى فى الشكل الأول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head17">[chapter 16: I 16] تأليف الضرورى والممكن فى الشكل الأول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head18">[chapter 17: I 17] تأليف الممكن فى الشكل الثانى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head19">[chapter 18: I 18] تأليف الممكن والوجودى فى الشكل الثانى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head20">[chapter 19: I 19] تأليف الممكن والضرورى فى الشكل الثانى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head21">[chapter 20: I 20] تأليف الممكن فى الشكل الثالث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head22">[chapter 21: I 21] تأليف الممكن والوجودى فى الشكل الثالث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head23">[chapter 22: I 22] تأليف الممكن والضرورى فى الشكل الثالث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head24">[chapter 23: I 23] 〈التطبيق الكلى للأشكال. — الرد إلى الشكل الأول〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head25">[chapter 24: I 24] 〈الكيف والكم فى المقدمات〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head26">[chapter 25: I 25] 〈تعيين عدد الحدود والمقدمات والنتائج〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head27">[chapter 26: I 26] 〈أنواع القضايا التى تثبت أو تبطل فى كل شكل〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head28">[chapter 27: I 27] 〈قواعد عامة للأقيسة الحملية〉 الفصل الثانى على اكتساب المقدمات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head29">[chapter 28: I 28] 〈قواعد خاصة بالبحث عن الأوسط فى الحمليات〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head30">[chapter 29: I 29] 〈تفقد الأوسط فى المقاييس التى ترفع إلى المحال، وفى المقاييس الشرطية، والمقاييس ذوات الجهة〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head31">[chapter 30: I 30] 〈البحث عن الأوسط فى الفلسفة وسائر العلوم والصناعات〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head32">[chapter 31: I 31] 〈القسمة〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head33">[chapter 32: I 32] 〈قواعد لاختبار المقدمات والحدود والأوسط والشكل〉 الفصل الثالث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head34">[chapter 33: I 33] 〈الكم فى المقدمات〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head35">[chapter 34: I 34] 〈الحدود المجردة والحدود العينية〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head36">[chapter 35: I 35] 〈الحدود المركبة〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head37">[chapter 36: I 36] 〈الحدود فى مختلف الأحوال〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head38">[chapter 37: I 37] 〈أنواع الحمل〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head39">[chapter 38: I 38] 〈تكرار حد بعينه〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head40">[chapter 39: I 39] 〈استبدال الأقوال المتساوية〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head41">[chapter 40: I 40] 〈استعمال الأداة〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head42">[chapter 41: I 41] 〈تفسير بعض العبارات〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head43">[chapter 42: I 42] 〈حل الأقيسة المركبة〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head44">[chapter 43: I 43] 〈رد الحدود〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head45">[chapter 44: I 44] 〈حل البرهان بالرفع إلى المحال وبقية الأقيسة الشرطية〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head46">[chapter 45: I 45] 〈رد الأقيسة من شكل إلى آخر〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head47">[chapter 46: I 46] 〈الحدود المحدودة والحدود غير المحدودة فى الأقيسة〉</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">[book 2]</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head49">[chapter 47: II 1] بسم الله الرحمن الرحيم المقالة الثانية من انالوطيقا الأولى 〈خصائص القياس. — النتائج الكاذبة. — أنواع الاستدلال الشبيهة بالقياس.〉</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head50">〈تعدد النتائج فى الأقيسة〉</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head51">[chapter 48: II 2] 〈الإنتاج كذبا من مقدمات صادقة، والإنتاج بالصدق من مقدمات كاذبة — فى الشكل الأول〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head52">[chapter 49: II 3] 〈الإنتاج صدقا من مقدمات كاذبة فى الشكل الثانى〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head53">[chapter 50: II 4] 〈الإنتاج صدقا من مقدمات كاذبة، فى الشكل الثالث〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head54">[chapter 51: II 5] 〈البرهان الدورى فى الشكل الأول〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head55">[chapter 52: II 6] 〈البرهان الدورى فى الشكل الثانى〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head56">[chapter 53: II 7] 〈البرهان الدورى فى الشكل الثالث〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head57">[chapter 54: II 8] 〈انعكاس القياس فى الشكل الأول〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head58">[chapter 55: II 9] 〈انعكاس القياس فى الشكل الثانى〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head59">[chapter 56: II 10] 〈انعكاس القياس فى الشكل الثالث〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head60">[chapter 57: II 11] 〈الرفع إلى المحال فى الشكل الأول〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head61">[chapter 58: II 12] 〈الرفع إلى المحال فى الشكل الثانى〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head62">[chapter 59: II 13] 〈الرفع إلى المحال فى الشكل الثالث〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head63">[chapter 60: II 14] 〈الفرق بين البرهان بالخلف والبرهان المستقيم〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head64">[chapter 61: II 15] 〈النتائج المستخلصة من مقدمات متقابلة〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head65">[chapter 62: II 16] 〈وضع المطلوب الأول〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head66">[chapter 63: II 17] 〈البرهان بواسطة: «ليس من هذه الجهة وجب الكذب»〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head67">[chapter 64: II 18] 〈كذب النتيجة بكذب المقدمات〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head68">[chapter 65: II 19] 〈القياس المضاد〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head69">[chapter 66: II 20] 〈التبكيت (=التفنيد)〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head70">[chapter 67: II 21] 〈الخطأ〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head71">[chapter 68: II 22] 〈قواعد لعكس الأشياء المرغوب فيها أو التى تنتخب، ومقارنتها〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head72">[chapter 69: II 23] 〈نظرية الاستقراء〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head73">[chapter 70: II 24] 〈البرهان بالمثال〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head74">[chapter 71: II 25] 〈نظرية البرهان الأباغوجى〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head75">[chapter 72: II 26] 〈الأنسطاسيس〉</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head76">[chapter 73: II 27] 〈الضمير〉</a>
</li>
</ul>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 143001</label><label>author_lat_full_name:   Ṯayādūrus, Ṯadārä b. Basīl aḫ Iṣṭifan </label><label>author_lat_shuhra: Ṯayādūrus Ibn Basīl</label><label>author_from_uri: Thayadurus Ibn Basil</label><label>tags: </label><label>url: https://raw.githubusercontent.com/OpenITI/0275AH/master/data/0275ThayadurusIbnBasil/0275ThayadurusIbnBasil.AnulutiqaUla/0275ThayadurusIbnBasil.AnulutiqaUla.GRAR000014-ara1</label><label>tok_length: 38069</label><label>status: pri</label><label>id: GRAR000014</label><label>ed_info: https://www.graeco-arabic-studies.org/single-text/text/badawi-75.html,  http://www.worldcat.org/oclc/4770825165</label><label>title_lat: Anūlūṭīqā al-ūlā :: </label><label>title_ar: أنولوطيقا الأولا :: </label><label>book: 0275ThayadurusIbnBasil.AnulutiqaUla</label><label>author_lat: Thayadurus Ibn Basil :: Ṯayādūrus Ibn Basīl ::   Ṯayādūrus, Ṯadārä b. Basīl aḫ Iṣṭifan </label><label>author_ar: ثيادورس إبن بسيل ::   ثيادورس، ثدارä بن بسيل أخ إصطفن </label><label>date: 0275</label><label>versionUri: 0275ThayadurusIbnBasil.AnulutiqaUla.GRAR000014-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "304", "305", "306"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
