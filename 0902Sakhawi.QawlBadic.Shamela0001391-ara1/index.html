<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">المقدمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">تعريف الصلاة لغة واصطلاحا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">(فائدة في طلب المغفرة للصغير)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">(حكم الصلاة)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">(الصلاة على النبي تجب بالنذر)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">(محل الصلاة)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">(المقصود بالصلاة)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">(إفراد الصلاة عن التسليم لا يكره وكذا العكس)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">(تحقيق لفظ النبي)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">(الفرق بين النبي والرسول)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">(النبوة أفضل من الإرسال)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">(ما الحكمة ms033 في إضافة الصلاة إلى الله تعالى وملائكته دون السلام)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">الباب الأول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">..... </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">تنبيه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">..... </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">(هل يصلي على غير الأنبياء)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">(بيان أفضل الكيفيات في الصلاة عليه)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">تنبيه: إن قيل لم قال غفل ولم يقل سكت؟</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">(ما الحكمة في أن الله ms066 تعالى أمرنا أن نصلي عليه)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">(الفصل الأول السلام عليكم فقد عرفناه)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">(التسليم عليه يرتقي إلى الوجوب)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">الفصل الثاني: المراد بقولهم كيف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">الفصل الثالث: في تحقيق اللهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">الفصل الرابع: في بيان أسمائه " - صلى الله عليه وسلم - "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">(أسماؤه - صلى الله عليه وسلم -)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">الفصل الخامس: في تحقيق الأمي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">الفصل السادس: في ذكر زوجاته - صلى الله عليه وسلم -</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">.... </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">تنبيه: قال أبو بكر بن أبي عاصم، لم تذكر أزواجه - صلى الله عليه وسلم - وذريته فيما أعلم إلا في هذا الحديث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">الفصل السابع في تحقيق الذرية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">الفصل الثامن: في تحقيق الآل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">تنبيه: إن قال قائل ما وجه التفرقة بين الصلاة على النبي - صلى الله عليه وسلم - وبين الآل في الوجوب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">الفصل التاسع: فيه سؤالان أحدهما لم خص إبراهيم عليه السلام بالتشبيه دون غيره من الأنبياء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">الفصل العاشر: المراد بالبركة في قوله وبارك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">الفصل الحادي عشر.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">(تحقيق ترحمت عليه)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">الفصل الثاني عشر: المراد بالعالمين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">الفصل الثالث عشر: في تحقيق الحميد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">الفصل الرابع عشر: في تحقيق الأعلين والمصطفين والمقربين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">الفصل الخامس عشر: في تحقيق قوله - صلى الله عليه وسلم - من سره أن يكتال بالمكيال الأوفى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">الفصل السادس عشر: في ضبط ما في حديث علي من مشكل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">الفصل السابع عشر: في زيادة قول المصلي سيدنا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">الباب الثاني: في ثواب الصلاة على رسول الله - صلى الله عليه وسلم -</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">الفصل الأول: قال الأتليشي أي عمل أرفع وأي وسيلة أشفع وأي عمل أنفع من الصلاة على من صلى الله عليه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">الفصل الثاني: قرن الله ذكر نبينا والصلاة عليه بذكره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">الفصل الثالث: فائدة من جاء بالحسنة فله عشر أمثالها ms142</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">الفصل الرابع: في معنى إني أكثر الصلاة عليك فكم أجعل لك من صلاتي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">الفصل الخامس: حديث أولى الناس في أقربهم منه في القيامة.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">الفصل السادس: السلام عليه أفضل من عتق الرقاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">الباب الثالث: في تحذير من ترك الصلاة عليه عند ذكره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">(فوائد نختم بها الباب الثالث)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">الباب الرابع: في تبليغه - صلى الله عليه وسلم - سلام من يسلم عليه ورده السلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">(فوائد نختم بها الباب الرابع)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">الباب الخامس: في الصلاة عليه في أوقات مخصوصة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">(بعد الفراغ من الوضوء)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">(وأما عقب الصبح والمغرب)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">(وأما الصلاة عليه ms179 في التشهد)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">(حكم الصلاة على النبي ms183 في التشهد الأول)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">(الصلاة على النبي في القنوت)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">(عند القيام بصلاة الليل من النوم)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">(بعد الفراغ من التهجد)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">(عند دخول المساجد والمرور بها والخروج منها)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">(الصلاة عليه بعد الأذان)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">[لم خص سائل الوسيلة وسكان المدينة صابرا على لاوائها بالشفاعة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">[ما أحدثه المؤذنون عقب الأذان]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">(الصلاة عليه في يوم الجمعة وليلتها)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">(الصلاة عليه في يومي السبت والأحد)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">(الصلاة عليه ليلة الإثنين والثلاثاء)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">(الصلاة عليه في الخطب)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">(الصلاة عليه في تكبيرات صلاة العيد)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">(الصلاة عليه في الصلاة على الجنازة)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">.... </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">(الصلاة عليه عند إدخال الميت القبر)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">(الصلاة عليه في رجب)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">(الصلاة عليه في شعبان)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">(الصلاة عليه في أعمال الحج وزيارة قبره وما إلى ذلك)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">(آداب زيارة قبره الشريف)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">(الصلاة عليه عند الذبيحة)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">(الصلاة عليه عند عقد البيع)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">(الصلاة عليه عند كتابة الوصية)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">(الصلاة عليه عند خطبة التزويج)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">(الصلاة عليه في طرفي النهار وعند إرادة النوم)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">(الصلاة عليه في الرسائل وبعد البسملة)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">(الصلاة عليه عند الهم والشدائد)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">(الصلاة عليه عند إلمام الفقر والحاجة وعند الغرق)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">(الصلاة عليه عند وقوع الطاعون)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">(الصلاة عليه أول الدعاء وأوسطه وآخره)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head88">(الصلاة عليه عند طنين الأذن)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head89">(الصلاة عليه عند العطاس)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head90">(الصلاة عليه لمن نسي شيئا)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head91">(الصلاة عليه عند أكل الفجل ونهيق الحمير)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head92">(الصلاة عليه عقب الذنب)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head93">(الصلاة عليه عند الحاجة)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head94">(صلاة الحاجة)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head95">(الصلاة عليه في الأحوال كلها)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head96">(الصلاة في الأحوال كلها)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head97">(الصلاة عليه لمن أتهم وهو بريء)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head98">(الصلاة عليه عند لقاء الإخوان)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head99">(الصلاة عليه عند تفرق القوم)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head100">(الصلاة عند ختم القرآن)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head101">(الصلاة عليه في الدعاء)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head102">(الصلاة عليه عند القيام من المجلس)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head103">(الصلاة عليه في كل موضع)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head104">(الصلاة عليه عند افتتاح الكلام)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head105">(الصلاة عليه عند ذكره)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head106">(الصلاة عليه عند نشر العلم والوعظ وقراءة الحديث)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head107">(الصلاة عليه عند كتابة الفتيا)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head108">(الصلاة عليه عند كتابه اسمه)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head109">خاتمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head110">(حكم الموضوع)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head111">(بيان الكتب المصنفة في هذا الباب)</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 333757</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Sakhawi</label><label>tags: CENT1000 :: _BUHUTH :: _MASAIL :: GAL@historiography :: GAL@literature-islamic :: GAL@history :: GAL@period-postmongol :: GAL@period-mamluk :: GAL@1258-1517CE :: GAL@period-decline :: GAL@biography-collective :: GAL@biography :: GAL@egypt :: GAL@syria :: Shamela@بحوث ومسائل</label><label>url: https://raw.githubusercontent.com/OpenITI/0925AH/master/data/0902Sakhawi/0902Sakhawi.QawlBadic/0902Sakhawi.QawlBadic.Shamela0001391-ara1</label><label>tok_length: 81380</label><label>status: pri</label><label>id: Shamela0001391</label><label>ed_info: دار الريان للتراث</label><label>title_lat: Qawl Badic</label><label>title_ar: القول البديع في الصلاة على الحبيب الشفيع</label><label>book: 0902Sakhawi.QawlBadic</label><label>author_lat: Sakhawi</label><label>author_ar: شمس الدين أبو الخير محمد بن عبد الرحمن بن محمد السخاوي (المتوفى: 902هـ)</label><label>date: 0902</label><label>versionUri: 0902Sakhawi.QawlBadic.Shamela0001391-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "007", "008", "009", "011", "012", "013", "014", "015", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
