<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">واجبات طالب العلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">إخلاص النية لله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">قصد تحصيل علم الدين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">تجنب التحيز والمعصية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">تحري الإنصاف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">توطين النفس على البحث والاجتهاد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">تجربة الشوكاني مع الاجتهاد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">الأسباب التي تؤدي إلى البعد عن الحق والعصبية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">النشوء في بلد متمذهب بمذهب معين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">حب الشرف والمال</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">الجدال والمراء وحب الظهور</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">حب القرابة والتعصب للأجداد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">صعوبة الرجوع إلى الحق لقوله بخلافه ms008</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">كون المنافس المتكلم بالحق صغير السن أو الشأن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">آفات الشيوخ والتلاميذ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">علاج التعصب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">العواقب الوخيمة للتعصب والبعد عن الحق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">عود إلى أسباب التعصب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">الاستناد إلى قواعد ظنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">عدم الموضوعية في عرض حجج الخصوم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">المنافسة بين الأقران</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">التباس ما هو من الرأي البحث بشيء من العلوم التي هي مواد الاجتهاد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">الأسباب التي تؤدي إلى البعد عن الحق والتعصب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">النشوء في بلد متمذهب بمذهب معين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">حب الشرف والمال</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">الجدال والمراء وحب الانتصار والظهور</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">حب القرابة والتعصب للأجداد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">صعوبة الرجوع إلى الحق الذي قال بخلافه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">أن يكون المنافس المتكلم بالحق صغير السن أو الشأن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">من آفات الشيخ والتلميذ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">علاج التعصب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">العواقب الوخيمة للتعصب والبعد عن الحق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">عود إلى أسباب التعصب الاستناد إلى قواعد ظنية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">عدم الموضوعية في عرض حجج الخصوم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">تقليد المتعصبين من علماء الجرح والتعديل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">المنافسة بين الأقران بلا تبصر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">التباس ما هو من الرأي البحث بشيء من العلوم التي هي مواد الاجتهاد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">كيفية الوصول إلى مراتب العلم الختلفة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">طبقات طلاب العلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">كيفية الوصول إلى المرتبة الأولى للعلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">كيفية الوصول إلى المرتبة الثانية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">كيفية الوصول إلى المرتبة الثالثة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">كيفية الوصول إلى المرتبة الرابعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">كيفية الوصول إلى مراتب العلم المختلفة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">طبقات طلاب العلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">كيفية الوصول إلى المرتبة الأولى للعلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">علم النحو</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">علم الصرف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">علم المعاني والبيان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">فن الوضع والمناظرة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">المؤلفات المشتملة على بيان مفردات اللغة عموما وخصوصا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">علم المنطق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">فن أصول الفقه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">علم الكلام أو أصول الدين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">علم التفسير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">علم السنة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">علم مصطلح الحديث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">علم التاريخ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">مؤشر الوصول إلى المرتبة الأولى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">علم الفقه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">من لوازم الإنصاف والاجتهاد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">أهمية الاطلاع على أشعار المبدعين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">النظر في بلاغات مبدعي الإنشاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">علم العروض والقوافي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">أهمية الاطلاع على العلوم الفلسفية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">أنصاف المثقفين في زمن الشوكاني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">المؤهلون لتلقي العلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">تولي أهل العلم للمناصب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">كيفية الوصول إلى المرتبة الثانية للعلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">علم النحو</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">علم الصرف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">علم المعاني والبيان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">علم أصول الفقه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">علم التفسير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">علم الحديث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">علوم أخرى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">مؤشر الوصول إلى المرتبة الثانية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">كيفية الوصول إلى المرتبة الثالثة للعم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">علم الإعراب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">علم مصطلح الحديث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">علم السنة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">علم التفسير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">ماذا يفعل الطالب عند حدوث إشكال أو صعوبة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">كيفية الوصول إلى المرتبة الرابعة للعلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">كيف تصبح شاعرا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">كيف تصبح منشئا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">كيف تصبح محاسبا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">كيف تصبح عالما بالفلسفة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head88">كيف تصبح طبيبا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head89">كيف تكون عالما بمذهب من المذاهب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head90">مباحث ضرورية لطالب الحق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head91"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head92">جلب المصالح ودفع المفاسد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head93">الدلائل العامة والكليات ms114</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head94">أصالة المعنى الحقيقي وعدم جواز الانتقال عنه إلا لعلاقة أو قرينة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head95">التحايل على أحكام الشريعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head96">الإجماع - القياس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head97">الاجتهاد - الاستحسان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head98">مفاسد أصابت دين الإسلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head99">الاعتقادات الفاسدة في بعض الأموات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head100">تعدد المذاهب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head101">مفاسد بعض أدعياء التصوف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head102">جلب المصالح ودفع المفاسد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head103">الدلائل العامة والكليات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head104">أصالة المعنى الحقيقي وعدم جواز الانتقال عنه إلا لعلاقة أو قرابة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head105">التحايل على أحكام الشريعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head106">عدم الاغترار بمجرد الاسم دون النظر في معاني المسميات وحقائقها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head107">الإجماع و</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head108">القياس </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head109">الإجماع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head110">القياس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head111">الاستحسان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head112">الاجتهاد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head113">مفاسد أصابت دين الإسلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head114">تعدد المذاهب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head115">الاعتقادات الفاسدة في بعض الأموات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head116">مفاسد ms138 بعض أدعياء التصوف</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 179447</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Shawkani</label><label>tags: CENT1300 :: _ADAB :: _ADHKAR :: _AKHLAQ :: _MISC :: _RAQAIQ :: _SULUK :: GAL@nodata :: Shamela@الرقاق والآداب والأذكار</label><label>url: https://raw.githubusercontent.com/OpenITI/1250AH/master/data/1250Shawkani/1250Shawkani.AdabTalab/1250Shawkani.AdabTalab.Shamela0006854-ara1</label><label>tok_length: 42343</label><label>status: sec</label><label>id: Shamela0006854</label><label>ed_info: عبد الله يحيى السريحي :: دار ابن حزم - لبنان / بيروت</label><label>title_lat: Adab Talab</label><label>title_ar: أدب الطلب ومنتهى الأدب</label><label>book: 1250Shawkani.AdabTalab</label><label>author_lat: Shawkani</label><label>author_ar: محمد بن علي بن محمد بن عبد الله الشوكاني اليمني (المتوفى: 1250هـ)</label><label>date: 1250</label><label>versionUri: 1250Shawkani.AdabTalab.Shamela0006854-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
