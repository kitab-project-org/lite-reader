<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head0">AUTO المقدمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head1">AUTO المراد بأصول الدين PageV01P005 ويحسن هنا تبيين المراد ب " أصول دين الإسلام" أو "أصول الدين" اختصارا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head2">AUTO مسائل أصول الدين ومسائل فروع الدين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head3">AUTO معنى معرفة الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head4">AUTO ملاحظتان مهمتان</a>
</li>
</ul>
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">AUTO القسم الأول: وجوب معرفة الله تعالى PageV01P010 سبق وأن بينت في مقدمة البحث أن المراد بمعرفة الله تعالى هو معرفة أن لا</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head6">AUTO معنى "المعرفة" ومراتبها.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head7">AUTO التقليد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head8">AUTO وجوب معرفته تعالى وأنها أهم الواجبات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head9">AUTO معنى الواجب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head10">AUTO الأدلة على وجوب معرفة الله تعالى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head11">AUTO الدليل الثاني: إن العبادة لا تقوم الا بمعرفة الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head12">AUTO إشكال على علاقة معرفة الله تعالى بعبادته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head13">AUTO شيء من نصوص أئمة أهل البيت في أهمية معرفة الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head14">AUTO الدليل الثالث: إن معرفة الله تعالى لطف في فعل الواجب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head15">AUTO بيان أن معرفة الله أهم الواجبات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head16">AUTO إن ذات الله تعالى لا يمكن أن يعرف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head17">AUTO الفرق بين معرفة ذات الله ومعرفة صفات الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head18">AUTO وسيلة معرفته تعالى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head19">AUTO أما أفعاله تعالى، فمنها ما يعلم بالعقل، ويكون الشرع مقررا له</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head20">AUTO معنى قولنا إن العقل مصدر معرفة الله تعالى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head21">AUTO مسألة الحسن والقبح العقليين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head22">AUTO إن الظلم قبيح ويستحق فاعله الذم والعقاب.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head23">AUTO الكذب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head24">AUTO الله لا يفعل القبيح.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head25">AUTO فالخلاصة: إن العقل هو الوسيلة إلى معرفة الله تعالى. ومؤدى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head26">AUTO الخلاف بين العقل والنص PageV01P038 والخلاف حول هذه القضية: "العقل أو النص" متشعب. وقد ظلم العقل فيها، إذ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head27">AUTO القضايا الأصولية التي تبنى على العقل</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">AUTO القسم الثاني: معرفة الله تعالى</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head29">AUTO الباب الأول: معرفة صفات ذات الله تعالى(1)</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head30">AUTO خطورة البحث في صفات الله جل وعلا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head31">AUTO صفات ذات الله الواجب معرفتها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head32">AUTO 2. الله تعالى قادر:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head33">AUTO 3. الله تعالى عالم:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head34">AUTO 4. الله تعالى حي:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head35">AUTO 5. الله تعالى واحد.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head36">AUTO ب. الذي لا يصح فيه التركيب.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head37">AUTO ج. الذي لا يصح أن يكون له ثان.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head38">AUTO د. الذي لا يشبه شيئا من خلقه.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head39">AUTO 6. والله تعالى لم يلد ولم يولد، لأنه يستوجب الانفصال وهذا</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head40">AUTO الباب الثاني: الكلام في أفعاله جل وعلا.</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head41">AUTO أولا: إن أفعاله تعالى هي نفس مخلوقاته.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head42">AUTO ثانيا: إن أفعاله تعالى محدثة غير قديمة.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head43">AUTO ثالثا: في وصفنا لله باعتبار أفعاله.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head44">AUTO رابعا ms053: إن الله يفعل بعض أفعاله بواسطة بعض خلقه.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head45">AUTO خامسا: إن أفعال الله تعالى ليست كأفعال خلقه.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head46">AUTO سادسا: إن أفعال الله تعالى لا تحصى ولا تحصر أجناسها ولا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head47">AUTO سابعا: إن أفعاله تعالى حسنة لا قبح فيها.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head48">AUTO الدليل على أنه تعالى لا يفعل القبيح.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head49">AUTO الخلاف بين المسلمين حول عدل الله تعالى وحكمته.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head50">AUTO قبائح الأفعال التي يتنزه الله تعالى عنها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head51">AUTO تكليف ما لا يطاق.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head52">AUTO تعذيب من لا ذنب له.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head53">AUTO تعذيب أطفال المشركين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head54">AUTO تعذيب من التزم بأوامر الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head55">AUTO تعذيب أحد بذنب غيره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head56">AUTO تعذيب المجبر، أو المسير، أو الملجأ نحو المعصية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head57">AUTO تعظيم من لا يستحق التعظيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head58">AUTO 4. إرادة القبيح، ومشيئته، ومحبته ورضاه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head59">AUTO إشكال على أنه تعالى لا يفعل القبيح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head60">AUTO ثامنا: في أن أفعاله تعالى فينا هي لصلاحنا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head61">AUTO الجهة الثانية من الكلام في أفعاله تعالى: بيان بعض أفعال</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head62">AUTO 1. خلق الأجسام والأعراض</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head63">AUTO 2. البعثة وصفات المبعوث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head64">AUTO 3. البعث بعد الموت</a>
</li>
</ul>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head65">AUTO التكليف</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head66">AUTO إشكالات حول حكمة التكليف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head67">AUTO خلو التكليف من وجوه القبح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head68">AUTO شرط المكلف</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head69">AUTO أولا: إن العبد هو محدث أفعاله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head70">AUTO ثانيا: إن العبد مختار في ما يحدثه من أفعاله</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head71">AUTO شبهة علم الله بالغيب</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head72">AUTO ثالثا: إن العبد لديه العقل الكافي للقيام بالتكليف</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head73">AUTO شرط المكلف به</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head74">AUTO شرط المكلف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head75">AUTO وقوع ms076 اللطف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head76">AUTO صور اللطف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head77">AUTO شرط اللطف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head78">AUTO أسماء اللطف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head79">AUTO ملاحظة مهمة:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head80">AUTO إشكالات حول وقوع اللطف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head81">AUTO إبليس والشهوات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head82">AUTO الخذلان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head83">AUTO افتقارنا إلى رحمة الله تعالى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head84">AUTO الآلام الحاصلة من الله تعالى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head85">AUTO الرضا بالقضاء والقدر.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head86">AUTO الآلام التي فيها نفع للعبد</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head87">AUTO والآلام التي يستحق معها العبد العوض على نوعين:</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head88">AUTO الآلام الحاصلة من الله تعالى ابتداءا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head89">AUTO الآلام الحاصلة من غير الله تعالى ابتداءا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head90">AUTO ### ||||| AUTO ملاحظة مهمة</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head91">AUTO ما يقع من الآلام لدفع مضرة أكبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head92">AUTO ما يقع من الآلام استحقاقا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head93">AUTO واجب من أصابه الألم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head94">AUTO زمن العوض</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head95">AUTO الرزق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head96">AUTO الكسب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head97">AUTO التوكل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head98">AUTO الأسعار.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head99">AUTO الموت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head100">AUTO الإرادة</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head101">AUTO الإرادة بمعنى الفعل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head102">AUTO الإرادة بمعنى الأمر والنهي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head103">AUTO الإرادة بمعنى العلم باشتمال الفعل على المصلحة</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 127582</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Muallif Majhul</label><label>tags:  :: Zaydiyya@التوحيد وأصول الدين</label><label>url: https://raw.githubusercontent.com/OpenITI/1450AH/master/data/1450MuallifMajhul/1450MuallifMajhul.UsulDin/1450MuallifMajhul.UsulDin.Zaydiyya0000208-ara1</label><label>tok_length: 30685</label><label>status: pri</label><label>id: Zaydiyya0000208</label><label>ed_info: </label><label>title_lat: Usul Din</label><label>title_ar: أصول دين</label><label>book: 1450MuallifMajhul.UsulDin</label><label>author_lat: Muallif Majhul</label><label>author_ar: </label><label>date: 1450</label><label>versionUri: 1450MuallifMajhul.UsulDin.Zaydiyya0000208-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "045", "046", "047", "047", "048", "048", "049", "049", "050", "051", "052", "053", "054", "055", "055", "056", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "079", "080", "081", "081", "082", "083", "083", "084", "085", "086", "087", "087", "088", "089", "090", "090", "091", "092", "092", "093", "094", "095", "096", "096", "097", "097", "098", "099", "099", "100", "100", "101", "102", "103", "103", "104", "105", "105", "106", "107", "107", "108", "109", "109", "110", "111", "112", "113", "114", "114", "115", "115", "116", "117", "003", "004", "005", "007", "008", "012", "013", "015", "017", "018", "021", "023", "024", "025", "029", "030", "031", "040", "041", "044", "045", "051", "053", "055", "056", "057", "058", "063", "068", "071", "091", "103", "117"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
