<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">AUTO كتاب الدراية تفسير العلامة أبي الحواري العماني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">AUTO * تعريف بالكتاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">AUTO * تعريف بالمؤلف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">AUTO * تقديم سماحة الشيخ الخليلي للكتاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">AUTO 1- مقدمة في التعريف بالإيمان وأركانه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">AUTO 2- تفسير ms007 آيات الصلوات الخمس المكتوبة بمواقيتها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">AUTO 3- تفسير آيات الوضوء والاستنجاء والاغتسال والتيمم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">AUTO 4- تفسير آيات الصلاة بأركانها وسننها وآدابها وأحكامها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">AUTO 5- تفسير آيات صلوات السفر والخوف والجمعة والجماعة والضحى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">AUTO 6- تفسير آيات تغيير القبلة واستقبالها في الصلاة وبناء المساجد والذكر فيها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">AUTO 7- تفسير آيات الأذان وأحكامه واتخاذ الزينة عند المساجد وصلاة المنافقين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">AUTO 8- تفسير آيات الزكاة ومشروعيتها وزكاة الذهب والفضة وزكاة الثمار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">AUTO 9- تفسير آيات زكاة الأنعام ( الغنم ، البقر ، الإبل ) وأسنانها ms021 ونصابها</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head13">AUTO تفسير صدقة الغنم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head14">AUTO تفسير الصدقة المفروضة</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">AUTO 10- تفسير آيات مصارف الزكاة وثواب المزكي عند الله وعقوبة مانعها</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head16">AUTO تفسير الصدقة لمن تدفع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head17">AUTO تفسير ما أعد الله للمؤمنين الذين يقيمون الصلاة ويؤتون الزكاة محتسبين :</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head18">AUTO تفسير الذي يبخل بالزكاة , وما أعد الله له</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">AUTO 11- تفسير آيات صدقة التطوع وعظيم فضل ثوابها والذي يمن بصدقته</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head20">AUTO تفسير صدقة التطوع مع الفريضة:</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">AUTO 12- تفسير آيات إخراج الصدقة من طيب المال وبركتها وعد خلطها بالمن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">AUTO 13- تفسير آيات صلة الرحم وبر الوالدين وفضل الإنفاق عليهم</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head23">AUTO تفسير صلة الرحم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head24">AUTO تفسير ما أمرالله من بر الوالدين</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">AUTO 14- تفسير آيات حق القرابة والجيران والمملوكين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">AUTO 15- تفسير آيات الاقتصاد في النفقة وثواب العطية والقرض الحسن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">AUTO 16- تفسير آيات مشروعية الصوم وفضله وأحكامه والسحور</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">AUTO 17- تفسير آيات ليلة القدر وفضلها والاعتكاف وشروطه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">AUTO 18- تفسير آيات الأهلة ومناسك الحج والعمرة ومشاعرها العظام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">AUTO 19- تفسير آيات جزاء قتل الصيد في الحرم والمحصر والفراغ من المناسك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">AUTO 20- تفسير آيات حرمة قتل النفس بغير حق وحد الحرابة وقتل المؤمن والدية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">AUTO 21- تفسير آيات قصاص الجراحات وأكل الأموال بالباطل وأماني الغفران</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">AUTO 22- تفسير آيات حفظ أموال اليتامى والوصية بهم وأحكام ذلك كله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">AUTO 23- تفسير آيات رخصة الأكل مع الأعمى والأعرج والمريض</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">AUTO 24- تفسير آيات الوفاء بالكيل والميزان وإثم من يطفف الكيل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">AUTO 25- تفسير آيات الوصية من ثلث المال لمن لا يرث وأحكامها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">AUTO 26- تفسير آيات المواريث وقسمته ونصيب كل وارث والكلالة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">AUTO 27- تفسير آيات ميراث الأرحام قبل النسخ وميراث أهل العقد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">AUTO 28- تفسير آيات تحريم الربا وأكل السحت وتحريم الخمر وترك الشبهات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">AUTO 29- تفسير آيات اللعان بين الرجل وامرأته وأحكام ذلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">AUTO 30- تفسير آيات حد الزنا وما كان قبل من حبسهن في البيوت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">AUTO 31- تفسير آيات زنا المملوكين والمكرهة عليه وشيء ومن أحكام التقية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">AUTO 32- تفسير آيات قذف المحصنات وحد القاذف وأحكام ذلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">AUTO 33- تفسير آيات حادثة الإفك وقذف السيدة عائشة وما أدب الله به المؤمنين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">AUTO 34- تفسير آيات حد السرقة، وأحكام دية المقتول خطا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">AUTO 35- تفسير آيات الكبائر وثواب من اجتنبها وطلب الخير وترك الشر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">AUTO 36- تفسير آيات التوبة من الذنوب وشروطها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">AUTO 37- تفسير آيات من ترك الشهوة الحرام مخافة الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">AUTO 38- تفسير آيات من يحرم على الرجل من النساء أن يتزوج بهن وأحكامها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">AUTO 39- تفسير آيات نسخ زواج المتعة وحرمة النكاح من المشركين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">AUTO 40- تفسير آيات الحض على التزويج و حكم التزويج بأربع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">AUTO 41- تفسير آيات الزواج بحرائر أهل الكتاب وملك اليمين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">AUTO 42- تفسير آيات من حرم على نفسه الطيبات من المنكح والمأكل والملبس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">AUTO 43- تفسير آيات اعتزال النساء في المحيض وأحكام ذلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">AUTO 44- تفسير آيات حسن صحبة النساء وأحكام النشوز وعلاجه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">AUTO 45- تفسير آيات الطلاق وأنواعه وأحكامه والمراجعة في العدة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">AUTO 46- تفسير آيات عدة النساء وأنواعها والسكنى في العدة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">AUTO 47- تفسير آيات التعريض بالزواج في العدة والمتعة والمهر الذي لم يسم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">AUTO 48- تفسير آيات المختلعة وأحكام الخلع وأحكام الإيلاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">AUTO 49- تفسير آيات من حرم جاريته أوامرأته في الظهار أوخيرها في المفارقة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">AUTO 50- تفسير آيات نفقة المرضع والأم أحق بولدها ولها نفقتها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">AUTO 51- تفسير آيات الأيمان وأنواعها وكفارتها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">AUTO 52- تفسير آيات النذور وأحكامها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">AUTO 53- تفسير آيات الدين وكتابته وأحكام مكاتبة ملك اليمين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">AUTO 54- تفسير آيات أحكام الاستئذان وإلقاء السلام في البيوت واستعمال الآداب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">AUTO 55- تفسير آيات غض البصر وتحصين الفرج والحجاب وأحكام القواعد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">AUTO 56- تفسير آيات تحريم السخرية والظن والغيبة في حق المسلمين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">AUTO 57- تفسير آيات الوفاء بالعهد مع المسلمين وغيرهم وحرمة نقضه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">AUTO 58- تفسير آيات الأمر بالمعروف والنهي عن المنكر وجملة من وصايا لقمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">AUTO 59- تفسير آيات ما حرم الله من المطعومات وذكر الله على الذبائح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">AUTO 60- تفسير آيات ما أحل الله من طعام أهل الكتاب وصيد الكلب المعلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">AUTO 61- تفسير آيات الصلاة والسلام على نبينا الكريم وأحكام ذلك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">AUTO 62- تفسير آيات الأمر بذكر الله ذكرا كثيرا ونصائح في تجليل الله جل جلاله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">AUTO 63- تفسير آيات الدعاء تضرعا وخيفة وآدابه والتعدي في الدعاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">AUTO 64- تفسير آيات المسارعة إلى المغفرة والجنة بالعمل الصالح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">AUTO 65- تفسير آيات صفات المؤمنين وثناء الله عليهم وما أعد لهم من جزاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">AUTO 66- تفسير آيات النهي عن الرياء، وذكر الله على المركوب وشكر نعم الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">AUTO 67- تفسير آيات الجهاد والمجاهد في سبيل الله وفضله ومنزلته والمرابط</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">AUTO 68- تفسير آيات قتال المشركين وتقسيم الغنيمة والغلول في ms195 غنيمة الحرب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">AUTO 69- تفسير آيات قتال أهل الكتاب حتى يعطوا الجزية وقتال أهل البغي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">AUTO 70- تفسير آيات الاسترجاع عند المصيبة وثواب ذلك عند الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">AUTO 71- تفسير آيات آخر ms200 ما نزل من القرآن والمحكم منه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">AUTO 72- تفسير آيات الإيمان بالقدر خيره وشره أنه من الله تعالى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">AUTO 73- تفسير آيات نهي النبي الكريم عن الصلاة على المنافقين إذا ماتوا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">AUTO 74- مسائل في تكفين الميت ودفنه والدعاء له والتكبير على الجنائز</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">AUTO 75- مسائل في أحكام الصلاة على الميت ووقتها والاستدراك فيها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">AUTO 76- مسائل في الصلاة على الجنائز إذا تعددت وحملها وآداب ذلك كله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head88">AUTO 77- مسائل متعددة في كيفية غسل الميت وتغسيل الرجل للمرأة والعكس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head89">AUTO * خاتمة الكتاب: بيان ناسخ الكتاب وتأريخ نسخه</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 262412</label><label>author_lat_full_name: al-Aʿmá Abū al-Ḥawārī Muḥammad b. al-Ḥawārī b. ʿUṯmān al-Ḥawārī</label><label>author_lat_shuhra: Abū al-Ḥawārī al-Aʿmá</label><label>author_from_uri: Abu Hawari Cumani</label><label>tags:  :: ShamIbadiyya@التفاسير</label><label>url: https://raw.githubusercontent.com/OpenITI/0275AH/master/data/0275AbuHawariCumani/0275AbuHawariCumani.Diraya/0275AbuHawariCumani.Diraya.ShamIbadiyya0000441-ara1</label><label>tok_length: 62818</label><label>status: pri</label><label>id: ShamIbadiyya0000441</label><label>ed_info: </label><label>title_lat: Diraya</label><label>title_ar: كتاب الدراية تفسير العلامة أبي الحواري العماني :: كتاب الدراية وكنز الغناية ومنتهى الغاية وبلوغ الكفاية في تفسير خمسمائة آية</label><label>book: 0275AbuHawariCumani.Diraya</label><label>author_lat: Abu Hawari Cumani :: Abū al-Ḥawārī al-Aʿmá :: al-Aʿmá Abū al-Ḥawārī Muḥammad b. al-Ḥawārī b. ʿUṯmān al-Ḥawārī</label><label>author_ar: أبو الحواري الأعمى :: الأعمى أبو الحواري محمد بن الحواري بن عثمان الحواري</label><label>date: 0275</label><label>versionUri: 0275AbuHawariCumani.Diraya.ShamIbadiyya0000441-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "052", "053", "054", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "304", "305", "306", "307", "308"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
