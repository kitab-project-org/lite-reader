<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">AUTO تحفة الأسماع والأبصار</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head1">AUTO الإهداء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head2">AUTO مقدمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head3">AUTO الدراسة التمهيدية</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head4">AUTO ترجمة المؤرخ: المطهر بن محمد الجرمزي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head5">AUTO نسبه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head6">AUTO مولده ونشأته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head7">AUTO وفاته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head8">AUTO الجرموزي مؤرخا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head9">AUTO مؤلفاته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head10">AUTO وصف المخطوطة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head11">AUTO وصف النسخة الأم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head12">AUTO منهج المؤلف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head13">AUTO لغته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head14">AUTO ### ||| AUTO أهمية المخطوطة ومحتوياتها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head15">AUTO (ب): محتويات المخطوطة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head16">AUTO 1- الأوضاع السياسية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head17">AUTO أ- السياسة الداخلية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head18">AUTO ب- السياسة الخارجية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head19">AUTO 2- الأوضاع الإقتصادية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head20">AUTO 3- الأوضاع الاجتماعية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head21">AUTO 4- الأوضاع العلمية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head22">AUTO 5- الظواهر الطبيعية</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head23">AUTO مقدمة المؤلف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head24">AUTO [دعوة المتوكل على الله إسماعيل]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head25">AUTO [دعوة محمد بن الحسن]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head26">AUTO [علمه وفطنته]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head27">AUTO [نسب الإمام المتوكل على الله إسماعيل]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head28">AUTO [مولده]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head29">AUTO [نشأته]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head30">AUTO [أوصاف الإمام المتوكل على الله]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head31">AUTO [علمه]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head32">AUTO [مؤلفات الإمام المتوكل على الله إسماعيل]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head33">AUTO [شجاعته]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head34">AUTO [ورعه]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head35">AUTO [تدبيره]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head36">AUTO [كرمه]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head37">AUTO [صبره وشفقته]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head38">AUTO [دعوة الإمام المتوكل على الله]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head39">AUTO [كرامات الإمام المتوكل على الله]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head40">AUTO [قضية الفضلي وغدره]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head41">AUTO [قدوم قوم الدعاجنة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head42">AUTO [كتابه في التحذير من المعاملة في الربا]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head43">AUTO [جواب الإمام المتوكل على الله على القطابري]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head44">AUTO [رسالة إلى الحكام والولاة في تحريم الأجرة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head45">AUTO [رسالة في الحث على الصلاة وحجاب النساء]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head46">AUTO [رسالة للإمام حول الغلاء وقلة الثمار والأمطار]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head47">AUTO [رسالة الإمام المتوكل لأهل البيت حول الزكاة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head48">AUTO [رسالة من الإمام للشاه عباس الحسني]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head49">AUTO [رسالة الإمام المتوكل على الله الشريف زيد بن محسن]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head50">AUTO [26/ب][فصل في ذكر عيون العلماء في وقته والقائلين بإمامته من</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head51">AUTO [علماء الشيعة الذين أيدوا دعوة الإمام المتوكل على الله]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head52">AUTO [مبايعة علماء حجة للإمام المتوكل على الله إسماعيل]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head53">AUTO [مبايعة فقهاء ضمد وصبيا الإمام المتوكل على الله] .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head54">AUTO [مبايعة أحمد بن الحسن للإمام المتوكل على الله]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head55">AUTO [أخبار صنعاء]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head56">AUTO [فصل في أخبار خدار وثلأ ]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head57">AUTO [ذكر حصار صنعاء]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head58">AUTO [فتح كوكبان]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head59">AUTO [خروج أحمد بن القاسم من شهارة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head60">AUTO [دخول أحمد بن القاسم عمران]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head61">AUTO [وصول أحمد بن القاسم إلى ضوران]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head62">AUTO [مؤاساة المؤلف للأمير أحمد]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head63">AUTO [مبايعة أحمد بن قاسم للإمام المتوكل على الله]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head64">AUTO [رؤيا للعلامة الهبل]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head65">AUTO [المعارضين لإمامة المتوكل على الله]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head66">AUTO [أخبار صنعاء]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head67">AUTO [دخول أحمد بن الحسن صعدة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head68">AUTO [موالاة شهارة ومن فيها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head69">AUTO [ذكر الإختلاف في وادعة الظاهر]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head70">AUTO [دخول أحمد بن القاسم إلى جهات صعدة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head71">AUTO [أخبار السيد محمد بن علي الفوطي]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head72">AUTO [دعوة إبراهيم المؤيدي]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head73">AUTO [ما حدث في صعدة من مشاكل]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head74">AUTO [وصول إبراهيم المؤيدي إلى الإمام]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head75">AUTO [مبايعة إبراهيم المؤيدي للإمام]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head76">AUTO [ذكر وفاة الأخوين آل أبي نمي]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head77">AUTO [الإستيلاء على عدن ولحج وأبين]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head78">AUTO صفة الحرب في الرعارع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head79">AUTO [تعيين الحاج ياقوت إسماعيل على عدن]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head80">AUTO [فتوى للمتوكل في شأن طفلين يهودي ومسلم رضعا معا]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head81">AUTO [عود إلى أخبار صعدة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head82">AUTO [ذكر تقدم الإمام -عليه السلام- إلى محروس صنعاء وشهارة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head83">AUTO [دخول الإمام المتوكل على الله شهارة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head84">AUTO [ذكر ما حصل من الاختلاف في عذر والعصيمات]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head85">AUTO [إقامة دار الضرب]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head86">AUTO [رسالة الإمام المتوكل إلى دعاة الباطنية]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head87">AUTO [ذكر أحداث مكة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head88">AUTO [ما حدث أيام المؤيد بالله في الحجاز]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head89">AUTO [مراسلة الإمام المتوكل على الله إلى الشريف زيد بن محسن]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head90">AUTO [إرسال ms202 الفقيه النحوي إلى بلاد ينبع للتعليم والإرشاد]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head91">AUTO [سيرة الحبشة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head92">AUTO [أخبار بلاد صعدة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head93">AUTO [تمرد إبراهيم المؤيدي للمرة الثالثة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head94">AUTO [ذكر غزوة باقم]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head95">AUTO [ذكر غزو جنبة وما يواليها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head96">AUTO [إبراهيم المؤيدي يقدم الولاء والطاعة بعد تمرده]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head97">AUTO [رسالة القاضي أحمد بن سعد الدين]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head98">AUTO [رسالة إبراهيم بن محمد المؤيدي إلى الإمام]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head99">AUTO جواب القاضي إبراهيم العيزري</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head100">AUTO [جواب القاضي عبد العزيز الضمدي على الرسالة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head101">AUTO [جواب القاضي أحمد بن صالح بن أبي الرجال على الضمدي] .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head102">AUTO [وصول إبراهيم المؤيدي إلى الإمام المتوكل على الله]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head103">AUTO [وصول الشيخ بن روكان إلى الإمام]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head104">AUTO [توجيه الفقيه جمال الدين ms426 علي بن صلاح إلى صعدة للتبع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head105">AUTO [أعمال محمد بن الحسن في إب وذمار]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head106">AUTO [ذكر الغيول في صنعاء]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head107">AUTO [فتح بلاد الشعيب]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head108">AUTO [أحداث بلاد ظفار داود]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head109">AUTO [دخول الإمام ظفار]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head110">AUTO [وصول الشيخ وازع إلى الإمام]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head111">AUTO [وصول الشريف محمد السليماني صاحب صبيا إلى الإمام]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head112">AUTO [وفاة الأمير أحمد بن القاسم بن محمد]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head113">AUTO [أخبار قرية حبور]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head114">AUTO [تفقد الإمام لبعض المناطق]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head115">AUTO [وصول الإمام المتوكل على الله إلى صنعاء]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head116">AUTO [خروج الإمام إلى حصن الدامغ]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head117">AUTO [الجدب في بعض بلاد اليمن]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head118">AUTO [وصول قوم من بوادي البصرة إلى اليمن]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head119">AUTO [غزو بلاد العصيمات]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head120">AUTO [وصول الإمام إلى محروس الدامغ]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head121">AUTO [وصول العالم أحمد بن سعادات إلى الإمام قادما من الهند]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head122">AUTO [فضائل وكرامات الإمام المتوكل على الله إسماعيل]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head123">AUTO قضية المخزوميتين من قريش</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head124">AUTO [وصف قصر غمدان]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head125">AUTO [قصة الإفرنج وما أحدثوا من مشاكل في سواحل اليمن]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head126">AUTO [ظواهر طبيعية]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head127">AUTO [وصول الشيخ العارف منصور المصري إلى اليمن]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head128">AUTO [وصول الشيخ أحمد بن محمد الجوهري إلى الإمام]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head129">AUTO [ذكر بلاد حضرموت ويافع]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head130">AUTO [ذكر بلاد الرصاص]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head131">AUTO [تجهيز الجيش من قبل الإمام المتوكل لمحاربة آل الرصاص]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head132">AUTO [رسالة القاضي أحمد بن سعد الدين المسوري]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head133">AUTO [الرصاص يتهيأ للخروج]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head134">AUTO [تقدم جيوش الإمام المتوكل إلى ذي كراش]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head135">AUTO [التحام الجيش الإمامي بعساكر الرصاص]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head136">AUTO [انهزام الرصاص ومقتله]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head137">AUTO قصة السيد شرف الدين وأصحابه وما غنموه من الصلالة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head138">AUTO [تقدم القوات الإمامية إلى البيضاء]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head139">AUTO [ولاء سلطان قبائل العوالق والفضلي للإمام]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head140">AUTO [أحداث الحبشة ومراسلة الأمير درويش إلى الإمام المتوكل]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head141">AUTO [رد الإمام على الأمير درويش]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head142">AUTO [فتح بلاد يافع وما والاها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head143">AUTO [كبار أعيان يافع يطلبون الأمان]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head144">AUTO [البانيان وما وقع بينهم وبين أهل صنعاء]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head145">AUTO [عصيان أهل شرعب]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head146">AUTO [تمرد الشيخ العفيف في يافع]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head147">AUTO [الحرب ضد ابن العفيف]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head148">AUTO [وفاة زوج الإمام المتوكل على الله إسماعيل]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head149">AUTO [مراسلة السلطان بدر بن عبد الله الكثيري إلى الإمام المتوكل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head150">AUTO [جواب الإمام المتوكل على الله إلى السلطان بدر بن عبد الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head151">AUTO [إرسال القاضي الحسن بن أحمد الحيمي إلى حضرموت]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head152">AUTO [رسالة القاضي الحيمي إلى الإمام]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head153">AUTO [رسالة السلطان بدر الكثيري إلى الإمام]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head154">AUTO [توجه الأمير محمد بن المتوكل على الله إسماعيل إلى الحج]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head155">AUTO [ذكر تقدم القوات الإمامية إلى حضرموت وجهاتها]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head156">AUTO [دخول القوات الإمامية إلى أحور]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head157">AUTO [بقاء أحمد بن الحسن في ميفعة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head158">AUTO [ما حدث في وادي يبعث]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head159">AUTO [السيطرة على الهجران الأعلى والأسفل من بلاد حضرموت]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head160">AUTO [رسالة الصفي ms600 أحمد إلى الإمام يبين فيها سيطرته على حضرموت]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head161">AUTO [وصول سلطان حضرموت إلى الإمام]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head162">AUTO [ما حدث للكنج من قبل السلطان جعفر بن عبد الله] :</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head163">AUTO [قصة الشريف الهندي]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head164">AUTO [تسيير أمور حضرموت والشحر] .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head165">AUTO [قضية الهيمثي والفضلي]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head166">AUTO غزاة الهيثمي الأخرى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head167">AUTO [قدوم الإمام المتوكل على الله إلى صنعاء]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head168">AUTO [تنظيم أمور صنعاء]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head169">AUTO [وصول وفد من الهند إلى ms629 الإمام]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head170">AUTO [رسالة من الإمام المتوكل على الله إسماعيل إلى سلطان الهند]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head171">AUTO [تجهيز الحسن بن الإمام المتوكل على الله إلى الحج] :</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head172">AUTO [ذكر المخرج المنصور على الفضلي] .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head173">AUTO [أخبار الهيثمي ووصوله إلى الإمام]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head174">AUTO [أخبار الفضلي]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head175">AUTO [خروج القوات الإمامية إلى فيفا]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head176">AUTO [وصول سفير من الحبشة إلى الإمام]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head177">AUTO [وصول طايفة من الإفرنج إلى بندر المخاء]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head178">AUTO [طلوع محمد بن الحسن إلى صنعاء]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head179">AUTO [مراسلة الإمام إلى سلطان الهند]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head180">AUTO [وصول أمير نصيف البديع إلى الإمام]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head181">AUTO [وصول وفد من الإحساء إلى الإمام المتوكل على الله]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head182">AUTO [وصول وفد من البصرة إلى الإمام]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head183">AUTO [تفقد الإمام لأحوال الأهالي في عدد من المناطق]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head184">AUTO ذكر افتقاد حرية اليهود.......</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head185">CHECK [الملحق الأول]</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head186">AUTO مؤلفات الإمام المتوكل على الله إسماعيل</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head187">CHECK [الملحق الثالث]</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head188">AUTO أشهر الألقاب الواردة في المخطوطة</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head189">CHECK [الملحق الرابع قائمة المصادر والمراجع]</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head190">AUTO أولا: المخطوطات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head191">AUTO ثانيا: المصادر والمراجع العربية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head192">AUTO ثالثا: الدوريات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head193">AUTO رابعا: المراجع الأجنبية:</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 915072</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Jurmuzi</label><label>tags:  :: Zaydiyya@السير والتاريخ</label><label>url: https://raw.githubusercontent.com/OpenITI/1100AH/master/data/1077Jurmuzi/1077Jurmuzi.TuhfatAsmac/1077Jurmuzi.TuhfatAsmac.Zaydiyya0000148-ara1</label><label>tok_length: 210868</label><label>status: pri</label><label>id: Zaydiyya0000148</label><label>ed_info: </label><label>title_lat: Tuhfat Asmac</label><label>title_ar: تحفة الأسماع والأبصار</label><label>book: 1077Jurmuzi.TuhfatAsmac</label><label>author_lat: Jurmuzi</label><label>author_ar: المطهر بن محمد الجرموزي</label><label>date: 1077</label><label>versionUri: 1077Jurmuzi.TuhfatAsmac.Zaydiyya0000148-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "312", "313", "314", "315", "316", "317", "318", "319", "320", "321", "322", "323", "324", "325", "326", "327", "328", "329", "330", "331", "332", "333", "334", "335", "336", "337", "338", "339", "340", "341", "342", "343", "344", "345", "346", "347", "348", "349", "350", "351", "352", "353", "354", "355", "356", "357", "358", "359", "360", "361", "362", "363", "364", "365", "366", "367", "368", "369", "370", "371", "372", "373", "374", "375", "376", "377", "378", "379", "380", "381", "382", "383", "384", "385", "386", "387", "388", "389", "390", "391", "392", "393", "394", "395", "396", "397", "398", "399", "400", "401", "402", "403", "404", "405", "406", "407", "408", "409", "410", "411", "412", "413", "414", "415", "416", "417", "418", "419", "420", "421", "422", "423", "424", "425", "426", "427", "428", "429", "430", "431", "432", "433", "435", "436", "437", "438", "439", "440", "441", "442", "443", "444", "445", "446", "447", "448", "449", "450", "451", "452", "453", "454", "455", "456", "457", "458", "459", "460", "461", "462", "463", "464", "465", "466", "467", "468", "469", "470", "471", "472", "473", "474", "475", "476", "477", "478", "479", "480", "481", "482", "483", "484", "485", "486", "487", "488", "489", "490", "491", "492", "493", "494", "495", "496", "497", "498", "499", "500", "501", "502", "503", "504", "505", "506", "507", "508", "509", "510", "511", "512", "513", "514", "515", "516", "517", "518", "519", "520", "521", "522", "523", "524", "525", "526", "527", "528", "529", "530", "531", "532", "533", "534", "535", "536", "537", "538", "539", "540", "541", "542", "543", "544", "545", "546", "547", "548", "549", "550", "551", "552", "553", "554", "555", "556", "557", "558", "559", "560", "561", "562", "563", "564", "565", "566", "567", "568", "569", "570", "571", "572", "573", "574", "575", "576", "577", "578", "579", "580", "581", "582", "583", "584", "585", "586", "587", "588", "589", "590", "591", "592", "593", "594", "595", "596", "597", "598", "599", "600", "601", "602", "603", "604", "605", "606", "607", "608", "609", "610", "611", "612", "613", "614", "615", "616", "617", "618", "619", "620", "621", "622", "623", "624", "625", "626", "627", "628", "629", "630", "631", "632", "633", "634", "635", "636", "637", "638", "639", "640", "641", "642", "643", "644", "645", "646", "647", "648", "649", "650", "651", "652", "653", "654", "655", "656", "657", "658", "659", "660", "661", "662", "663", "664", "665", "666", "667", "668", "669", "670", "671", "672", "673", "674", "675", "676", "677", "678", "679", "680", "681", "682", "683", "684", "685", "686", "687", "688", "689", "690", "691", "692", "693", "694", "695", "696", "697", "698", "699", "700", "701", "702", "703", "704", "705", "706", "707", "708", "709", "710", "711", "712", "713", "714", "715", "716", "717", "718", "719", "720", "721", "722", "723", "724", "725", "726", "727", "728", "729", "730", "731", "732", "733", "734", "735", "736", "737", "738", "739", "740", "741", "742", "743", "744", "745", "746", "747", "748", "749", "750", "751", "752", "753", "754", "755", "756", "757", "758", "759", "760", "761", "762", "763", "764", "765", "766", "767", "768", "769", "770", "771", "772", "773", "774", "775", "776", "777", "778", "779", "780", "781", "782", "783", "784", "785", "786", "787", "788", "789", "790", "791", "792", "793", "794", "795", "796", "797", "798", "799", "800", "801", "802", "803", "804", "805", "806", "807", "808", "809", "810", "811", "812", "813", "814", "815", "816", "817", "818", "819", "820", "821", "822", "823", "824", "825", "826", "827", "828", "829", "830", "831", "832", "833", "834", "835", "836", "837", "838", "840", "841", "842", "843", "844", "845", "846", "847", "848", "849", "850", "851", "852", "853", "854", "855", "856", "857", "858", "859", "860", "861", "862", "863", "864", "865", "866", "867", "868", "869", "870", "871", "872", "873", "874", "875", "876", "877", "878", "879", "880", "881", "882", "883", "884", "885", "886", "887", "888", "889", "890", "891", "892", "893", "894", "895", "896", "897", "898", "899", "900", "901", "902", "903", "904", "905", "906", "907", "908", "909", "910", "911", "912", "913", "914", "915", "916", "917", "918", "919", "920", "921", "922", "923", "924", "925", "926", "927", "928", "929", "930", "931", "932", "933", "934", "935", "936", "937", "938", "939", "940", "941", "942", "943", "944", "945", "946", "947", "948", "949", "950", "951", "952", "953", "954", "955", "956", "957", "958", "959", "960", "961", "962", "963", "964", "965", "966", "967", "968", "969", "970", "971", "972", "973", "974", "975", "976", "977", "978", "979", "980", "981", "982", "983", "984", "985", "986", "987", "988", "989", "990", "991", "992", "993", "994", "995", "996", "997", "998", "999", "1000", "1001", "1002", "1003", "1004", "1005", "1006", "1008", "1009", "1010", "1011", "1012", "1013", "1014", "1015", "1016", "1017", "1018", "1019", "1020", "1021", "1022", "1023", "1024", "1025", "1026", "1027", "1028", "1029", "1030", "1031", "1032", "1033", "1034", "1035", "1036", "1037", "1038", "1039", "1040", "1041", "1042", "1043", "1044", "1045", "1046", "1047", "1048", "1049", "1050", "1051", "1052", "1053", "1054", "1055", "1056", "1057", "1058", "1059", "1060", "1061", "1062", "1063", "1064", "1065", "1066", "1067", "1068", "1069", "1070", "1071", "1072", "1073", "1074", "1075", "1076", "1077", "1078", "1079", "1080", "1081", "1082", "1083", "1084", "1085", "1086", "1087", "1088", "1089", "1090", "1091", "1092", "1093", "1094", "1095", "1096", "1097", "1099", "1100", "1101", "1102", "1103", "1104", "1105", "1106", "1107", "1108", "1109", "1110", "1111", "1112", "1113", "1114", "1115", "1116", "1117", "1118", "1119", "1120", "1121", "1122", "1123", "1124", "1125", "1126", "1127", "1128", "1129", "1130", "1131", "1132", "1133", "1134", "1135", "1136", "1137", "1138", "1139", "1140", "1141", "1142", "1143", "1144", "1145", "1146", "1147"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
