<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">[شرح نخبة الفكر]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">شرح نخبة الفكر (1)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">مقدمة عن كتب علم مصطلح الحديث:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">كتاب نخبة الفكر وشروحها:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">حواشي النخبة:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">مختصرات النخبة:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">نظم النخبة:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">طبعات النخبة:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">الدعوة إلى نبذ قواعد المتأخرين في مصطلح الحديث:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">.... </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">كتاب: (المنهج المقترح لفهم المصطلح) للعوني:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head0">شرح نخبة الفكر (2)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head1">المبادئ العشرة ms033 </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head2">المبادئ العشرة:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head3">التعريف:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head4">موضوع هذا العلم:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head5">وثمرته:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head6">وفضله:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head7">نسبته إلى غيره من العلوم:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head8">واضع هذا العلم:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head9">واسم هذا العلم:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head10">استمداده:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head11">وحكم تعلم هذا العلم:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head12">مسائل هذا العلم:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head13">اسم الكتاب:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head14">شرح مقدمة الكتاب:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head15">تقسيم الأخبار:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head16">: المتواتر </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head17">تعريف الخبر:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head18">المتواتر:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head19">أقسام المتواتر:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head20">وجود المتواتر:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head21">حكم الخبر المتواتر وماذا يفيد؟:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head22">الكتب المؤلفة في الحديث المتواتر:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head0">شرح نخبة الفكر (3)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head1">أقسام الآحاد:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head2">المشهور:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head3">تعريف المشهور في اللغة:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head4">تعريف المشهور في الاصطلاح:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head5">أمثلة على المشهور:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head6">العزيز:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head7">تعريف العزيز في اللغة:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head8">تعريف العزيز في الاصطلاح:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="03.html#head9">أمثلة على العزيز:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head0">شرح نخبة الفكر (4)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head1">الحسن لذاته:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head2">زيادة الثقة:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head3">.... </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head4">الشاذ:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head5">المنكر:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head6">المتابع والشاهد:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="04.html#head7">مختلف الحديث:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="05.html#head0">شرح نخبة الفكر (5)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="05.html#head1">أمثلة على مختلف الحديث:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="05.html#head2">المصنفات في مختلف الحديث:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="05.html#head3">الناسخ والمنسوخ:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="05.html#head4">النسخ لغة:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="05.html#head5">.... </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head0">شرح نخبة الفكر (6)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head1">تدليس العطف:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head2">تدليس الشيوخ:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head3">تدليس البلدان:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head4">الأغراض الحاملة على التدليس:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head5">طبقات المدلسين:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head6">حكم رواية المدلس:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head7">أسباب الطعن في الراوي:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head8">الكذب:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head9">رواية الكاذب:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head10">التهمة بالكذب:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head11">فحش الغلط:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head12">الغفلة:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head13">الفسق:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head14">الوهم:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head15">مخالفة الثقات:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head16">الجهالة:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head17">أقسام المجاهيل:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="06.html#head18">حكم رواية مجهول الذات:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="07.html#head0">شرح نخبة الفكر (7)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="07.html#head1">البدعة:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="07.html#head2">.... </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="07.html#head3">سوء الحفظ:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="07.html#head4">.... </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="07.html#head5">تعريف الموضوع:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="07.html#head6">أسباب الوضع:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="07.html#head7">بم يعرف الوضع؟</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="07.html#head8">المعلل، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="07.html#head9">المنكر:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="07.html#head10">المعلل:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="07.html#head11">أجناس العلل:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="07.html#head12">بم تعرف العلة؟</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head0">شرح نخبة الفكر (8)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head1">مدرج المتن، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head2">صور الإدراج في الإسناد:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head3">مدرج المتن:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head4">أقسام مدرج المتن ثلاثة:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head5">بم يعرف الإدراج؟</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head6">حكم الإدراج:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head7">المقلوب:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head8">أنواع القلب:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head9">المزيد في متصل الأسانيد:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head10">المضطرب:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head11">أقسام المضطرب:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head12">حكم الاضطراب:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head13">المصحف والمحرف:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head14">أقسام التصحيف:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head15">وينقسم التصحيف باعتبار منشأه إلى قسمين:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head16">أقسام التحريف: ينقسم التحريف باعتبار موضعه إلى قسمين:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head17">اختصار الحديث والرواية بالمعنى:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head18">غريب الحديث:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="08.html#head19">الجهالة:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="09.html#head0"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="09.html#head1">شرح نخبة الفكر (9)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="09.html#head2">: "وقد يكون مقلا فلا يكثر الأخذ عنه، وصنفوا فيه الوحدان، أو لا يسمى اختصارا وفيه المبهمات، ولا يقبل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="09.html#head3">المبهم </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="09.html#head4">المبهم:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="09.html#head5">من أسباب الطعن في الراوي البدعة:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="09.html#head6">حكم رواية المبتدع:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="09.html#head7">حكم رواية سيء الحفظ:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="09.html#head8">المقطوع، </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="09.html#head9">المرفوع:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="09.html#head10">المقطوع:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="10.html#head0"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="10.html#head1">شرح نخبة الفكر </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="10.html#head2">.... </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="10.html#head3">.... </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="11.html#head0"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="11.html#head1">شرح نخبة الفكر </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="12.html#head0">شرح نخبة الفكر (12)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="12.html#head1">الكنى والألقاب والأنساب:</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 458021</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Cabd Karim Khudayr</label><label>tags: CENT0900 :: _CULUM :: _HADITH :: GAL@nodata :: Shamela@علوم الحديث - مرقم آليا</label><label>url: https://raw.githubusercontent.com/OpenITI/1450AH/master/data/1450CabdKarimKhudayr/1450CabdKarimKhudayr.SharhNukhbatFikr/1450CabdKarimKhudayr.SharhNukhbatFikr.Shamela0025955-ara1</label><label>tok_length: 109434</label><label>status: pri</label><label>id: Shamela0025955</label><label>ed_info: </label><label>title_lat: Sharh Nukhbat Fikr</label><label>title_ar: شرح نخبة الفكر</label><label>book: 1450CabdKarimKhudayr.SharhNukhbatFikr</label><label>author_lat: Cabd Karim Khudayr</label><label>author_ar: ابن حجر العسقلاني، أبو الفضل أحمد بن علي (المتوفى: 852هـ)</label><label>date: 1450</label><label>versionUri: 1450CabdKarimKhudayr.SharhNukhbatFikr.Shamela0025955-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "000", "001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036"], "02": ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031"], "03": ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033"], "04": ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035"], "05": ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035"], "06": ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034"], "07": ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035"], "08": ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036"], "09": ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035"], "10": ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036"], "11": ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037"], "12": ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
