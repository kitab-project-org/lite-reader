<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">CHECK [الجزء الأول]</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head1">AUTO مقدمة التحقيق</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head2">AUTO أولا: خطة ومنهج التحقيق.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head3">AUTO ثانيا: بين المخطوطة ومؤلفها</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head4">AUTO أ- ترجمة المؤلف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head5">AUTO ب- نسبة الكتاب لمؤلفه</a>
</li>
</ul>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head6">AUTO بسم الله الرحمن الرحيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head7">AUTO وأنا أسأل الله الكريم رب العرش العظيم، مجيب الدعاء، وقابل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head8">AUTO فائدة [في عدم اختلاف الأمة على حجية إجماع أهل البيت ms034]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head9">AUTO [بحث في بيان المقصود بالشيعة]</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head10">AUTO قلت: قلت : وهذا أيضا لا يكون إلا توقيفا لإمتناع الإجتهاد(2) فيهما.</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head11">AUTO قلت: قلت: ولهذه العلة استحل أئمة الهدى من العترة المحقين قتل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head12">AUTO نعم قلت: قلت: هذا وقد انقضيت (3) بحمدالله وعونه وكرمه مما</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head13">AUTO [أولا: آية التطهير]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head14">AUTO قلت: قلت: وأنا أؤيد هذا -إن شاء الله تعالى- بما لا يكون عليه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head15">AUTO المقصد الرابع ms076</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head16">AUTO قلت: قلت : وتنبيهي فيما سبق من الحكاية لما حكاه المنصور</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">AUTO الجزء الثاني</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head18">AUTO [الأصول التي هي محل اجماع العترة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head19">AUTO تنبيه [بيان صحة اجماع العترة على الثلاثة الأصول المذكورة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head20">AUTO تنبيه [فيمن ينتسب إلى العترة ويتبع العامة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head21">AUTO تنبيه [في القلة والكقرة واتباع الجماعة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head22">AUTO [أولاد الإمام الناصر الأطروش]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head23">AUTO [أولاد الإمام الهادي (ع) ]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head24">AUTO وكذلك من أولاد الهادي للحق عليه السلام يحيى بن الحسين بن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head25">AUTO وكذلك الإمام الكبير الشهير الداعي إلى الله: الحسن بن القاسم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head26">AUTO [الإمام أبو عبد الله محمد بن الإمام الداعي]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head27">AUTO [الإمام جعفر بن محمد بن الحسين وأولاده (أبو الفضل)]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head28">AUTO وإن منهم الإمام أبي الفضل الملقب بالثائر في الله صاحب الجيل،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head29">AUTO قال عليه السلام: وكان له من الورع والاحتياط ما لم يكن لغيره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head30">AUTO [الإمام يحيى بن الحسين بن إسماعيل]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head31">AUTO قال عليه السلام: ثم الإمام المتكلم النسابة، أبي الحسين: يحيى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head32">AUTO ثم الإمام الكبير، الناصر لدين الله، القائم بأمر الله: الحسين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head33">AUTO قلت: وهو جد أبي المنصور بالله عليه السلام القريب نعم ثم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head34">AUTO [طبقة المحصلين للمذهب]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head35">AUTO قلت: وعلى الجملة إن أسماء أعيانهم وعلمائهم في تواريخ الحرمين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head36">AUTO قلت: والقاضي جعفر أيضا ممن عاصر الإمام أحمد بن سليمان عليه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head37">AUTO تنبيه [في بيان كيفية تحصيل مذهب العترة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head38">AUTO تنبيه [في بيان بعض مسائل الاجماع عند علماء العترة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head39">AUTO تنبيه [في بيان سبب تسمية المذهب الزيدي بالهادوي]:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head40">AUTO فصل [غير الممكن حصرهم من خلف عترة المصطفى]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head41">AUTO ومن الحمزات أهل قطابر كآل جعفر بن داود الحمزي وغيرهم من</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head42">AUTO [الإمام المهدي أحمد بن الحسين (أبو طير)]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head43">AUTO [بعض آل يحيى بن يحيى (سادة الجبال)]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head44">AUTO قلت: ثم الإمام أمير المؤمنين المتوكل على الله رب العالمين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head45">AUTO قلت: ثم الإمام الصوام القوام، الذي عم فضله الأنام، أمير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head46">AUTO [الإمام علي بن محمد بن علي ومن يليه من الأئمة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head47">AUTO [بعض من له العقب من أحفاد الإمام القاسم بن محمد]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head48">AUTO [بعض من له عقب من أحفاد الإمام المتوكل إسماعيل]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head49">AUTO [ذكر من عاصرهم المؤلف من العلماء من آل القاسم بن محمد]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head50">AUTO قلت: وأما من عاصرهم من علماء آل الرسول والأمراء الصلحاء منهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head51">AUTO [آل الأمير المؤيد]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head52">AUTO داود المؤيدي، [ثم السيد العلامة الحاكم في مدينة صنعاء: الحسن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head53">AUTO [من آل المفضل بن الحجاج (بيت الوزير)]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head54">AUTO قلت: ومن آل المفضل بن الحجاج بن علي بن يحيى بن القاسم بن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head55">AUTO [العلماء بنو الشامي وزبارة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head56">AUTO [العلماء من بنو بيت الهادوي والمنتصر]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head57">AUTO قلت: وكذلك السيد: أحمد بن هارون بن الحسن [122ب-أ] بن هارون</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head58">AUTO [العلماء بنو المحرابي والمدومي]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head59">AUTO قلت: وكذلك السيد: صلاح [بن إبراهيم بن الإمام المهدي بن أحمد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head60">AUTO شهارة في عصرنا وله إخوان وأولاد فضلاء كملا، وهم (يرتفعون</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head61">AUTO [أشراف الماخذ وبلاد الأشمور]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head62">AUTO الأديب: إبراهيم بن محمد الشاعر وابن أخيه السيد العارف: الحسن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head63">AUTO [العلماء بيت الغرباني وجحاف]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head64">AUTO [العلماء من أشراف الحمزات]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head65">AUTO قلت: وكذلك الأشراف [الحمزات](1) بنو الحرة الذين منهم الشريف:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head66">AUTO قلت: وأما الأشراف أهل الضبعات ففيهم حمزية وهادوية وقاسمية .</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head67">AUTO [العلماء من بعض الأشراف الموسويين]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head68">AUTO قلت: ومنهم الشريف إمام العلم المجاهد: هاشم بن حازم بن راجح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head69">AUTO [بعض العلماء من آل الحوثي]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head70">AUTO [طرق مذهب العترة من أصولها الثلاثة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head71">AUTO إلى عمه الناصر أحمد بن يحيى الهادي عليه السلام وسند أحمد بن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head72">AUTO [طرق وأسانيد المؤلف]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head73">AUTO وأما القسم الثاني منهم -أي من أهل النظر-(1) وهم الذين نظرهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head74">AUTO [بيان صنف الفقهاء المقلدين]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head75">AUTO فصل [الاستدلال على جواز تغلب جميع أئمة العترة أو بعضهم]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head76">AUTO [3] باب يشتمل على ذكر رجال من أكابر المبتدعة</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head77">AUTO ضرار بن عمر(2)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head78">AUTO وجهم بن صفوان</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head79">AUTO فصل [في المرجئة]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head80">AUTO فصل [الحشوية النابتة](1)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head81">AUTO ثم يصححون الجميع ويتمسكون بالظاهر ولا يأولون، ومن [142ب-أ]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head82">AUTO قلنا: لنا عليهم ما مر(1)[143ب-أ]. انتهى كلام (الأساس وشرحه).</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head83">AUTO [5] باب يشتمل على ذكر ما يختاره كل فريق من العدلية، والجبرية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head84">AUTO [6] باب يشتمل على ذكر أشياء مما يجب لأول العترة وآخرها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head85">AUTO [7] باب يشتمل على رجال من رجال العدلية والشيعة وشيء من</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head86">AUTO [8] باب يشتمل على ذكر بعض كتب صفوة العترة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head87">AUTO قلت: فلنعد إلى تمام كلام السيد العلامة إبراهيم بن محمد بن</a>
</li>
</ul>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 523237</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Qasim Shuhari</label><label>tags:  :: Zaydiyya@الشبه جاهزة</label><label>url: https://raw.githubusercontent.com/OpenITI/1200AH/master/data/1190IbnQasimShuhari/1190IbnQasimShuhari.BulughArab/1190IbnQasimShuhari.BulughArab.Zaydiyya0000398-ara1</label><label>tok_length: 126411</label><label>status: pri</label><label>id: Zaydiyya0000398</label><label>ed_info: (مؤسسة الإمام زيد بن علي(ع) الثقافية)</label><label>title_lat: Bulugh Arab</label><label>title_ar: بلوغ الأرب وكنوز الذهب</label><label>book: 1190IbnQasimShuhari.BulughArab</label><label>author_lat: Ibn Qasim Shuhari</label><label>author_ar: </label><label>date: 1190</label><label>versionUri: 1190IbnQasimShuhari.BulughArab.Zaydiyya0000398-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "005", "007", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "071", "072", "073", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "144", "145", "146", "147", "148", "149", "150", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248"], "02": ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "067", "068", "069", "070", "071", "072", "074", "075", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "169", "170", "173", "175", "176", "177", "178", "179", "180", "181", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "263", "264", "265", "266", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "291", "292"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
