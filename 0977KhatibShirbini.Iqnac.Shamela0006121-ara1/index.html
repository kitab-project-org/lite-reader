<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">هذا كتاب بيان أحكام الطهارة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">(وجلود) الحيوانات (الميتة) كلها (تطهر) ظاهرا وباطنا (بالدباغ) ولو بإلقاء الدابغ عليه بنحو ريح أو بإلقائه على الدابغ كذلك لقوله صلى الله عليه وسلم أيما إهاب دبغ فقد طهر رواه مسلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">(فصل في السواك)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">(فصل في الوضوء)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">(فصل في الاستنجاء)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">فصل في بيان ما ينتهي به الوضوء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">فصل في موجب الغسل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">(فصل في أحكام الغسل)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">فصل في الأغسال المسنونة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">فصل في المسح على الخفين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">فرع لو خرز خفه بشعر نجس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">فصل في التيمم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">فصل في إزالة النجاسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">فصل في الحيض والنفاس والاستحاضة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">كتاب الصلاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">فصل القول فيمن تجب عليه الصلاة وفي بيان النوافل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">فصل القول في شروط الصلاة والسنن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">فصل في أركان الصلاة وسننها وهيئاتها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">فصل فيما يختلف فيه حكم الذكر والأنثى في الصلاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">فصل فيما يبطل الصلاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">فصل فيما تشتمل عليه الصلاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">فصل في سجود السهو في الصلاة فرضا كانت أو نفلا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">فصل في بيان الأوقات التي تكره فيها الصلاة بلا سبب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">فصل في صلاة الجماعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">فصل في ms216 صلاة المسافر من حيث القصر والجمع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">فصل في صلاة الجمعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">فصل في صلاة العيدين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">فصل في صلاة الكسوف للشمس والخسوف للقمر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">فصل في صلاة الاستسقاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">فصل في كيفية صلاة الخوف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">فصل فيما يجوز لبسه من الحرير للمحارب وغيره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">فصل في صلاة الجنازة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">فصل في بيان نصاب الإبل وما يجب إخراجه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">فصل في بيان نصاب البقر وما يجب إخراجه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">فصل في بيان نصاب الغنم وما يجب إخراجه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">فصل في زكاة خلطة الأوصاف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">فصل في بيان نصاب الذهب والفضة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">فصل في بيان نصاب الزروع والثمار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">فصل في زكاة العروض والمعدن والركاز</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">فصل في زكاة الفطر ويقال صدقة الفطر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">فصل في قسم الصدقات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">كتاب الصيام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">فصل في الاعتكاف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">كتاب الحج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">فصل في محرمات الإحرام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">(والدماء الواجبة في الإحرام) بترك مأمور به أو ارتكاب منهي عنه (خمسة أشياء) بطريق الاختصار وبطريق البسط تسعة أنواع دم التمتع ودم الفوات والدم المنوط بترك مأمور به ودم الحلق والقلم ودم الإحصار ودم قتل الصيد ودم الجماع ودم الاستمتاع ودم القران</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head0">كتاب البيوع وغيرها من أنواع المعاملات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head1">فصل في الربا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head2">فصل في أحكام الخيار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head3">فصل في السلم ويقال له السلف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head4">فصل في الرهن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head5">فصل في الحجر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head6">فصل في الصلح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head7">فصل في الحوالة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head8">فصل في الضمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head9">فصل في كفالة البدن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head10">فصل في الشركة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head11">فصل في الوكالة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head12">فصل في الإقرار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head13">فصل في العارية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head14">فصل في الغصب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head15">فصل في الشفعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head16">فصل في القراض</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head17">فصل في المساقاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head18">فصل في الإجارة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head19">فصل في الجعالة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head20">فصل في المزارعة والمخابرة وكراء الأرض</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head21">فصل في إحياء الموات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head22">فصل في الوقف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head23">فصل في الهبة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head24">فصل في اللقطة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head25">فصل في بعض النسخ وهو في أقسام اللقطة وبيان حكم كل منها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head26">(فصل في اللقيط)</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head27">فصل في الوديعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head28">حجب الحرمان بالشخص</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head29">فصل في الوصية الشاملة للإيصاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head30">فصل في أركان النكاح</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head31">فصل في بيان أولياء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head32">فصل في محرمات النكاح ومثبتات الخيار فيه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head33">فصل في الصداق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head34">فصل في الوليمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head35">فصل في القسم والنشوز</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head36">فصل في الخلع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head37">فصل في الطلاق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head38">فصل في طلاق السني</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head39">فصل فيما يملكه الزوج من الطلقات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head40">فصل في الرجعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head41">فصل في بيان ما يتوقف عليه حل المطلقة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head42">فصل في الإيلاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head43">فصل في الظهار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head44">فصل في اللعان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head45">فرع لو قذف زوج زوجته</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head46">فصل في العدد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head47">فصل فيما يجب للمعتدة وعليها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head48">فصل في أحكام الاستبراء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head49">فصل في الرضاع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head50">فصل في نفقة القريب والرقيق والبهائم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head51">فصل في النفقة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head52">فصل في الحضانة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head53">كتاب الجنايات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head54">فصل في الدية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head55">فصل في القسامة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head56">فصل في حد القذف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head57">فصل في حد شارب السكر من خمر وغيره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head58">فصل في حد السرقة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head59">فصل في قاطع الطريق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head60">فصل في حكم الصيال وما تتلفه البهائم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head61">فصل في قتال البغاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head62">فصل في الردة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head63">فصل في تارك الصلاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head64">فصل في قسم الغنيمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head65">فصل في قسم الفيء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head66">فصل في الجزية تطلق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head67">فصل في الأطعمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head68">فصل في الأضحية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head69">فصل في العقيقة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head70">فصل في أحكام النذور</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head71">فصل في القسمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head72">فصل في الدعوى والبينات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head73">فصل في الشهادات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head74">فصل كما في بعض النسخ يذكر فيه العدد في الشهود والذكورة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head75">كتاب العتق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head76">فصل في أحكام الولاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head77">فصل في التدبير</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head78">فصل في الكتابة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="02.html#head79">فصل في أمهات الأولاد</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 1079869</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Khatib Shirbini</label><label>tags: CENT1000 :: _FIQH :: _SHAFICI :: GAL@literature-islamic :: GAL@period-decline :: GAL@1518-1798CE :: GAL@period-ottoman :: GAL@shafiis :: GAL@egypt :: GAL@fiqh :: GAL@syria :: Shamela@فقه شافعي</label><label>url: https://raw.githubusercontent.com/OpenITI/1000AH/master/data/0977KhatibShirbini/0977KhatibShirbini.Iqnac/0977KhatibShirbini.Iqnac.Shamela0006121-ara1</label><label>tok_length: 259056</label><label>status: sec</label><label>id: Shamela0006121</label><label>ed_info: مكتب البحوث والدراسات - دار الفكر :: دار الفكر - بيروت</label><label>title_lat: Iqnac</label><label>title_ar: الإقناع في حل ألفاظ أبي شجاع</label><label>book: 0977KhatibShirbini.Iqnac</label><label>author_lat: Khatib Shirbini</label><label>author_ar: شمس الدين، محمد بن أحمد الخطيب الشربيني الشافعي (المتوفى: 977هـ)</label><label>date: 0977</label><label>versionUri: 0977KhatibShirbini.Iqnac.Shamela0006121-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "049", "050", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272"], "02": ["273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "312", "313", "314", "315", "316", "317", "318", "319", "320", "321", "322", "323", "324", "325", "326", "327", "328", "329", "330", "331", "332", "333", "334", "335", "336", "337", "338", "339", "340", "341", "342", "343", "344", "345", "346", "347", "348", "349", "350", "351", "352", "353", "354", "355", "356", "357", "358", "359", "360", "361", "362", "363", "364", "365", "366", "367", "368", "369", "370", "371", "372", "373", "374", "375", "376", "377", "378", "379", "380", "381", "382", "383", "384", "385", "386", "387", "388", "389", "390", "391", "392", "393", "394", "395", "396", "397", "398", "399", "400", "401", "402", "403", "404", "405", "406", "407", "408", "409", "410", "411", "412", "413", "414", "415", "416", "417", "418", "419", "420", "421", "422", "423", "424", "425", "426", "427", "428", "429", "430", "431", "432", "433", "434", "435", "436", "437", "438", "439", "440", "441", "442", "443", "444", "445", "446", "447", "448", "449", "450", "451", "452", "453", "454", "455", "456", "457", "458", "459", "460", "461", "462", "463", "464", "465", "466", "467", "468", "469", "470", "471", "472", "473", "474", "475", "476", "477", "478", "479", "480", "481", "482", "483", "484", "485", "486", "487", "488", "489", "490", "491", "492", "493", "494", "495", "496", "497", "498", "499", "500", "501", "502", "503", "504", "505", "506", "507", "508", "509", "510", "511", "512", "513", "514", "515", "516", "517", "518", "519", "520", "521", "522", "523", "524", "525", "526", "527", "528", "529", "530", "531", "532", "533", "534", "535", "536", "537", "538", "539", "540", "541", "542", "543", "544", "545", "546", "547", "548", "549", "550", "551", "552", "553", "554", "555", "556", "557", "558", "559", "560", "561", "562", "563", "564", "565", "566", "567", "568", "569", "570", "571", "572", "573", "574", "575", "576", "577", "578", "579", "580", "581", "582", "583", "584", "585", "586", "587", "588", "589", "590", "591", "592", "593", "594", "595", "596", "597", "598", "599", "600", "601", "602", "603", "604", "605", "606", "607", "608", "609", "610", "611", "612", "613", "614", "615", "616", "617", "618", "619", "620", "621", "622", "623", "624", "625", "626", "627", "628", "629", "630", "631", "632", "633", "634", "635", "636", "637", "638", "639", "640", "641", "642", "643", "644", "645", "646", "647", "648", "649", "650", "651", "652", "653", "654", "655", "656", "657", "658", "659", "660", "661", "662", "663"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
