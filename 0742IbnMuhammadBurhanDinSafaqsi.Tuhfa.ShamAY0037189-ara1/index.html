<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">CHECK [الفصل الأول: الصفاقسي]</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head1">AUTO نسبه: هو أبو إسحاق برهان الدين إبراهيم بن أبي عبدالله شمس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head2">AUTO شيوخه:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head3">AUTO رحلاته:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head4">AUTO مؤلفاته:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head5">AUTO وفاته: توفي برهان الدين في الثامن عشر من ذي القعدة سنة</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">AUTO الفصل الثاني: كتاب (التحفة الوفية بمعاني حروف العربية)</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head7">AUTO نسبة الكتاب:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head8">AUTO منهج المؤلف في الكتاب:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head9">AUTO وأما القسم الثاني من الباب الأول، وهو في الحروف المهملة،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head10">AUTO شواهد الكتاب:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head11">AUTO التحقيق:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head12">AUTO منهجي في التحقيق:</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">AUTO بسم الله الرحمن الرحيم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">AUTO ### || AUTO [الباب] الأول: في تقسيم الحروف بحسب الإعمال</a>
<ul class="collapsibleList">
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head15">AUTO ومهمل: وهو[67] مالم يؤثر في ما دخل عليه شيئا.</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head16">AUTO جار فقط، أو ناصب فقط، أو جازم فقط، أو ناصب ورافع، أو جار</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head17">AUTO وترتقي إلى سبعة وعشرين حرفا، وفي بعضها خلاف.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head18">AUTO على رأسه تلقي اللسان من الفم[107].</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head19">AUTO وزاد الكوفيون[110] المعية، كقوله تعالى: "إلى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head20">AUTO ولموافقة الباء، أي باء الاستعانة كقوله تعالى: "يذرؤكم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head21">AUTO وأطلق ابن أبي الربيع[156] في زيادتها في الفاعل، والمفعول،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head22">AUTO و(عند) نحو: كتبته لخمس خلون.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head23">AUTO [على]ومنها (على): وتكون اسما إذا دخل عليها حرف جر، نحو:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head24">AUTO على كل أفنان العضاه تروق[208]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head25">AUTO وإذا لحقتها (ما) فقيل[222]: تكفها عن عملها، وقيل[223]: لا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head26">AUTO والاسم المجرور بها إما صريح، كقوله تعالى: "حتى مطلع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head27">AUTO وبالوجهين / إن كان مشغولا بضمير مجرورها أو سببيه نصبا،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head28">AUTO و(حاشا) عند سيبويه[243] لا تكون إلا حرفا جارا، وسمع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head29">AUTO وقال الكسائي: إنه فاعل بفعل مضمر[254]، وقال بعض الكوفيين:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head30">AUTO ### ||||| AUTO ومنها (الواو): وتجر في القسم الظاهر دون</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head31">AUTO على خلاف فيها[258].</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head32">AUTO ومنها (التاء)، وتجر في القسم خاصة، نحو: تالله، وسمع: ترب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head33">AUTO ومنها (من) - مثلثة الميم[262] -، وتجر في باب القسم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head34">AUTO ومنها (الهاء، والهمزة) لاستفهام أو قطع، نحو: هالله،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head35">AUTO ومذهب الأخفش[269] والمبرد[270] أنها لا تجر؛ لأن الأخفش</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head36">AUTO ### ||||| AUTO وقيل[275]: هي غير جارة، والمجرور بعدها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head37">AUTO ومنها (كي)، وتجر (ما) في الاستفهام، نحو: كيمه، أي: لمه؟،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head38">AUTO ومنها (متى)، وسمع الجر بها في لغة هذيل[278]، ومنه:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head39">AUTO أي: من لجج.</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head40">AUTO النوع الثاني: الناصب فقط[284].</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head41">AUTO ومن الجائز تقدم لام (كي) إذا لم تتصل[312] بها (لا)، نحو:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head42">AUTO وما عداه هذه المواضع لا تعمل إلا مظهرة إلا ما سمع، نحو:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head43">AUTO حرك من دون بابك الحلقه[319]</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head44">AUTO النوع الثالث: الجوازم[323]</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head45">AUTO وهي على قسمين: جازم لفعل واحد، وجازم لفعلين.</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l6" href="01.html#head46">AUTO ### ||||||| AUTO والجازم لفعل واحد:</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l7" href="01.html#head47">AUTO 32- لولا فوارس من نعم وأسرتهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l7" href="01.html#head48">AUTO و(لما): لنفي ماض متصل بزمن الحال.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l7" href="01.html#head49">AUTO و(اللام): لأمر، أو دعاء.</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l6" href="01.html#head50">AUTO ### ||||||| AUTO والجازم لفعلين:</a>
</li>
</ul>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l4" href="01.html#head51">AUTO النوع الرابع: الذي يعمل نصبا ورفعا، وهو صنفان:</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head52">AUTO ### |||||| AUTO أحدهما: الذي ينصب المبتدأ، ويرفع الخبر، وهو:</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l6" href="01.html#head53">AUTO و(ليت): ومعناها التمني في الممكن وغيره.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l6" href="01.html#head54">AUTO ### |||||| AUTO ### |||||| AUTO و(لعل): ومعناها الترجي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l6" href="01.html#head55">AUTO و(كأن): ومعناها التشبيه، وقيل: التحقيق[340]، كقوله:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l6" href="01.html#head56">AUTO وهي مركبة من كاف التشبيه و(إن)، ثم صارا كحرف واحد، فلا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l6" href="01.html#head57">AUTO و(لكن) ومعناها الاستدراك، وهي بسيطة، لا مركبة، خلافا</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l5" href="01.html#head58">AUTO الصنف الثاني: الذي يرفع المبتدأ، وينصب الخبر، وهو:</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l6" href="01.html#head59">AUTO (ما)، و(لا)، و(لات)، و(إن)، و(ليس) عند من يقول</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l6" href="01.html#head60">AUTO وأما (لات) فتاؤها زائدة، ك (ثمت) و(ربت)، وقال ابن أبي</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</ul></li>
</ul>
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">AUTO الباب الثاني: في تقسيم الحروف بحسب ألقابها[367].</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head62">AUTO ### ||| AUTO العطف، وحروفه:</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head63">AUTO و(الفاء) للتعقيب، وقيل: تأتي لمطلق الجمع كالواو[370]، وقيل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head64">AUTO و(ثم): للمهلة، وقيل: تأتي لمطلق الجمع كالواو[376].</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head65">AUTO و(حتى): لمطلق الجمع، كالواو، وقيل: للترتيب[377].</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head66">AUTO و(أو) للشك: نحو: جاء زيد أو عمرو.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head67">AUTO و(إما) المسبوقة بمثلها على مذهب الأكثر[387]، ومذهب أبي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head68">AUTO و(أم) المتصلة: وشرطها أن تتقدم همزة استفهام، ويليها مفرد،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head69">AUTO و(بل): لإثبات الحكم للثاني دون الأول، نحو: قام زيد بن عمرو،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head70">AUTO و(لكن): ومعناها الاستدراك.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head71">AUTO و(لا) لإخراج من حكم الأول.</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head72">AUTO ومنها النداء:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head73">AUTO ومنها التحضيض:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head74">AUTO ومنها التنبيه:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head75">AUTO ومنها الردع: وحرفه: (كلا)[412]، وقيل: إنها بمعنى:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head76">AUTO ومنها التنفيس:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head77">AUTO ومنها الجواب:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head78">AUTO ومنها الاستفهام:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head79">AUTO ومنها التوقع:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head80">AUTO ومنها التعريف:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head81">AUTO ومنها الاستثناء:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head82">AUTO ومنها الفصل[433].</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head83">AUTO ومنها التفسير:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head84">AUTO ومنها التفصيل:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head85">AUTO ومنها المعية:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head86">AUTO ومنها النفي:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head87">AUTO ومنها النهي: وحرفه ms21: (لا).</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head88">AUTO ومنها الأمر:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head89">AUTO ومنها الشرط:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head90">AUTO ومنها الزيادة:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head91">AUTO ومنها التأنيث: وحروفه: التاء، والألف المقصورة، أو الممدودة.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head92">AUTO ومنها التأكيد: وحروفه: (إن)، و(أن)، واللام، والنون شديدة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head93">AUTO ومنها الندبة: وحرفه الألف، نحو: وازيداه، والهاء التي تلحقه للوقف.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head94">AUTO ومنها الخطاب: وحرفاه: الكاف في نحو: ذلك، وفي النجاك[463]،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head95">AUTO ومنها التعجب: وحرفاه: لام الجر، نحو: يا للعجب، ويلزمها في</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head96">AUTO ومنها التشبيه: وحرفاه: الكاف، و(كأن)، مركبة منها ومن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head97">AUTO ومنها التمني: وحرفه (ليت). / [7ب]</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head98">AUTO ومنها الترجي: وحرفه (لعل).</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head99">AUTO ومنها الاستدراك: وحرفه (لكن).</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head100">AUTO ومنها الغاية: وحرفاه: (حتى)، و(إلى).</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head101">AUTO ومنها التقليل: وحرفه (رب).</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head102">AUTO ومنها الابتداء: وحروفه: (إن) وأخواتها إذا كفت ب(ما)، و(هل)،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head103">AUTO ومنها العوض: وحرفه (ما)، في نحو:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head104">AUTO ومنها التحقيق: وحرفه[468] (قد) مع الماضي.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head105">AUTO ومنها الإضراب: وحرفاه: (بل)، و(أم) المنفصلة لكن مع الهمزة،</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head106">AUTO ومنها الدعاء: وحرفه (لا)، نحو: لا عذب الله زيدا، وزاد بعضهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head107">AUTO ومنها كف وتهيئة:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head108">AUTO ومنها التسوية:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head109">AUTO ومنها التعدية: وحرفاه: الهمزة، والباء، نحو: أقمت زيدا، ومررت به.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head110">AUTO ومنها التعليل:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head111">AUTO ومنها المصدر:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head112">AUTO ومنها التقرير، وحرفه الهمزة، كقوله تعالى: "ألم نشرح لك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head113">AUTO ومنها التوبيخ: وحرفه (هلا)، نحو: هلا صليت.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head114">AUTO ومنها الإيجاب:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head115">AUTO ومنها العرض: وحرفه (ألا)، نحو: ألا تنزل عندنا.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head116">AUTO ومنها وجوب لوجوب:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head117">AUTO ومنها امتناع لامتناع:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head118">AUTO ومنها امتناع لوجود: وحرفه (لولا) غير التحضيضية، نحو: لولا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head119">AUTO ومنها الإنكار:</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head120">AUTO [ومنها التذكر:</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head121">AUTO ثبت المصادر والمراجع:</a>
</li>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 70749</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Muhammad Burhan Din Safaqsi</label><label>tags:  :: ShamAY@كتب اللغة - مرقم آليا</label><label>url: https://raw.githubusercontent.com/OpenITI/0750AH/master/data/0742IbnMuhammadBurhanDinSafaqsi/0742IbnMuhammadBurhanDinSafaqsi.Tuhfa/0742IbnMuhammadBurhanDinSafaqsi.Tuhfa.ShamAY0037189-ara1</label><label>tok_length: 16173</label><label>status: pri</label><label>id: ShamAY0037189</label><label>ed_info: </label><label>title_lat: Tuhfa</label><label>title_ar: التحفة الوفية بمعاني حروف العربية</label><label>book: 0742IbnMuhammadBurhanDinSafaqsi.Tuhfa</label><label>author_lat: Ibn Muhammad Burhan Din Safaqsi</label><label>author_ar: السفاقسي :: إبراهيم بن محمد بن إبراهيم القيسي السفاقسي، أبو إسحاق: برهان الدين :: إبراهيم بن محمد بن إبراهيم السفاقسي</label><label>date: 0742</label><label>versionUri: 0742IbnMuhammadBurhanDinSafaqsi.Tuhfa.ShamAY0037189-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "003", "004", "005", "006", "007", "008", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "044"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
