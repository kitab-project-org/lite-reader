<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">كتاب الآداب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">لابن شمس الخلافة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">جعفر بن محمد بن مختار الأفضلي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">باب الحكمة من النثر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">وقال أمير المؤمنين علي رضي الله عنه من لم يتأمل الأمور بعين عقله, لم يقع سيف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">وكتب أبو بكر رضي الله عنه إلى عكرمة بن أبي جهل - وهو عامله على عمان - إياك أن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">وقال عمر بن الخطاب رضي الله عنه ms01 ما عاقبت من عصى الله فيك, بمثل أن تطيع الله فيه.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">من المأثور عن الحكماء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">وقال أرسطو طاليس للطالب البالغ, لذة الإدراك, وللطالب ms04 المحروم, راحة اليأس.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">وقال بزرجمهر الشدائد قبل المواهب بمنزلة الجوع قبل الطعام, يحسن به موقعه ويلذ معه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">وقال نصر بن سيار كل شيء يبدو صغيرا ثم يكبر, إلا المصيبة فإنها تبدو كبيرة ثم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">وقال خالد بن برمك التعزية بعد ثلاث تجديد للمصيبة, والتهنئة بعد ثلاث استخفاف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">وقال آخر مثل الذي يعلم الناس الخير ولا يعمل به, كمثل أعمى بيده سراج يستضيء به</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">وقال آخر لولا أن بين المحبوبات عوارض من المكاره, لما استعذب مذاقها ولا حسن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">وقال بعض الحكماء إياك والعجلة, فإنه مكسبة للمذلة, مجلبة للندامة, منفرة لأهل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">وقال خالد بن صفوان لابنه يا بني! كن أحسن ما تكون في الظاهر حالا, أقل ما تكون في</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">وفي كتاب كليلة ودمنة إذا أحدث لك العدو صداقة لعلة ألجأته إليك, فمع ذهاب العلة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">وقال ابن المعتز الحوادث الممضة مكسبة لحظوظ جزيلة. منها ثواب مدخور, وتطهير من</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">وقال حسان بن تبع الحميري لا تثقن بالملك فإنه ملول ms08, ولا بالمرأة فإنها حرون, ولا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">وقال آخر النفس غير فارغة أبدا, فإن شغلتها بما يصلحها, وإلا شغلتك بما يفسدك.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">وقال محمد بن عبد الملك الزيات احذروا الصديق الجاهل, أكثر من حذركم العدو العاقل,</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">وقال النعمان بن المنذر من سأل فوق قدره استحق الحرمان, ومن ألحف في المسألة استحق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">وقيل لأعرابي لم قطعت أخاك وهو من أبيك وأمك؟ فقال إني لأقطع العضو الفاسد وهو أقرب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">وقال العتبي سمعت أعرابيا يقول لآخر إن فلانا وإن خف عليك, فإن عقاربه تسري إليك,</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">وقال إعرابي لآخر اسحب من يتناسى معروفه عندك, ويتذكر حقوقك عليه.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">وقال هارون الرشيد لإسماعيل بن صبيح إياك والدالة فإنها تفسد الحرمة, وتنقص الذمة,</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">وقال آخر حركة الإقبال بطيئة وحركة الإدبار سريعة, لأن المقبل كالصاعد مرقاة,</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">وقيل لبعضهم ما الحزم؟ فقال سوء الظن بالناس. قيل فما الصواب؟ قال المشورة. قيل فما</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">وعرض مروان الحمار جنده فكان سبعين ألف عربي على سبعين ألف عربي. فقال إذا انقضت</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">وقال بعضهم لأبي العيناء - وراءه ضعيفا من الكبر - كيف أصبحت أبا العيناء؟ فقال</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">وقال أبو بكر الخوارزمي صغير البر ألطف وأطيب, كما أن قليل الماء أشهى وأعذب.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">وقيل لشريك بن عبد الله إن معاوية كان حليما. فقال كلا, لو كان حليما ما سفه الحق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">وقال دارا الأكبر مثل العدو الضاحك إليك, مثل الحنظلة النضرة أوراقها القاتل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">وقال آخر دع الكذب حيث ترى أنه ينفعك, فإنه يضرك. واستعمل الصدق حيث ترى أنه يضرك ,</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">وقال ابن المقفع إذا حاججت فلا تغضب, فإن الغضب يقطع عنك الحجة, ويظهر عليك الخصم.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">في الملوك وذكر أحوالهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">وقال بهرام جور لا شيء أضر بالملوك من استخبار من لا يصدق أن خبر, واستكفاء من لا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">وقال ابن المقفع ليس للملك أن يغضب, لأن القدرة من وراء حاجته؛ وليس له أن يكذب,</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">وكان كسرى يقول عاملوا الأحرار بمحض المودة, وعاملوا العامة بالرغبة والرهبة,</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">وقال عمر بن الخطاب رضي الله عنه لا يصلح لهذا الأمر إلا اللين في غير ضعف, القوي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">فيما يجب على من يصحب السلطان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">وقال خالد بن صفوان من صحب السلطان بالنصيحة والأمانة, كان أكثر عدوا ممن صحبه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">وقال أفلاطون إذا خدمت ملكا فلا تطعه في معصية بارئك, فإن إحسانه إليك أفضل من</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">وقال أفلاطون لا تشيرن على الملك في أحد بما تكره أن يعمله في أمرك إذا حللت محله.</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">في ذم الحسد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">وقال عمرو بن العاص ما بلغني عن أحد شنآن قط, إلا سللت سخيمة قلبه بجهدي, إلا حاسد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">ووجد في كتاب لجعفر بن يحيى - أربعة أسطر مكتوبة بالذهب - الرزق مقسوم, الحريص</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">في ذم الغيبة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">وقال رجل للحسن البصري بلغني أنك تغتابني. فقال لم يبلغ من مقامك عندي أن أحكمك في</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">فصل في الإخوان والحض عليهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">وقال آخر التواضع مع البخل والجهل, أحسن من التكبر مع البذل والعقل؛ فأعظم بحسنة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">في مدح التواضع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">في الحض على اكتساب الأدب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">اثنين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">وقال لقمان لابنه يا بني شيئان إذا أنت حفظتهما لا تبالي ما صنعت بعدهما؛ ذنبك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">فصل ثلاثة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">وقال عمر بن الخطاب رضي الله عنه ثلاث تثبتن لك الود في صدر أخيك أن تبدأه بالسلام,</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">ولما قتل أنو شروان, بزرجمهر وجد في منطقته كتابا فيه ثلاث كلمات. وهي إن كان القدر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">وقال سليمان بن داود عليهما السلام أبغضت نفسي ثلاثة وغرت أن تطلع الشمس عليهن؛</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">وقال العالم رضي الله عنه إن الله خبأ ثلاثا في ثلاث خبأ رضاه في يسير من طاعته,</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">وفي كتاب كليلة ودمنة لينفق ذو المال ماله في ثلاثة مواضع في الصدقة إن أراد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">وكان يقال من ألهم ثلاثا لم يحرم من ألهم الدعاء؛ لم يحرم الإجابة, ومن ألهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">وقال سهل بن هارون ثلاثة من المجانين وإن كانوا من العقلاء الغضبان, والسكران,</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">أربعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">وعن المدايني قال خرج الزهري يوما من عند هشام بن عبد الملك. فقال ما سمعت بمثل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">وقال محمد بن الربيع, لحاتم الأصم على ما بنيت أمرك؟ قال على أربع خصال علمت أن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">وقال المأمون الناس بين أربع طبقات إمارة, وتجارة, وصناعة, وزارعة. فمن لم يكن من</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">فصل خمسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">وقال علي كرم الله وجهه أوصيكم بخمس لو ضربتم إليها آباط الإبل لكان قليلا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">فصل ستة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">وقال أمير المؤمنين علي رضي الله عنه لا خير في صحبة من اجتمع فيه ست خصال إن حدثك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">وقال بعض الحكماء عمارة الدنيا منوطة بستة أشياء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">ثمانية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">فصل تسعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">وقيل لحكيم. ما النعمة ms33؟ قال هي في تسعة أشياء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head88">فصل عشرة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head89">باب الفصول القصار من البلاغة والحكمة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head90">فصل في ألفاظ يتمثل بها من القرآن الكريم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head91">فصل في أمثال العرب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head92">فصل الأخبار بما أوله ألف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head93">فصل الأخبار بسائر الحروف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head94">فصل الأمر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head95">فصل النهي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head96">فصل إذا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head97">فصل من</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head98">فصل لا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head99">فصل ما</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head100">فصل رب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head101">فصل لو ولولا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head102">فصل ليس</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head103">باب الحكمة من الشعر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head104">فصل انتظار الفرج من أهل الشدة والحرج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head105">فصل في الحض على اكتساب الإخوان ومدارتهم والصفح عن زلاتهم وهوافتهم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head106"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head107">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head108">فصل في ذم خوان الإخوان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head109">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head110">في مدح القناعة وذم الضراعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head111">فصل في الأمر بالصبر على نوائب الدهر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head112"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head113">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head114">فصل في الحض على الانتقال، رجاء بلوغ الآمال</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head115"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head116">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head117">في ذم الزمان وأهله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head118"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head119">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head120">في الوعظيات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head121">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head122">كراهية الغلو في المزاح، لذوي الأل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head123">باب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head124">فصل في حكم متباينة المقاصد جمة الفوائد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head125">باب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head126">أبيات الأمثال المفردة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head127">باب أعجاز الأبيات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head128">فصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head129">المزدوج</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 100713</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Shams Khilafa</label><label>tags: CENT0700 :: _ADAB :: _ADHKAR :: GAL@literature-islamic :: GAL@1000-1258CE :: GAL@poetry :: GAL@literature-arabic :: GAL@period-postclassical :: GAL@egypt :: Shamela@الرقاق والآداب والأذكار - مرقم آليا</label><label>url: https://raw.githubusercontent.com/OpenITI/0625AH/master/data/0622IbnShamsKhilafa/0622IbnShamsKhilafa.AdabNafica/0622IbnShamsKhilafa.AdabNafica.Shamela0005433-ara1</label><label>tok_length: 24952</label><label>status: pri</label><label>id: Shamela0005433</label><label>ed_info: </label><label>title_lat: Adab Nafica</label><label>title_ar: الآداب النافعة بالألفاظ المختارة الجامعة</label><label>book: 0622IbnShamsKhilafa.AdabNafica</label><label>author_lat: Ibn Shams Khilafa</label><label>author_ar: ابن شمس الخلافة، جعفر بن محمد (شمس الخلافة) ابن مختار الأفضلي، أبو الفضل، الملقب مجد الملك (المتوفى: 622هـ)</label><label>date: 0622</label><label>versionUri: 0622IbnShamsKhilafa.AdabNafica.Shamela0005433-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
