<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0"></a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">اللامات</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head2">لام الابتداء </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head3">ولام القسم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head4">ولام الإضافة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head5">ولام التعريف </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head6">واللام الأصلية </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head7">واللام الزائدة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head8">ولام الاستغاثة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head9">ولام الكناية </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head10">ولام كي </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head11">ولام الجحود </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head12">ومن لام الإضافة لام العاقبة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head13">ولام الأمر </a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">الألفات</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head15">ألف الأصل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head16">وألف الوصل </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head17">وألف القطع </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head18">وألف الاستفهام </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head19">وألف التقرير </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head20">وألف الإيجاب </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head21">وألف الأداة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head22">وألف الجمع </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head23">وألف التخيير </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head24">وألف التفضيل </a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">الهاءات</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head26">هاء الإضمار </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head27">وهاء التأنيث </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head28">وهاء العماد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head29">وهاء الوقف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head30">وهاء الندبة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head31">والهاء الأصلية </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head32">وهاء البدل</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">الياءات</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head34">ياء الإضافة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head35">والياء الأصلية </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head36">والياء الملحقة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head37">وياء التأنيث </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head38">وياء الإطلاق </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head39">والياء المنقلبة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head40">وياء التثنية </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head41">وياء الجمع </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head42">وياء العوض </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head43">وياء الخروج</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">النونات</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head45">نون الرفع </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head46">ونون التثنية </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head47">ونون الجمع </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head48">ونون التوكيد </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head49">نون الصرف </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head50">والنون المضارعة لألفي التأنيث </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head51">والنون الأصلية </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head52">والنون الزائدة في حشو الكلمة </a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">التاءات</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head54">تاء الجمع </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head55">وتاء التأنيث في الواحد </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head56">والتاء الأصلية </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head57">والتاء الزائدة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head58">وتاء العوض </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head59">وتاء البدل </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head60">والتاء الملحقة </a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">وجوه ما</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head62">فالخمسة الأول:</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head63">إستفهام </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head64">وجزاء </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head65">وموصولة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head66">وموصوفة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head67">وتجيء ما للتعجب </a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head68">والخمسة الأخر</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head69">جحود </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head70">وصلة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head71">وكافة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head72">ومسلطة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l3" href="01.html#head73">ومغيرة لمعنى الحرف </a>
</li>
</ul>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">من</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head75">استفهام </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head76">وجزاء </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head77">وموصولة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head78">وموصوفة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head79">ومحمولة على التأويل في التثنية والجمع والتأنيث </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head80">وموسومة بعلامة نكرة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head81">ومنقولة من اجل أم </a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">أي</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head83">استفهام </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head84">وجزاء </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head85">وبمعنى الذي </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head86">وصفة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head87">وحال </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head88">ومتصرفة في الإفراد والإضافة والتذكير والتأنيث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head89">و منقولة إلى كم </a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head90">أن المخففة</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head91">مخففة من الثقيلة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head92">وناصبة للفعل </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head93">وبمعنى أي الخفيفة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head94">وزائدة </a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head95">إن</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head96">الجزاء </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head97">والجحد </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head98">ومخففة من الثقيلة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head99">وزائدة </a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head100">حتى</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head101">جارة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head102">وعاطفة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head103">وناصبة للفعل </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head104">وحرف من حروف الابتداء</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head105">من</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head106">ابتداء الغاية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head107">وتبعيض </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head108">وتجنيس </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head109">وزائدة </a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head110">لام الإضافة</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head111">الملك </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head112">والنسب </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head113">والفعل </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head114"></a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head115">رويد</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head116">إسم للفعل </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head117">وصفة </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head118">وحال </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head119">وبمعنى المصدر</a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head120">تصرف الحروف </a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head121">تدخل على الاسم وحده </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head122">وتدخل على الفعل وحده </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head123">وتدخل على الجملة وحدها </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head124">وتدخل على الاسم لتعقده باسم آخر </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head125">وتدخل على الفعل لتعقده بفعل آخر </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head126">وتدخل على الجملة لتعقدها بجملة أخرى </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head127">وتدخل على الاسم لتعقده بفعل </a>
</li>
</ul>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head128">الخبر</a>
<ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head129">وهو اسم </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head130">وهو فعل </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head131">وهو ظرف </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l2" href="01.html#head132">وهو جملة </a>
</li>
</ul>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 16636</label><label>author_lat_full_name:  Abū al-Ḥasan ʿAlī b. ʿĪsá b. ʿAlī b. ʿAbd Allāh al-Iḫšīdī, al-Warrāq, al-Jāmiʿ, al-Rummānī</label><label>author_lat_shuhra: al-Rummānī</label><label>author_from_uri: Abu Hasan Rummani</label><label>tags: COMPLETED :: CENT0400 :: _NAHW :: _SARF :: GAL@period-classical :: GAL@literature-islamic :: GAL@basra-school :: GAL@0750-1000CE :: GAL@iraq :: GAL@literature-arabic :: GAL@philology :: GAL@basra :: Shamela@النحو والصرف - مرقم آليا</label><label>url: https://raw.githubusercontent.com/OpenITI/0400AH/master/data/0384AbuHasanRummani/0384AbuHasanRummani.MacaniHuruf/0384AbuHasanRummani.MacaniHuruf.Shamela0005353-ara2.completed</label><label>tok_length: 4031</label><label>status: pri</label><label>id: Shamela0005353</label><label>ed_info: </label><label>title_lat: Risālaŧ Manāzil al-ḥurūf :: Risālaŧ Maʿānī al-ḥurūf, Kitāb al-ḥurūf</label><label>title_ar: رسالة منازل الحروف :: رسالة معاني الحروف، كتاب الحروف</label><label>book: 0384AbuHasanRummani.MacaniHuruf</label><label>author_lat: Abu Hasan Rummani :: al-Rummānī ::  Abū al-Ḥasan ʿAlī b. ʿĪsá b. ʿAlī b. ʿAbd Allāh al-Iḫšīdī, al-Warrāq, al-Jāmiʿ, al-Rummānī</label><label>author_ar: الرماني ::  أبو الحسن علي بن عيسى بن علي بن عبد ألاه الإخشيدي، الوراق، الجامع، الرماني</label><label>date: 0384</label><label>versionUri: 0384AbuHasanRummani.MacaniHuruf.Shamela0005353-ara2</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "001", "002", "003", "004", "005", "006", "007"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
