<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta http-equiv="Content-Security-Policy" https:=""/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" rel="stylesheet"/>
<link href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri&amp;display=swap" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet"/>
<link crossorigin="anonymous" href="../css/stylev2.css" rel="stylesheet" type="text/css"/>
<script crossorigin="anonymous" src="../js/CollapsibleLists.js" type="application/javascript"></script>
<!-- <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/style/style-components.min.css" /> -->
<script type="text/javascript">
</script>
</head>
<body>
<div id="loading">
<img alt="Loading..." id="loading-image" src="../img/spinner1.gif"/>
</div>
<div class="page-wrapper toggled" id="wrapper">
<div id="sidebar-wrapper">
<html><body><div class="card-header title-heading">فصول الكتاب</div><ul class="collapsibleList">
<li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head0">الخطبة التي كان يفتتح بها المؤلف كتبه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head1">لله أولياء وللشيطان أولياء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head2">صفات أولياء الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head3">الإيمان والتقوى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head4">الحب في الله والبغض في الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head5">موالاة الطاعات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head6">أفضل أولياء الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head7">أفضل أولي العزم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head8">ادعاء مشركي العرب أنهم أهل الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head9">حديث: "وليي الله وصالح المؤمنين "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head10">لا طريق غير طريق الإسلام</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head11">حال أهل الصفة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head12">كذب كل حديث يروى عن النبي في عدة الأولياء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head13">هل يكون لله ولي من النصارى واليهود</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head14">ما لابد منه في الإيمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head15">الأركان الخمسة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head16">محمد صلى الله عليه وسلم خاتم النبيين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head17">الإيمان بجملة ما جاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head18">الإيمان بوساطته في التبليغ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head19">أولياء من جنس الكهان والسحرة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head20">خصال المنافقين أربع من أمر الجاهلية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head21">خوف أصحاب النبي ‍ صلى الله عليه وسلم من النفاق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head22">أولياء الله طبقتان: سابقون مقربون، وأصحاب يمين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head23">الجزاء من جنس العمل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head24">الأنبياء منهم عبد رسول ومنهم نبي ملك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head25">أمة محمد صلى الله عليه وسلم وارثة الكتاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head26">القول في عذاب أهل الكبائر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head27">أصل الإيمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head28">الإيمان المجمل والمفصل ms20</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head29">لا يكون أحد من الكفار والمنافقين وليا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head30">المجنون والمكاشفات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head31">لا ولاية لمن لا يؤدي الفرائض</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head32">بدعة التميز باللباس والحلاقة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head33">التحقيق في أسم الصوفية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head34">الناس معادن وتفاضلهم بالتقوى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head35">لفظ الفقر شرعا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head36">لا أصل لحديث: رجعنا من الجهاد الأصغر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head37">جهاد الكفار من أعظم الجهاد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head38">أفضل الإيمان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head39">‍‍‍حق الله على عباده</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head40">ليس في السنة إفراط ولا تفريط</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head41">هل يعصم الأولياء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head42">أجرالمحتهد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head43">لا يجوز لولي الاعتماد على ما يلقى في قلبه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head44">وجوب اتباع ما بعث الله رسوله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head45">أحاديث في فضائل عمر رضي الله عنه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head46">قتال مانعي الزكاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head47">مرتبة الصديق ومرتبة المحدث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head48">لا ولاية لمن خالف الكتاب والسنة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head49">الأنبياء وحدهم يطاعون في كل ما يأمرون به</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head50">معنى: " اتقوا الله حق تقاته "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head51">كيف يكفر أدعياء الولاية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head52">أقوال لأبي سليمان الداراني والجنيد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head53">غلط الناس في اتباع من خالف السنة والكتاب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head54">مشابهتم للنصارى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head55">ميثاق الله على الأنبياء للايمان بمحمد صلى الله عليه وسلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head56">الاغترار بالمكاشفات والتصرفات الخارقة للعادة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head57">معنى الكرامة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head58">علامات أولياء الشيطان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head59">المؤمن يفرق بين أولياء الرحمن وأولياء الشيطان</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head60">لكل نبي شرعة ومنهاج</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head61">الإسلام دين الأنبياء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head62">دين واحد وشرائع منوعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head63">الأنبياء أفضل من الأولياء بالاتفاق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head64">أفضل الناس بعد الأنبياء أبو بكر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head65">خير القرون</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head66">أفضل السابقين الأولين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head67">الكلام على خاتم الأولياء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head68">مزاعم ابن عربي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head69">احتياج شريعة عيسى عليه السلام إلى النبوات السابقة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head70">هل للولي طريق لا يحتاج فيه إلى محمد صلى الله عليه وسلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head71">إيمان الأولياء بين الباطن ms44 والظاهر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head72">كفر من يدعي ان محمدا صلى الله عليه وسلم علم من الأمور ظاهرها وان الأولياء علموا باطنها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head73">لا مثيل لولاية محمد صلى الله عليه وسلم على الاطلاق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head74">ادعاؤهم بوحدة معدن الأنبياء والأولياء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head75">فساد تلفيق ابن سينا في الأمور الإلهية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head76">خصائص النبوة عند ابن سينا وغيره من المتفلسفة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head77">2- </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head78">3- </a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head79">نقد آراء ابن سينا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head80">كذب الحديث الذي ذكروه في العقل ونقضه لغة وشرعا</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head81">التحقيق في المخلوق والمحدث والقديم الأزلي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head82">ما بناه ابن عربي على فساد الفلاسفة من وهم، وما اجترحه من خلط في أمر النبوة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head83">صفات الملائكة في القرآن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head84">نفي صفة الخيال عن جبريل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head85">الكشف عن غاية المتصوفة من الفلاسفة من أفكار أصول الإيمان ومجد الخالق</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head86">نقد فكرتي الحلول ووحدة الوجود</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head87">كيف تتلبسهم الشياطين فيظنونها ملائكة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head88">كذاب ثقيف ومبيرها</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head89">تفنيد مزاعم ابن عربي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head90">احواله الشيطانية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head91">مدحه الكفار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head92">عقيدته في القديم والمحدث</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head93">زعمهم أن القرآن شرك لأنه خالف الفصوص</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head94">نقد فكرة وحدة الوجود ms54</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head95">القول في تعطيلهم الخالق القول في تعميم الألوهية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head96">القول في طلبهم ترك العقل والشرع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head97">تقديمهم الأولياء على الأنبياء ‍وقولهم بعدم انقطاع النبوة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head98">القول في المعصية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head99">القول في قصيدة نظم السلوك وتوهم ابن الفارض الالوهية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head100">معية الله بعلمه لا بذاته وهي عامة وخاصة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head101">ال‍قول في الصفات، ليس كمثله شيء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head102">الله تعالى خالق كل شيء ومليكه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head103">‍الشرك أعظم الذنوب أوامر الله ونواهيه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head104">‍ دعاء النبي لله واستغفاره</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head105">‍ عدم الاصرار على الذنب من محبة الله للعبد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head106">جعل القدر حجة لأهل الذنوب من الشرك</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head107">الأمر بالصبر عند المصائب</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head108">الرضى بحكم الله أعلى مرتبة من الصبر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head109">أهل البغي عند الطاعة قدريون وعند المعصية جبريون</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head110">سيد الاستغفار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head111">حديث: " يا عبادي اني حرمت الظلم على نفسي.. "</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head112">الفرق بين الحقيقة الكونية والحقيقة الدينية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head113">أفضل القضاة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head114">مدلول لفظ الشرع والشريعة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head115">الاحتجاج بقصة موسى مع الخضر ودفعه من وجهين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head116">الأمر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head117">الإرادة الكونية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head118">الأمر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head119">الاذن القضاء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head120">البعث الارسال الجعل</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head121">التحريم الكلمات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head122">تعريف أولياء الله المتقين واعدائه</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head123">مجامع الفرق بين الولايتين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head124">من كتاب الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head125">من المعقول الشرعي</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head126">كيف تحصل كرامات أولياء الله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head127">كرامات النبي صلى الله عليه وسلم</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head128">كرامات الصحابة والتابعين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head129">بعض الأحوال الشيطانية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head130">آية الكرسي تطرد الشياطين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head131">فروق بين كرامات الأولياء والأحوال الشيطانية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head132">أحوال شيطانية أخرى</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head133">اتخاذ القبور مساجد</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head134">حال أصنام الجاهلية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head135">مغارات الشياطين</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head136">أقسام الناس في خوارق العادات</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head137">ما يقوي الأحوال الشيطانية من السماع والمكاء والتصدية</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head138">سماع النبي للقرآن ومدح الله لهذا النوع من السماع</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head139">سماع الكف والدف</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head140">غاية الكرامة لزوم الاستقامة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head141">انخداع صاحب الخوارق الشيطانية بحاله</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head142">الإيمان والتقوى سبب كرامات الأنبياء</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head143">رسالة محمد صلى الله عليه وسلم للناس كافة</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head144">إيمان نفر من الجن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head145">من استعاذ بالجن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head146">دخول كفار الجن النار</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head147">كفر من استعاذ بالجن</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head148">من يسجد للشمس والقمر</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head149">الاستغاثة بالشيوخ</a>
</li><li class="collapsibleListClosed">
<a class="toc-item l1" href="01.html#head150">الحيل الشيطانية</a>
</li>
</ul>
</body></html></div>
<div class="book body-inner" lang="ara">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" style="direction: ltr;">
<div class="mr-auto d-flex justify-content-left">
<a class="navbar-brand ms-2" href="http://www.kitab-project.org" target="_blank">
<img class="d-inline-block align-top" src="https://cdn.jsdelivr.net/gh/sohailmerchant/kitab-cdn@main/img/kitab-logo.png" width="60px"/>
</a>
</div>
<div class="navbar-nav mx-auto btn-toolbar" style="direction: rtl;">
<div class="d-flex justify-content-center">
<form class="row" id="nav-form" style="margin-bottom: 0px;">
<span class="btn col justify-content-center">ج:</span>
<select class="col form-select pull-left" id="vol-select"></select>
<span class="btn col justify-content-center">ص:</span>
<select class="col form-select pull-left" id="page-select"></select>
<button class="btn col pull-right mx-3" id="nav-submdit-btn" style="width: 100px;" type="submit" value="Go">Go</button>
</form>
</div>
</div>
<div class="btn-toolbar navbar-nav ml-auto d-flex justify-content-right">
<div class="btn-group">
<a class="nav-link pull-right" title="Go to top">
<i class="btn bi bi-arrow-up-circle" id="back-to-top"></i>
</a>
<a class="nav-link pull-right" title="Increase fonts">
<i class="btn bi bi-fonts font-default pull-left"></i>
</a>
<a class="nav-link pull-right" title="Turn light off">
<i class="btn bi bi-lightbulb-off"></i>
</a>
<div class="nav-link pull-right dropdown">
<a aria-expanded="false" aria-haspopup="true" class="" data-bs-toggle="dropdown" id="dropdownMenuButton" role="button" title="Book Metadata">
<i class="btn bi bi-info"></i>
</a>
<div aria-labelledby="dropdownMenuButton" class="dropdown-menu">
<div class="col-12" id="metadata-content"><label>char_length: 123790</label><label>author_lat_full_name: </label><label>author_lat_shuhra: </label><label>author_from_uri: Ibn Taymiyya</label><label>tags: CENT0800 :: _IBNTAYMIYYA :: GAL@literature-islamic :: GAL@hanbalis :: GAL@dogmatics :: GAL@period-postmongol :: GAL@period-mamluk :: GAL@1258-1517CE :: GAL@period-decline :: GAL@theology :: GAL@egypt :: GAL@fiqh :: GAL@syria :: Shamela@كتب ابن تيمية</label><label>url: https://raw.githubusercontent.com/OpenITI/0750AH/master/data/0728IbnTaymiyya/0728IbnTaymiyya.FurqanBaynaAwliya/0728IbnTaymiyya.FurqanBaynaAwliya.Shamela0021499-ara1</label><label>tok_length: 29234</label><label>status: sec</label><label>id: Shamela0021499</label><label>ed_info: عبد القادر الأرناؤوط :: 1405 هـ - 1985 م :: مكتبة دار البيان، دمشق</label><label>title_lat: Furqan Bayna Awliya</label><label>title_ar: الفرقان بين أولياء الرحمن وأولياء الشيطان</label><label>book: 0728IbnTaymiyya.FurqanBaynaAwliya</label><label>author_lat: Ibn Taymiyya</label><label>author_ar: تقي الدين أبو العباس أحمد بن عبد الحليم بن عبد السلام بن عبد الله بن أبي القاسم بن محمد ابن تيمية الحراني الحنبلي الدمشقي (المتوفى: 728هـ)</label><label>date: 0728</label><label>versionUri: 0728IbnTaymiyya.FurqanBaynaAwliya.Shamela0021499-ara1</label>
</div>
</div>
</div>
<a class="nav-link pull-right" href="#menu-toggle" id="menu-toggle" title="Book Chapters">
<i class="btn bi bi-list"></i></a>
</div>
</div>
</nav>
<div class="book-body fixed pt-5">
<div class="row">
<div class="col-12">
<div class="row top-heading-panel content-outer-spacing">
</div>
</div>
<div class="col-12" id="meta">
</div>
</div>
<div class="row justify-content-md-center" id="book-main">
<div class="col-lg-8 col-sm-12" id="content">
</div>
</div>
<div class="row mt-5" id="footer">
<div class="col-md-12">
            The KITAB project is based at the Institute for the Study of Muslim Civilizations (ISMC) at Aga Khan
            University, London, and has received funding from the European Research Council (ERC) under the European
            Union's
            Horizon 2020 research and innovation programme (Grant agreement No. 772989)

          </div>
<div class="col-md-12">
<img alt="Logos" height="50" id="logos" src="../img/AKU-EU-ERC-three-logos.jpg"/>
</div>
</div>
</div>
</div>
</div>
<script>

    var pageSel = document.getElementById("page-select");
    var volSel = document.getElementById("vol-select");
    var thisVolume = "01";
    var volPages = {"01": ["000", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "023", "024", "025", "026", "027", "028", "029", "030", "031", "032", "033", "034", "035", "036", "037", "038", "039", "040", "041", "042", "043", "044", "045", "046", "047", "048", "051", "052", "053", "054", "055", "056", "057", "058", "059", "060", "061", "062", "063", "064", "065", "066", "067", "068", "069", "070", "071", "072", "073", "074", "075", "076", "077", "078", "079", "080", "081", "082", "083", "084", "085", "086", "087", "088", "089", "090", "091", "092", "093", "094", "095", "096", "097", "098", "099", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200"]}; /*loaded by html_builder*/

    function goToAnchor(vol, anchorId) {
      if (vol != window.thisVolume) {
        loadVolume(vol, false).then(res => {
          console.log("Volume loaded");
          console.log("Go to anchor " + anchorId);
          /*move the volume page to the element with id=anchorId*/
          /*var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
          console.log(targetAnchor);*/
          /*window.location.hash = "";
          window.location.hash = anchorId;
          window.location.hash = anchorId;
          console.log("#"+anchorId);*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = $("#"+anchorId);
          //$("#content").animate(
          $("html, body").animate(
            {scrollTop: targetAnchor.offset().top},
            1000
          );*/
          /*//This approach does not work at all: scrolls only main window.
          var targetAnchor = document.getElementById(anchorId);
          var rect = targetAnchor.getBoundingClientRect();
          console.log(targetAnchor);
          console.log(rect);
          var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
          window.scroll({
            top: rect.top + rect.height / 2 - viewHeight /2,
            behavior: 'smooth'
          });*/
          /*var targetAnchor = document.getElementById(anchorId);
          var contentDiv = document.getElementsByClassName("book-body")[0];
          var topPos = contentDiv.offsetTop;
          var windowSize = $(window).height();
          console.log("topPos: " + topPos);
          console.log("targetPos: " + targetAnchor.offsetTop);
          console.log("windowSize:" + windowSize)
          console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
          contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
          var targetAnchor = document.getElementById(anchorId);
          targetAnchor.scrollIntoView({"block": "start"});
        });
      } else {
        /*move the volume page to the element with id=anchorId*/
        /*var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({block: 'nearest'});  // this does not always work...
        console.log(targetAnchor);*/
        /*window.location.hash = "";
        window.location.hash = anchorId;
        window.location.hash = anchorId;
        console.log("#"+anchorId);*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = $("#"+anchorId);
        //$("#content").animate(
        $("html, body").animate(
          {scrollTop: targetAnchor.offset().top},
          1000
        );*/
        /*//This approach does not work at all: scrolls only main window.
        var targetAnchor = document.getElementById(anchorId);
        var rect = targetAnchor.getBoundingClientRect();
        console.log(targetAnchor);
        console.log(rect);
        var viewHeight=Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        window.scroll({
          top: rect.top + rect.height / 2 - viewHeight /2,
          behavior: 'smooth'
        });*/
        /*var targetAnchor = document.getElementById(anchorId);
        var contentDiv = document.getElementsByClassName("book-body")[0];
        var topPos = contentDiv.offsetTop;
        var windowSize = $(window).height();
        console.log("topPos: " + topPos);
        console.log("targetPos: " + targetAnchor.offsetTop);
        console.log("windowSize:" + windowSize)
        console.log("targetAnchor.offsetTop-windowSize/3 = " + (targetAnchor.offsetTop - topPos - windowSize / 2));
        contentDiv.scrollTop = targetAnchor.offsetTop - topPos - windowSize / 2;*/
        var targetAnchor = document.getElementById(anchorId);
        targetAnchor.scrollIntoView({"block": "start"});
      }
    }

    CollapsibleLists.apply();
    console.log("Applied CollapsibleLists");

    $(document).ready(function () {
      console.log("Load initial volume " + thisVolume);
      loadVolume(thisVolume).then(res => {
        console.log("Initial volume loaded");
        $('#loading').hide();
        $('#loading').fadeOut("slow");
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
          $('#back-to-top').fadeIn();
        } else {
          $('#back-to-top').fadeOut();
        }
      });
      // scroll body to 0px on click
      $('#back-to-top').click(function () {
        $('body,html').animate({
          scrollTop: 0
        }, 400);
        return false;
      });
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });

      $(".font-default").click(function () {

        $('#wrapper').toggleClass("font-increase", "font-default");
      });

      $(".bi-lightbulb-off").click(function () {
        $('.bi-lightbulb-off').toggleClass("bi-lightbulb", "bi-lightbulb-off");
        $('.page-wrapper').toggleClass("night-mode", "");
        $('.navbar-light').toggleClass("night-mode", "");
        console.log(this);

      });
      $('.toc-item').click(function (event) {
        /*console.log('toc item clicked');*/
        event.preventDefault();
        var clickedElement = event.target;
        /*console.log(clickedElement);*/
        var href = clickedElement.getAttribute("href");
        /*console.log('href: '+href);*/
        var vol = href.substring(0, 2);
        var head = href.split('head').pop();
        var anchorId = "head" + head;
        goToAnchor(vol, anchorId);
        return false;
      });
    });

    function loadPageNumbers(vol, page) {
      /*var pageSel = document.getElementById("page-select");*/
      pageSel.innerHTML = '';
      volPages[vol].forEach(function (p, index) {
        pageSel.options[pageSel.options.length] = new Option(p, p);
      });
      if (page) {
        pageSel.value = page;
      }
    }

    function loadVolumeNumbers(vol) {
      /*var volSel = document.getElementById("vol-select");*/
      volSel.innerHTML = '';
      /*console.log(Object.keys(volPages));*/
      /*console.log(Object.keys(volPages).sort());*/

      Object.keys(volPages).sort().forEach(function (v, index) {
        /*console.log(v);*/
        volSel.options[volSel.options.length] = new Option(v, v);
      });
      volSel.value = vol;
    }

    async function loadVolume(vol) {
      /*Load volume json */
      var page = pageSel.value;
      $('#loading').show();
      console.log("loading volume " + vol);
      await $.getJSON(vol + ".json", function (json) {
        console.log(json)
        $('#content').empty().append(json["content"]);
        /*console.log("json loaded");*/
        window.thisVolume = vol;
        $('#loading').hide();
        $('#loading').fadeOut("slow");
        /*Load volume and page numbers in page-nav form:*/
        loadVolumeNumbers(vol);
        loadPageNumbers(vol, page);
        return true;
      });
    }


    function padWithZeros(number, width) {
      number = number + "";
      if (number.length >= width) {
        return number;
      } else {
        return new Array(width - number.length + 1).join("0") + number;
      }
    }
    document.getElementById("nav-form").addEventListener("submit", function (event) {
      event.preventDefault();
      /*console.log("Clicked Go");*/
      var vol = volSel.value;
      console.log("vol: " + vol);
      /*var targetPage = parseInt(pageSel.value, 10);
      if (page >= 1) {
        page = page-1; //page number is at bottom of page
      }
      var anchor = "v"+vol+"p"+padWithZeros(targetPage, 3);*/
      var targetPage = pageSel.value;
      var pages = volPages[vol];
      var index = pages.indexOf(targetPage);
      if (index > 0) {
        targetPage = pages[index-1];
      }

      console.log("targetPage: " + targetPage);
      var anchor = "v" + vol + "p" + targetPage;
      goToAnchor(vol, anchor);
      return false;
    });

    /*Adapt the page numbers list when the volume number changes:*/
    volSel.addEventListener("change", function (event) {
      var vol = this.value;
      var page = pageSel.value;
      loadPageNumbers(vol, page);
    });


  </script>
</body>
</html>
